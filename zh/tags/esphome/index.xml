<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>ESPHome on The Coding Notes</title>
    <link>https://lexcao.io/zh/tags/esphome/</link>
    <description>Recent content in ESPHome on The Coding Notes</description>
    <image>
      <title>The Coding Notes</title>
      <url>https://images.unsplash.com/photo-1510843572979-e4b9e790fdd7?auto=format&amp;fit=crop&amp;w=720&amp;q=80</url>
      <link>https://images.unsplash.com/photo-1510843572979-e4b9e790fdd7?auto=format&amp;fit=crop&amp;w=720&amp;q=80</link>
    </image>
    <generator>Hugo -- 0.147.2</generator>
    <language>zh</language>
    <lastBuildDate>Sun, 27 Apr 2025 00:00:00 +0000</lastBuildDate>
    <atom:link href="https://lexcao.io/zh/tags/esphome/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>教程：让你的不智能蓝牙灯接入 HomeKit 智能家居</title>
      <link>https://lexcao.io/zh/posts/integrate-bluetooth-lamp-into-homekit-step-by-step/</link>
      <pubDate>Sun, 27 Apr 2025 00:00:00 +0000</pubDate>
      <guid>https://lexcao.io/zh/posts/integrate-bluetooth-lamp-into-homekit-step-by-step/</guid>
      <description>&lt;h1 id=&#34;引言&#34;&gt;引言&lt;/h1&gt;
&lt;p&gt;如果你有一个蓝牙灯，并且它能够被以下几个手机应用控制：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;LampSmart Pro&lt;/li&gt;
&lt;li&gt;Lamp Smart Pro - Soft Lighting / Smart Lighting&lt;/li&gt;
&lt;li&gt;FanLamp Pro&lt;/li&gt;
&lt;li&gt;Zhi Jia&lt;/li&gt;
&lt;li&gt;Zhi Guang&lt;/li&gt;
&lt;li&gt;ApplianceSmart&lt;/li&gt;
&lt;li&gt;Vmax smart&lt;/li&gt;
&lt;li&gt;Zhi Mei Deng Kong&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;那么恭喜你，你可以跟随本篇教程，一步一步将它接入 HomeKit 智能家居。
来实现通过 iPhone 家庭应用控制以及 Siri 语音控制。
对于实现后的效果，可以看我另一篇博文：&lt;a href=&#34;https://lexcao.io/zh/posts/integrate-bluetooth-lamp-into-homekit/&#34;&gt;折腾：HomeKit 接入蓝牙吸顶灯&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;非常感谢 &lt;a href=&#34;https://github.com/NicoIIT/ha-ble-adv/&#34;&gt;https://github.com/NicoIIT/ha-ble-adv/&lt;/a&gt;，本篇教程实际是从零接入该项目。&lt;/p&gt;
&lt;h2 id=&#34;开始之前&#34;&gt;开始之前&lt;/h2&gt;
&lt;p&gt;在开始之前，需要一点点基础的计算机知识，确保满足以下条件：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;熟悉 Home Assistant 概念和一些基本操作，可以阅读官方文档快速熟悉；&lt;/li&gt;
&lt;li&gt;能够使用 Terminal 命令行工具；&lt;/li&gt;
&lt;li&gt;已安装 Docker 并且可用；&lt;/li&gt;
&lt;li&gt;有一个 GitHub 帐号；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;关键：一块 ESP32 开发板&lt;/strong&gt;；
&lt;ul&gt;
&lt;li&gt;主要用于蓝牙通信，如果没有的话，可以网购一块，25 元左右的价格；&lt;/li&gt;
&lt;li&gt;（未来会研究如何直接使用系统自带的蓝牙）；&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;教程方式&#34;&gt;教程方式&lt;/h2&gt;
&lt;p&gt;本教程以 MacOS 为例。如果你使用 Linux 或 Windows，部分操作可能需要稍作调整。
教程的每个步骤会说明：&lt;strong&gt;要做什么&lt;/strong&gt;、&lt;strong&gt;怎么做&lt;/strong&gt;、以及&lt;strong&gt;验证结果&lt;/strong&gt;。请确保完成验证后再进行下一步。遇到问题时，可以参考自查攻略（部分步骤有）或联系我。&lt;/p&gt;
&lt;h1 id=&#34;如何实现&#34;&gt;如何实现&lt;/h1&gt;
&lt;p&gt;对于实现不感兴趣的，可以跳转到&lt;a href=&#34;https://lexcao.io/zh/posts/integrate-bluetooth-lamp-into-homekit-step-by-step/#Step1&#34;&gt;下一部分&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;组件列表&#34;&gt;组件列表&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.home-assistant.io/&#34;&gt;Home Assistant (HA)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://hacs.xyz/&#34;&gt;Home Assistant Community Store (HACS)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&#34;https://github.com/NicoIIT/ha-ble-adv/&#34;&gt;ha-ble-adv&lt;/a&gt;&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;缩写是 Home Assistant Bluetooth Low Energy Advertise&lt;/li&gt;
&lt;li&gt;翻译为 Home Assistant 蓝牙低功耗广播&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://esphome.io/&#34;&gt;ESP Home&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/NicoIIT/esphome-ble_adv_proxy&#34;&gt;esphome-ble-adv-proxy&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ESP32&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;组件交互&#34;&gt;组件交互&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;核心是使用 &lt;code&gt;ha-ble-adv&lt;/code&gt; 通过蓝牙与设备交互，控制开关和亮度&lt;/li&gt;
&lt;li&gt;通过 Home Assistant 提供的 HomeKit Bridge 连接到 iPhone 家庭应用，来实现控制&lt;/li&gt;
&lt;li&gt;要让 Home Assistant 成功使用上 &lt;code&gt;ha-ble-adv&lt;/code&gt; 需要具备以下条件：
&lt;ol&gt;
&lt;li&gt;通过 &lt;code&gt;HACS&lt;/code&gt; 安装组件 &lt;code&gt;ha-ble-adv&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;通过 ESP Home 在 ESP32 上面安装 &lt;code&gt;esphome-ble-adv-proxy&lt;/code&gt; 以供 &lt;code&gt;ha-ble-adv&lt;/code&gt; 发送和接收蓝牙信息&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;以下是整体架构图&lt;/p&gt;</description>
    </item>
    <item>
      <title>折腾：蓝牙吸顶灯接入 HomeKit</title>
      <link>https://lexcao.io/zh/posts/integrate-bluetooth-lamp-into-homekit/</link>
      <pubDate>Sat, 26 Apr 2025 00:00:00 +0000</pubDate>
      <guid>https://lexcao.io/zh/posts/integrate-bluetooth-lamp-into-homekit/</guid>
      <description>&lt;h2 id=&#34;一缘起一个基础版吸顶灯的智能化挑战&#34;&gt;一、缘起：一个&amp;quot;基础版&amp;quot;吸顶灯的智能化挑战&lt;/h2&gt;
&lt;p&gt;最近给家里客厅换了个新吸顶灯。这灯不仅能用遥控器，还能用手机 App 控制，看起来挺智能的。然而，美中不足的是，它竟然不支持接入米家或 HomeKit。
搜索后才发现，原来同品牌更贵版本是支持米家控制的，而我买的这个基础版不支持，大概价差 100 元左右。&lt;/p&gt;
&lt;p&gt;作为一个喜欢折腾的程序员，我开始从第一性原理思考：既然它能通过手机 App 控制，通过打开 App 时申请蓝牙权限可以推断是通过蓝牙进行通信。既然是蓝牙控制，那理论上就能通过别的蓝牙程序来控制它，进而接入智能家居生态。对，没错，肯定行！&lt;/p&gt;
&lt;p&gt;【注意】想要着手操作一番的朋友，可以参考我的另一篇博文：&lt;a href=&#34;https://lexcao.io/zh/posts/integrate-bluetooth-lamp-into-homekit-step-by-step/&#34;&gt;教程：让你的不智能蓝牙灯接入 HomeKit 智能家居&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;问题现状演示&#34;&gt;问题现状演示&lt;/h3&gt;
&lt;p&gt;

&lt;video width=&#34;100%&#34; controls disablepictureinpicture controlslist=&#34;nodownload&#34; src=&#34;https://lexcao.io/videos/integrate-bluetooth-lamp-into-homekit/remoter_control_lamp.webm&#34; type=&#34;video/webm&#34;&gt;
&lt;/video&gt;



&lt;video width=&#34;100%&#34; controls disablepictureinpicture controlslist=&#34;nodownload&#34; src=&#34;https://lexcao.io/videos/integrate-bluetooth-lamp-into-homekit/app_control_lamp.webm&#34; type=&#34;video/webm&#34;&gt;
&lt;/video&gt;
&lt;/p&gt;
&lt;p&gt;想要直接看到接入后的效果，可以 &lt;a href=&#34;https://lexcao.io/zh/posts/integrate-bluetooth-lamp-into-homekit/#final&#34;&gt;点击这里跳转&lt;/a&gt;。&lt;/p&gt;
&lt;h2 id=&#34;二探索home-assistant-与蓝牙控制方案&#34;&gt;二、探索：Home Assistant 与蓝牙控制方案&lt;/h2&gt;
&lt;p&gt;于是乎，我兴冲冲地开始了我的折腾之旅，进行了大量的搜索尝试。既然直接接入米家此路不通，那曲线救国呢？（注：这里指通过其他方式间接实现目标）我灵机一动，开始搜索如何将米家设备接入 HomeKit。
这次搜索让我打开了一个新世界的大门 —— &lt;code&gt;Home Assistant&lt;/code&gt; (HA)！&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.home-assistant.io/&#34;&gt;&lt;code&gt;Home Assistant&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;Open source home automation that puts local control and privacy first. Powered by a worldwide community of tinkerers and DIY enthusiasts.
以本地控制和隐私为先的开源家庭自动化。由全球工匠和 DIY 爱好者社区提供支持。&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;顺藤摸瓜，我又发现 &lt;code&gt;Home Assistant&lt;/code&gt; 竟然有个叫 &lt;code&gt;HomeKit Bridge&lt;/code&gt; 的组件，能把各种非 HomeKit 设备桥接到 HomeKit。看到这里，我仿佛看到了曙光！&lt;/p&gt;
&lt;p&gt;继续在 &lt;code&gt;Home Assistant&lt;/code&gt; 的社区里搜索，感谢万能的网友，挖到了一个宝藏项目：&lt;code&gt;ha-ble-adv&lt;/code&gt;！看名字就知道，这玩意儿跟蓝牙有关，简直是为我量身定做的！&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
