[{"content":"å¼•è¨€ å¦‚æœä½ æœ‰ä¸€ä¸ªè“ç‰™ç¯ï¼Œå¹¶ä¸”å®ƒèƒ½å¤Ÿè¢«ä»¥ä¸‹å‡ ä¸ªæ‰‹æœºåº”ç”¨æ§åˆ¶ï¼š\nLampSmart Pro Lamp Smart Pro - Soft Lighting / Smart Lighting FanLamp Pro Zhi Jia Zhi Guang ApplianceSmart Vmax smart Zhi Mei Deng Kong é‚£ä¹ˆæ­å–œä½ ï¼Œä½ å¯ä»¥è·Ÿéšæœ¬ç¯‡æ•™ç¨‹ï¼Œä¸€æ­¥ä¸€æ­¥å°†å®ƒæ¥å…¥ HomeKit æ™ºèƒ½å®¶å±…ã€‚ æ¥å®ç°é€šè¿‡ iPhone å®¶åº­åº”ç”¨æ§åˆ¶ä»¥åŠ Siri è¯­éŸ³æ§åˆ¶ã€‚ å¯¹äºå®ç°åçš„æ•ˆæœï¼Œå¯ä»¥çœ‹æˆ‘å¦ä¸€ç¯‡åšæ–‡ï¼šæŠ˜è…¾ï¼šHomeKit æ¥å…¥è“ç‰™å¸é¡¶ç¯\néå¸¸æ„Ÿè°¢ https://github.com/NicoIIT/ha-ble-adv/ï¼Œæœ¬ç¯‡æ•™ç¨‹å®é™…æ˜¯ä»é›¶æ¥å…¥è¯¥é¡¹ç›®ã€‚\nå¼€å§‹ä¹‹å‰ åœ¨å¼€å§‹ä¹‹å‰ï¼Œéœ€è¦ä¸€ç‚¹ç‚¹åŸºç¡€çš„è®¡ç®—æœºçŸ¥è¯†ï¼Œç¡®ä¿æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š\nç†Ÿæ‚‰ Home Assistant æ¦‚å¿µå’Œä¸€äº›åŸºæœ¬æ“ä½œï¼Œå¯ä»¥é˜…è¯»å®˜æ–¹æ–‡æ¡£å¿«é€Ÿç†Ÿæ‚‰ï¼› èƒ½å¤Ÿä½¿ç”¨ Terminal å‘½ä»¤è¡Œå·¥å…·ï¼› å·²å®‰è£… Docker å¹¶ä¸”å¯ç”¨ï¼› æœ‰ä¸€ä¸ª GitHub å¸å·ï¼› å…³é”®ï¼šä¸€å— ESP32 å¼€å‘æ¿ï¼› ä¸»è¦ç”¨äºè“ç‰™é€šä¿¡ï¼Œå¦‚æœæ²¡æœ‰çš„è¯ï¼Œå¯ä»¥ç½‘è´­ä¸€å—ï¼Œ25 å…ƒå·¦å³çš„ä»·æ ¼ï¼› ï¼ˆæœªæ¥ä¼šç ”ç©¶å¦‚ä½•ç›´æ¥ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„è“ç‰™ï¼‰ï¼› æ•™ç¨‹æ–¹å¼ æœ¬æ•™ç¨‹ä»¥ MacOS ä¸ºä¾‹ã€‚å¦‚æœä½ ä½¿ç”¨ Linux æˆ– Windowsï¼Œéƒ¨åˆ†æ“ä½œå¯èƒ½éœ€è¦ç¨ä½œè°ƒæ•´ã€‚ æ•™ç¨‹çš„æ¯ä¸ªæ­¥éª¤ä¼šè¯´æ˜ï¼šè¦åšä»€ä¹ˆã€æ€ä¹ˆåšã€ä»¥åŠéªŒè¯ç»“æœã€‚è¯·ç¡®ä¿å®ŒæˆéªŒè¯åå†è¿›è¡Œä¸‹ä¸€æ­¥ã€‚é‡åˆ°é—®é¢˜æ—¶ï¼Œå¯ä»¥å‚è€ƒè‡ªæŸ¥æ”»ç•¥ï¼ˆéƒ¨åˆ†æ­¥éª¤æœ‰ï¼‰æˆ–è”ç³»æˆ‘ã€‚\nå¦‚ä½•å®ç° å¯¹äºå®ç°ä¸æ„Ÿå…´è¶£çš„ï¼Œå¯ä»¥è·³è½¬åˆ°ä¸‹ä¸€éƒ¨åˆ†\nç»„ä»¶åˆ—è¡¨ Home Assistant (HA) Home Assistant Community Store (HACS) ha-ble-adv ç¼©å†™æ˜¯ Home Assistant Bluetooth Low Energy Advertise ç¿»è¯‘ä¸º Home Assistant è“ç‰™ä½åŠŸè€—å¹¿æ’­ ESP Home esphome-ble-adv-proxy ESP32 ç»„ä»¶äº¤äº’ æ ¸å¿ƒæ˜¯ä½¿ç”¨ ha-ble-adv é€šè¿‡è“ç‰™ä¸è®¾å¤‡äº¤äº’ï¼Œæ§åˆ¶å¼€å…³å’Œäº®åº¦ é€šè¿‡ Home Assistant æä¾›çš„ HomeKit Bridge è¿æ¥åˆ° iPhone å®¶åº­åº”ç”¨ï¼Œæ¥å®ç°æ§åˆ¶ è¦è®© Home Assistant æˆåŠŸä½¿ç”¨ä¸Š ha-ble-adv éœ€è¦å…·å¤‡ä»¥ä¸‹æ¡ä»¶ï¼š é€šè¿‡ HACS å®‰è£…ç»„ä»¶ ha-ble-adv é€šè¿‡ ESP Home åœ¨ ESP32 ä¸Šé¢å®‰è£… esphome-ble-adv-proxy ä»¥ä¾› ha-ble-adv å‘é€å’Œæ¥æ”¶è“ç‰™ä¿¡æ¯ ä»¥ä¸‹æ˜¯æ•´ä½“æ¶æ„å›¾\nè¯ä¸å¤šè¯´ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ã€‚åŸºäºä¸Šé¢çš„å®ç°ï¼Œä¸ºäº†æ•™ç¨‹çš„è¿è´¯æ€§ï¼Œè®©æˆ‘ä»¬ä» ESP32 å¼€å§‹ã€‚\né¦–å…ˆåˆ›å»ºä¸€ä¸ªç›®å½•å­˜æ”¾æœ¬æ¬¡ç”¨åˆ°çš„æ‰€æœ‰ç»„ä»¶ã€‚\n$ mkdir Home-Assistant $ cd Home-Assistant ç¬¬ä¸€éƒ¨åˆ†ï¼š ESP Home å®‰è£… ESP Home è¦åšä»€ä¹ˆ ä½¿ç”¨ Docker å®‰è£… ESP Homeã€‚ å½“ç„¶ï¼Œå¯ä»¥è®¿é—® å®˜æ–¹æ–‡æ¡£ è·å–æ›´å¤šå®‰è£…æ–¹å¼ã€‚\næ€ä¹ˆåš ä½¿ç”¨ä»¥ä¸‹ Docker compose æ–‡ä»¶ # Home-Assistant/docker-compose.yml services: esphome: container_name: esphome image: ghcr.io/esphome/esphome volumes: - ./esphome/config:/config - /etc/localtime:/etc/localtime:ro restart: always privileged: true network_mode: host å¯åŠ¨è¿è¡Œ $ docker compose up -d ç»“æœéªŒè¯ åœ¨æµè§ˆå™¨è®¿é—® http://localhost:6052 èƒ½å¤Ÿè¿›å…¥ ESP Home åå°ã€‚\né‡åˆ°é—®é¢˜è¯·å‚è€ƒ å®˜æ–¹æ–‡æ¡£ã€‚\nè¿æ¥ ESP32 è¦åšä»€ä¹ˆ æ·»åŠ  ESP32 åˆ° ESP Home è¿›è¡Œç®¡ç†ï¼Œç”¨äºåç»­å®‰è£…ç»„ä»¶ã€‚\næ€ä¹ˆåš å°†ä½ çš„ ESP32 è®¾å¤‡é€šè¿‡æœ‰çº¿è¿æ¥åˆ° MacOS åœ¨ ESP Home åå°æ·»åŠ è®¾å¤‡ï¼Œè®¾ç½®ä¸€ä¸ªåå­—ï¼Œæ¯”å¦‚ esp32-ble-adv-proxy é€‰æ‹© ESP32 è¿æ¥çš„ä¸²å£ è¾“å…¥ Wi-Fi ä¿¡æ¯ï¼ˆSSID \u0026amp; Passwordï¼‰ é‡è¦ï¼šç¡®ä¿è¿æ¥ 2.4G Wi-Fi å¼€å§‹å®‰è£…ï¼Œé€‰æ‹© Plug into this computer ç­‰å¾… 2 åˆ†é’Ÿä»¥ä¸Šï¼Œå®‰è£…å®Œæ¯• ç»“æœéªŒè¯ å®‰è£…å®Œæˆåä¼šæœ‰æç¤º å…³é—­æç¤ºåå¯ä»¥åœ¨åå°çœ‹åˆ°åˆšæ‰æ·»åŠ çš„è®¾å¤‡æ˜¯åœ¨çº¿çŠ¶æ€ï¼ˆONLINEï¼‰ ç‚¹å‡» LOGS å¯ä»¥æŸ¥çœ‹åˆ°ç›¸å…³æ—¥å¿— é‡åˆ°é—®é¢˜ æ— æ³•å®‰è£…ï¼Ÿç­‰å¾…å¤§äº 2 åˆ†é’Ÿä»¥ä¸Šï¼Œæ£€æŸ¥å®‰è£…è¿‡ç¨‹ä¸­é¡µé¢ä¸Šé¢æ–‡æ¡ˆæ˜¯å¦æœ‰å˜åŒ– å®‰è£…åè®¾å¤‡ä¸åœ¨çº¿ï¼Ÿ æ£€æŸ¥ Wi-Fi ä¿¡æ¯æ˜¯å¦æ­£ç¡® æ£€æŸ¥æ˜¯å¦è¿æ¥çš„æ˜¯ 2.4G Wi-Fi å®‰è£… esphome-ble-adv-proxy è¦åšä»€ä¹ˆ åœ¨ ESP Home åå°ä¸ºåˆšè¿æ¥çš„ ESP32 è®¾å¤‡å®‰è£…ç¤¾åŒºç»„ä»¶ esphome-ble_adv_proxyã€‚\nå½“ç„¶ï¼Œå¯ä»¥è®¿é—® esphome-ble_adv_proxy è·å–è¯¦ç»†å®‰è£…è¯´æ˜ã€‚\næ€ä¹ˆåš åœ¨ ESP Home åå°å¯¹è®¾å¤‡ esp32-ble-adv-proxy ç‚¹å‡» Edit ç¼–è¾‘å¦‚ä¸‹ä¿¡æ¯ (...) esp32: board: esp32dev # Or your specific board model framework: type: esp-idf # Recommended for BLE stability # Enable ESP32 Bluetooth Low Energy Tracker esp32_ble_tracker: scan_parameters: # Active scanning can discover more devices but uses more power active: true # Enable standard Home Assistant Bluetooth Proxy bluetooth_proxy: active: true # Define the external component source for ble_adv_proxy external_components: - source: github://NicoIIT/esphome-ble_adv_proxy # Enable the ble_adv_proxy component ble_adv_proxy: # No specific configuration needed here unless specified by component docs (...) ç‚¹å‡»ä¿å­˜ï¼ˆSaveï¼‰ï¼Œç‚¹å‡»å®‰è£…ï¼ˆInstallï¼‰ï¼Œé€‰æ‹©æ— çº¿å®‰è£…ï¼ˆWirelessï¼‰ ç­‰å¾… 2 åˆ†é’Ÿä»¥ä¸Šï¼Œå®‰è£…å®Œæ¯• ç»“æœéªŒè¯ é€‰æ‹©æ— çº¿å®‰è£…ä»¥åï¼Œå¯ä»¥å®æ—¶æŸ¥çœ‹å®‰è£…è¿›åº¦ å®‰è£…å®Œæˆåï¼Œç‚¹å‡»æ–°å‡ºç°çš„ VISIT æŒ‰é’®ï¼Œä¼šè·³è½¬åˆ°è°ƒè¯•é¡µé¢ï¼Œè§‚å¯Ÿé¡µé¢æ˜¯å¦æœ‰æ•°æ®äº§ç”Ÿ æ³¨æ„ï¼šå½“å‰é¡µé¢åœ°å€ http://esp32-ble-adv-proxy.local é‡åˆ°é—®é¢˜ï¼Ÿå¯ä»¥æ ¹æ®å®‰è£…æ—¥å¿—æç¤ºå¯»æ‰¾ç›¸å…³è§£å†³æ–¹æ¡ˆã€‚\nè‡³æ­¤ï¼ŒESP32 éƒ¨åˆ†å‡†å¤‡å®Œæˆï¼Œè®©æˆ‘ä»¬å›åˆ°ä¸»çº¿ Home Assistantã€‚\nç¬¬äºŒéƒ¨åˆ†ï¼š Home Assistant å®‰è£… Home Assistant è¦åšä»€ä¹ˆ é€šè¿‡ python ç›´æ¥åœ¨ MacOS ä¸»æœºä¸Šé¢å®‰è£… Home Assistant Coreã€‚ æ³¨æ„ï¼šæœ¬æ•™ç¨‹å¯¹äºåœ¨ Docker å†…è¿è¡Œçš„ Home Assistant æ— æ³•æˆåŠŸï¼Œè¯¦è§ä¸‹é¢ Q\u0026amp;A\nå½“ç„¶ï¼Œå¯ä»¥è®¿é—® å®˜æ–¹æ–‡æ¡£ è·å–æ›´å¤šå®‰è£…è¯´æ˜ã€‚\næ€ä¹ˆåš åˆå§‹åŒ– python ç¯å¢ƒ $ python3 -m venv . $ source ./bin/activate å®‰è£… homeassistant Core $ pip3 install homeassistant==2025.4.4 åˆ›å»ºä¸€ä¸ªé…ç½®ç›®å½• $ mkdir config å¯åŠ¨ hass --config config ç»“æœéªŒè¯ åœ¨æµè§ˆå™¨è®¿é—® http://localhost:8123 èƒ½å¤Ÿè¿›å…¥ Home Assistant åå° åˆ›å»ºå¸å·ï¼Œå®Œæˆé¦–æ¬¡ç™»å½•æµç¨‹ é‡åˆ°é—®é¢˜è¯·å‚è€ƒ å®˜æ–¹æ–‡æ¡£ã€‚\næ¥å…¥ ESP32 è¦åšä»€ä¹ˆ åœ¨ Home Assistant åå°æ·»åŠ ä¸Šé¢ ESP32 é›†æˆã€‚\næ€ä¹ˆåš å¦‚æœä¹‹å‰çš„æ­¥éª¤ä¸€åˆ‡é¡ºåˆ©çš„è¯ï¼Œåœ¨ Home Assistant å®Œæˆå®‰è£…åï¼Œä¼šè‡ªå‘ç° ESP32 è®¾å¤‡ï¼Œç‚¹å‡»æ·»åŠ å³å¯ã€‚ å¦‚æœæ²¡æœ‰è‡ªå‘ç°ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥æ‰‹åŠ¨æ·»åŠ ï¼š\nåœ¨ Settings \u0026gt; Devices \u0026amp; Services ç‚¹å‡» ADD INTEGRATION æœç´¢ ESP Home è¿›è¡Œæ·»åŠ  è¾“å…¥ä¸Šé¢çš„åœ°å€ esp32-ble-adv-proxy.local ç‚¹å‡»æ·»åŠ  å›åˆ° ESP Home å¤åˆ¶ esp32-ble-adv-proxy API Key å®Œæˆé›†æˆ ç»“æœéªŒè¯ åœ¨ Home Assistant Devices \u0026amp; Services é¡µé¢æ˜¾ç¤ºæ·»åŠ æˆåŠŸçš„ ESP32 è®¾å¤‡å’Œè“ç‰™ é‡åˆ°é—®é¢˜ æ‰‹åŠ¨æ·»åŠ å¤±è´¥ï¼Ÿ æ£€æŸ¥ http://esp32-ble-adv-proxy.local æ˜¯å¦å¯ä»¥è®¿é—® æ£€æŸ¥ ESP Home æ˜¯å¦è¿è¡Œ æ‰¾ä¸åˆ° API Key åœ¨ ESP Home è®¾å¤‡å¡ç‰‡ï¼Œç‚¹å‡» Â·Â·Â· æŒ‰é’®ï¼Œç‚¹å‡» Show API Key æ›´å¤šå¸®åŠ©å¯ä»¥æŸ¥çœ‹ å®˜æ–¹æ–‡æ¡£ å®‰è£… Home Assistant Community Store è¦åšä»€ä¹ˆ åœ¨ Home Assistant åå°å®‰è£… HACS é›†æˆ å½“ç„¶ï¼Œå¯ä»¥è®¿é—® å®˜æ–¹æ–‡æ¡£ è·å–æ›´å¤šå®‰è£…è¯´æ˜ã€‚\næ€ä¹ˆåš ç¡®ä¿ wget æ˜¯å¯ç”¨çš„ åœ¨å‘½ä»¤è¡Œæ‰§è¡Œå®‰è£…å‘½ä»¤ $ wget -O - https://get.hacs.xyz | bash - é‡å¯ Home Assistant åœ¨ Settings \u0026gt; Devices \u0026amp; Services ç‚¹å‡» ADD INTEGRATION æœç´¢ HACS è¿›è¡Œæ·»åŠ  æ ¹æ®æŒ‡å¼•å®Œæˆ GitHub å¸å·æˆæƒ å®‰è£…å®Œæˆ ç»“æœéªŒè¯ åœ¨ Home Assistant åå°å¯¼èˆªèœå•å¯ä»¥çœ‹åˆ° HACS é‡åˆ°é—®é¢˜ï¼Ÿè¯·å‚è€ƒ å®˜æ–¹æ–‡æ¡£ å®Œæˆé…ç½®\nå®‰è£… ha-ble-adv è¦åšä»€ä¹ˆ é€šè¿‡ HACS å®‰è£…è‡ªå®šä¹‰ä»“åº“ ha-ble-adv\næ€ä¹ˆåš è¿›å…¥ Home Assistantï¼Œè¿›å…¥ HACS ç‚¹å‡» Â·Â·Â· å³ä¸Šè§’ \u0026gt; Custom respositories æ ¹æ®æŒ‡å¼•å®‰è£… https://github.com/NicoIIT/ha-ble-adv ç»“æœéªŒè¯ å®‰è£…æˆåŠŸ åœ¨ Settings \u0026gt; Devices \u0026amp; Services ç‚¹å‡» ADD INTEGRATION èƒ½å¤Ÿæœç´¢åˆ° BLE ADV é‡åˆ°é—®é¢˜ï¼Ÿè¯·å‚è€ƒ å®˜æ–¹æ–‡æ¡£ å®‰è£…è‡ªå®šä¹‰ä»“åº“æŒ‡å¼•\næ·»åŠ  è“ç‰™ç¯ è®¾å¤‡ è¦åšä»€ä¹ˆ æ·»åŠ  ha-ble-adv è“ç‰™ç¯è®¾å¤‡é›†æˆ\næ€ä¹ˆåš åœ¨ Settings \u0026gt; Devices \u0026amp; Services ç‚¹å‡» ADD INTEGRATION æœç´¢ BLE ADV è¿›è¡Œæ·»åŠ  æ ¹æ®æŒ‡å¼•è¿›è¡Œæ·»åŠ ï¼Œæ¨èé€‰æ‹© Duplicate Paired Phone App Config ç»“æœéªŒè¯ æ·»åŠ æˆåŠŸ åœ¨ Overview å¯ä»¥é€šè¿‡ Home Assistant ç›´æ¥æ§åˆ¶è“ç‰™ç¯ é‡åˆ°é—®é¢˜ æ— æ³•æ‰“å¼€å®‰è£…æŒ‡å¼•ï¼Ÿ éœ€è¦æ‰‹åŠ¨åŠ è½½ ble-adv ç»„ä»¶ æ‰“å¼€ config/configurations.yml è¿›è¡Œç¼–è¾‘ï¼Œåœ¨æœ€åä¸€è¡Œæ·»åŠ  # config/configurations.yml ... ble_adv: é‡å¯ Home Assistantï¼Œ é‡æ–°æ·»åŠ  æ— æ³•æ¥æ”¶åˆ°è“ç‰™ä¿¡æ¯ï¼Ÿ è¯·ç¡®ä¿å‰é¢ ESP32 åœ¨ EPS Home æ˜¯åœ¨çº¿çŠ¶æ€ å¯ä»¥é€šè¿‡è®¿é—® http://esp32-ble-adv-proxy.local æ¥æ£€æŸ¥ å…¶ä»–é—®é¢˜ï¼Ÿå¯ä»¥å‚è€ƒ FAQ æ¥æ’æŸ¥ æ¥å…¥ HomeKit Bridge æˆªæ­¢ä¸Šä¸€æ­¥ï¼Œæˆ‘ä»¬å®ç°äº†é€šè¿‡ Home Assistant æ§åˆ¶è“ç‰™æ¥æ§åˆ¶è“ç‰™ç¯ã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¿›å…¥æœ€åä¸€æ­¥ï¼Œæ¥å…¥ HomeKit Bridge æ¥æ¥å…¥å®¶åº­åº”ç”¨ã€‚\nè¦åšä»€ä¹ˆ é€šè¿‡ HomeKit Bridge æ¥å…¥å®¶åº­åº”ç”¨ã€‚ å½“ç„¶ï¼Œå¯ä»¥è®¿é—® å®˜æ–¹æ–‡æ¡£ è·å–æ›´å¤šå®‰è£…è¯´æ˜ã€‚\næ€ä¹ˆåš åœ¨ Settings \u0026gt; Devices \u0026amp; Services ç‚¹å‡» ADD INTEGRATION æœç´¢ Apple ç‚¹å‡»åæ·»åŠ  HomeKit Bridge è¿™é‡Œæ— éœ€é¢å¤–é…ç½®ï¼Œç›´æ¥ç‚¹å‡»ä¸‹ä¸€æ­¥å³å¯ å®Œæˆæ·»åŠ åï¼Œæ‰“å¼€å·¦ä¸‹è§’ Notification iPhone æ‰“å¼€å®¶åº­åº”ç”¨ï¼Œæ‰«æäºŒç»´ç æ·»åŠ è®¾å¤‡ æ‰«ææˆåŠŸåä¼šå¼¹çª— æœªè®¤è¯é…ä»¶ï¼Œç‚¹å‡» ä»è¦æ·»åŠ  å®Œæˆé…ç½® ç»“æœéªŒè¯ è“ç‰™ç¯æ§åˆ¶å‡ºç°åœ¨ iPhone å®¶åº­åº”ç”¨ å¯ä»¥é€šè¿‡ å®¶åº­åº”ç”¨ / Siri æ§åˆ¶ ç¯ å¼€å…³å’Œç¯å…‰ é‡åˆ°é—®é¢˜ åœ¨æœ€åä¸€æ­¥é‡åˆ°çš„é—®é¢˜ä¼šå¤šä¸€äº›ï¼Œä»¥ä¸‹æ˜¯æˆ‘é‡åˆ°çš„é—®é¢˜ï¼Œæ’æŸ¥æ€è·¯å’Œè§£å†³æ–¹æ¡ˆã€‚\næ‰«ç åæ— æ³•æ·»åŠ ï¼Œæç¤º æ‰¾ä¸åˆ°è®¾å¤‡ï¼Ÿ\nä¸»è¦æ˜¯ç½‘ç»œé—®é¢˜å¼•èµ·ï¼Œè¯·ä¾æ¬¡æ£€æŸ¥ï¼š\næ’æŸ¥ä¸€ï¼šæ’æŸ¥æœ¬æœº mDNS æ˜¯å¦æ­£å¸¸å·¥ä½œï¼š\nã€æ“ä½œæ­¥éª¤ã€‘\nåœ¨å‘½ä»¤è¡Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ $ dns-sd -B _hap._tcp local ã€ç»“æœéªŒè¯ã€‘\nå¦‚æœè¿”å›ä»¥ä¸‹ä¿¡æ¯ï¼Œè¯´æ˜æœ¬æœº mDNS æ²¡é—®é¢˜ï¼Œæ³¨æ„å³è¾¹ Instance Name å«æœ‰ HASS Bridge\nTimestamp A/R Flags if Domain Service Type Instance Name 0:29:39.244 Add 3 10 local. _hap._tcp. HASS Bridge xxxxxx ã€è§£å†³æ–¹å¼ä¸€ã€‘\næ‰“å¼€ Debug æ—¥å¿—ï¼Œæ‰“å¼€ config/configurations.yml è¿›è¡Œç¼–è¾‘ï¼Œåœ¨æœ€åä¸€è¡Œæ·»åŠ  logger: default: warning logs: homeassistant.components.homekit: debug pyhap: debug é‡å¯ Home Assistant é‡æ–°æ‰«ç æ·»åŠ è®¾å¤‡åˆ°å®¶åº­åº”ç”¨ è§‚å¯Ÿæ˜¯å¦æœ‰å¼‚å¸¸æ—¥å¿— æ ¹æ®æ—¥å¿—æŠ¥é”™æœç´¢ç›¸å…³è§£å†³æ–¹æ¡ˆ ã€è§£å†³æ–¹å¼äºŒã€‘\nè‹¥ä½¿ç”¨ Docker å¯åŠ¨ Home Assistantï¼Œæ”¹ä¸ºç›´æ¥å®‰è£… Home Assistant åˆ°æœ¬æœºã€‚ æ’æŸ¥äºŒï¼šæ’æŸ¥æ‰‹æœº mDNS æ˜¯å¦æ­£å¸¸å·¥ä½œï¼š\nã€æ“ä½œæ­¥éª¤ã€‘\nåœ¨ Apple Store æœç´¢ Discovery - DNS-SD Browser å®‰è£…åæ‰“å¼€ï¼Œæ£€æŸ¥ local åŸŸ ã€ç»“æœéªŒè¯ã€‘\næ£€æŸ¥æ˜¯å¦å­˜åœ¨ _hap._tcp ç‚¹å‡»æŸ¥çœ‹ï¼Œæ˜¯å¦å­˜åœ¨ HASS Bridge xxxxxx å¦‚æœå­˜åœ¨ï¼Œè¯´æ˜æ‰‹æœº mDNS é€šä¿¡åœ¨åŒä¸€ä¸ªç½‘ç»œä¸‹æ²¡é—®é¢˜ ã€è§£å†³æ–¹å¼ä¸€ã€‘\næ£€æŸ¥æ‰‹æœºå’Œè¿è¡Œ Home Assistant çš„ MacOS æ˜¯å¦åœ¨åŒä¸€ä¸ªç½‘ç»œä¸‹ ã€è§£å†³æ–¹å¼äºŒã€‘\næ£€æŸ¥ MacOS é˜²ç«å¢™é…ç½®ï¼Œæ˜¯å¦æœ‰ç¦æ­¢ç«¯å£ï¼š HomeKit Bridge 21063 mDNS 5353 ã€è§£å†³æ–¹å¼ä¸‰ã€‘\næ£€æŸ¥è·¯ç”±å™¨é…ç½®ï¼Œæ˜¯å¦ç¦ç”¨ mDNS å…¶ä»–é—®é¢˜ï¼Ÿ\nä»¥ä¸‹æ˜¯æˆ‘åœ¨æ’æŸ¥é—®é¢˜ä¸­æ‰¾åˆ°çš„ä¸€äº›æœ‰ç”¨çš„æ–‡ç« ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰å¯å‘ï¼š\nOffcial: HomeKit Troubleshooting Community: HomeKit Bridge on Home Assistant in Docker Community: Use HomeKit Component inside Docker Reddit: Troubleshooting HomeKit What Tools to Use and How GitHub issue: Homekit not working with docker GitHub gist: Home Assistant Docker on MacOS Enjoyï¼ å¤ªå¥½äº†ï¼Œå¤§åŠŸå‘Šæˆï¼å¼€å§‹äº«ç”¨å®¶åº­åº”ç”¨æ§åˆ¶è“ç‰™ç¯å§ã€‚\næ€»ç»“ æœ¬æ•™ç¨‹è¯¦ç»†ä»‹ç»äº†å¦‚ä½•å°†ç‰¹å®šçš„è“ç‰™ç¯ï¼ˆå¦‚ LampSmart Pro æ§åˆ¶çš„ç¯ï¼‰é€šè¿‡ä¸€ç³»åˆ—å¼€æºå·¥å…·æ¥å…¥ Apple HomeKit æ™ºèƒ½å®¶å±…ç³»ç»Ÿã€‚æˆ‘ä»¬ä»å‡†å¤‡ ESP32 å¼€å‘æ¿å¼€å§‹ï¼Œåˆ©ç”¨ ESPHome å®‰è£…äº† esphome-ble-adv-proxy ä»¥å®ç°è“ç‰™é€šä¿¡ä»£ç†ã€‚æ¥ç€ï¼Œæˆ‘ä»¬åœ¨ MacOS ä¸Šå®‰è£…äº† Home Assistant Coreï¼Œå¹¶é›†æˆäº† ESP32 è®¾å¤‡ã€‚é€šè¿‡ HACSï¼Œæˆ‘ä»¬å®‰è£…äº†å…³é”®çš„ ha-ble-adv è‡ªå®šä¹‰ç»„ä»¶ï¼Œç”¨äºå‘ç°å’Œæ§åˆ¶è“ç‰™ç¯ã€‚æœ€åï¼Œåˆ©ç”¨ Home Assistant å†…ç½®çš„ HomeKit Bridge åŠŸèƒ½ï¼ŒæˆåŠŸå°†è“ç‰™ç¯è®¾å¤‡æ¡¥æ¥è‡³ iPhone çš„å®¶åº­åº”ç”¨ï¼Œå®ç°äº†é€šè¿‡å®¶åº­ App å’Œ Siri è¿›è¡Œæ§åˆ¶ã€‚æ•™ç¨‹ä¸­ä¹Ÿæ¶µç›–äº†å„ä¸ªæ­¥éª¤å¯èƒ½é‡åˆ°çš„é—®é¢˜åŠå…¶æ’æŸ¥æ–¹æ³•ï¼Œç‰¹åˆ«æ˜¯ HomeKit è¿æ¥æ—¶å¸¸è§çš„ mDNS ç½‘ç»œé—®é¢˜ã€‚éµå¾ªæœ¬æ•™ç¨‹ï¼Œä½ å¯ä»¥å°†åŸæœ¬â€œä¸æ™ºèƒ½â€çš„è“ç‰™è®¾å¤‡èå…¥ç°ä»£æ™ºèƒ½å®¶å±…ç”Ÿæ€ã€‚\nç­”ç–‘ Q1 æ˜¯å¦å¯ä»¥ä½¿ç”¨ Docker è¿è¡Œ Home Assistant å¯ä»¥ï¼Œä½†æˆ‘æ²¡æœ‰æˆåŠŸï¼Œå¯ä»¥å‚è€ƒ\nGitHub gist: Home Assistant Docker on MacOSã€‚ Community: HomeKit Bridge on Home Assistant in Docker ä½¿ç”¨ Docker ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ\næˆ‘é‡åˆ°çš„é—®é¢˜æ˜¯ HomeKit æ­»æ´»è¿ä¸ä¸Šï¼Œæ’æŸ¥åå‘ç°æ˜¯ä¸»æœºçš„ mDNS ç½‘ç»œæ— æ³•æ¢æŸ¥åˆ° Docker å†…éƒ¨ HomeKit Bridge ç½‘ç»œã€‚å°±ç®—ä½¿ç”¨ network_mode=host ä¹Ÿä¸è¡Œï¼Œæˆ‘å°±æ”¾å¼ƒæŠ˜è…¾ Dockerï¼Œæ”¹ä¸ºå®‰è£…åˆ°æœ¬æœºã€‚ Q2 æ˜¯å¦å¯ä»¥ä¸ç”¨ ESP32ï¼Œ ä½¿ç”¨ MacOS è‡ªå¸¦çš„è“ç‰™åŠŸèƒ½ ç›®å‰ä¸è¡Œï¼Œæœ‰ 2 ä¸ªåŸå› ï¼š\nä½¿ç”¨ Docker è¿è¡Œï¼Œæ— æ³•åœ¨ Docker å†…ä½¿ç”¨ä¸»æœºçš„è“ç‰™åŠŸèƒ½ï¼Œæœ€ç®€å•çš„æ–¹å¼æ˜¯ä½¿ç”¨ ESP32 ä»£ç†ä¸€ä¸‹ ç›®å‰ MacOS è‡ªå¸¦çš„è“ç‰™åŠŸèƒ½æ— æ³•æ»¡è¶³ ble-adv åŠŸèƒ½ï¼Œå¯ä»¥å‚è€ƒ ä½œè€…å›å¤ Q3 æœ¬æœºè¿è¡Œ Home Assistant è„šæœ¬ åå°è¿è¡Œè„šæœ¬ï¼Œåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ run.sh\n#!/bin/bash source bin/activate nohup hass --config config \u0026gt; hass.log 2\u0026gt;\u0026amp;1 \u0026amp; echo \u0026#34;Home Assistant started on: http://localhost:8123\u0026#34; æ·»åŠ æ‰§è¡Œæƒé™\n$ chmod +x run.sh å¯åŠ¨ Home Assistant\n$ ./run.sh æŸ¥çœ‹æ—¥å¿—\ntail -f hass.log åœæ­¢ Home Assistant\n$ pkill -f \u0026#34;hass --config config\u0026#34; å¼•ç”¨ Home Assistant (HA) Home Assistant Community Store (HACS) ha-ble-adv ESP Home esphome-ble-adv-proxy ESP Home å®˜æ–¹æ–‡æ¡£ - å®‰è£… ESP Home å®˜æ–¹æ–‡æ¡£ - å®‰è£…é—®é¢˜ ESP Home å®˜æ–¹æ–‡æ¡£ - Home Assistant é›†æˆ Home Assistant å®˜æ–¹æ–‡æ¡£ - MacOS å®‰è£… Home Assistant å®˜æ–¹æ–‡æ¡£ - HomeKit é›†æˆ Home Assistant å®˜æ–¹æ–‡æ¡£ - HomeKit Troubleshooting HACS å®˜æ–¹æ–‡æ¡£ - é¦–é¡µ HACS å®˜æ–¹æ–‡æ¡£ - é…ç½® HACS å®˜æ–¹æ–‡æ¡£ - è‡ªå®šä¹‰ä»“åº“ ha-ble-adv FAQ Community: HomeKit Bridge on Home Assistant in Docker Community: Use HomeKit Component inside Docker Reddit: Troubleshooting HomeKit What Tools to Use and How GitHub issue: Homekit not working with docker GitHub gist: Home Assistant Docker on MacOS ESP Home åå° http://localhost:6052 Home Assistant åå° http://localhost:8123 ","permalink":"https://lexcao.io/zh/posts/integrate-bluetooth-lamp-into-homekit-step-by-step/","summary":"\u003ch1 id=\"å¼•è¨€\"\u003eå¼•è¨€\u003c/h1\u003e\n\u003cp\u003eå¦‚æœä½ æœ‰ä¸€ä¸ªè“ç‰™ç¯ï¼Œå¹¶ä¸”å®ƒèƒ½å¤Ÿè¢«ä»¥ä¸‹å‡ ä¸ªæ‰‹æœºåº”ç”¨æ§åˆ¶ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eLampSmart Pro\u003c/li\u003e\n\u003cli\u003eLamp Smart Pro - Soft Lighting / Smart Lighting\u003c/li\u003e\n\u003cli\u003eFanLamp Pro\u003c/li\u003e\n\u003cli\u003eZhi Jia\u003c/li\u003e\n\u003cli\u003eZhi Guang\u003c/li\u003e\n\u003cli\u003eApplianceSmart\u003c/li\u003e\n\u003cli\u003eVmax smart\u003c/li\u003e\n\u003cli\u003eZhi Mei Deng Kong\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eé‚£ä¹ˆæ­å–œä½ ï¼Œä½ å¯ä»¥è·Ÿéšæœ¬ç¯‡æ•™ç¨‹ï¼Œä¸€æ­¥ä¸€æ­¥å°†å®ƒæ¥å…¥ HomeKit æ™ºèƒ½å®¶å±…ã€‚\næ¥å®ç°é€šè¿‡ iPhone å®¶åº­åº”ç”¨æ§åˆ¶ä»¥åŠ Siri è¯­éŸ³æ§åˆ¶ã€‚\nå¯¹äºå®ç°åçš„æ•ˆæœï¼Œå¯ä»¥çœ‹æˆ‘å¦ä¸€ç¯‡åšæ–‡ï¼š\u003ca href=\"/zh/posts/integrate-bluetooth-lamp-into-homekit/\"\u003eæŠ˜è…¾ï¼šHomeKit æ¥å…¥è“ç‰™å¸é¡¶ç¯\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eéå¸¸æ„Ÿè°¢ \u003ca href=\"https://github.com/NicoIIT/ha-ble-adv/\"\u003ehttps://github.com/NicoIIT/ha-ble-adv/\u003c/a\u003eï¼Œæœ¬ç¯‡æ•™ç¨‹å®é™…æ˜¯ä»é›¶æ¥å…¥è¯¥é¡¹ç›®ã€‚\u003c/p\u003e\n\u003ch2 id=\"å¼€å§‹ä¹‹å‰\"\u003eå¼€å§‹ä¹‹å‰\u003c/h2\u003e\n\u003cp\u003eåœ¨å¼€å§‹ä¹‹å‰ï¼Œéœ€è¦ä¸€ç‚¹ç‚¹åŸºç¡€çš„è®¡ç®—æœºçŸ¥è¯†ï¼Œç¡®ä¿æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eç†Ÿæ‚‰ Home Assistant æ¦‚å¿µå’Œä¸€äº›åŸºæœ¬æ“ä½œï¼Œå¯ä»¥é˜…è¯»å®˜æ–¹æ–‡æ¡£å¿«é€Ÿç†Ÿæ‚‰ï¼›\u003c/li\u003e\n\u003cli\u003eèƒ½å¤Ÿä½¿ç”¨ Terminal å‘½ä»¤è¡Œå·¥å…·ï¼›\u003c/li\u003e\n\u003cli\u003eå·²å®‰è£… Docker å¹¶ä¸”å¯ç”¨ï¼›\u003c/li\u003e\n\u003cli\u003eæœ‰ä¸€ä¸ª GitHub å¸å·ï¼›\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eå…³é”®ï¼šä¸€å— ESP32 å¼€å‘æ¿\u003c/strong\u003eï¼›\n\u003cul\u003e\n\u003cli\u003eä¸»è¦ç”¨äºè“ç‰™é€šä¿¡ï¼Œå¦‚æœæ²¡æœ‰çš„è¯ï¼Œå¯ä»¥ç½‘è´­ä¸€å—ï¼Œ25 å…ƒå·¦å³çš„ä»·æ ¼ï¼›\u003c/li\u003e\n\u003cli\u003eï¼ˆæœªæ¥ä¼šç ”ç©¶å¦‚ä½•ç›´æ¥ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„è“ç‰™ï¼‰ï¼›\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"æ•™ç¨‹æ–¹å¼\"\u003eæ•™ç¨‹æ–¹å¼\u003c/h2\u003e\n\u003cp\u003eæœ¬æ•™ç¨‹ä»¥ MacOS ä¸ºä¾‹ã€‚å¦‚æœä½ ä½¿ç”¨ Linux æˆ– Windowsï¼Œéƒ¨åˆ†æ“ä½œå¯èƒ½éœ€è¦ç¨ä½œè°ƒæ•´ã€‚\næ•™ç¨‹çš„æ¯ä¸ªæ­¥éª¤ä¼šè¯´æ˜ï¼š\u003cstrong\u003eè¦åšä»€ä¹ˆ\u003c/strong\u003eã€\u003cstrong\u003eæ€ä¹ˆåš\u003c/strong\u003eã€ä»¥åŠ\u003cstrong\u003eéªŒè¯ç»“æœ\u003c/strong\u003eã€‚è¯·ç¡®ä¿å®ŒæˆéªŒè¯åå†è¿›è¡Œä¸‹ä¸€æ­¥ã€‚é‡åˆ°é—®é¢˜æ—¶ï¼Œå¯ä»¥å‚è€ƒè‡ªæŸ¥æ”»ç•¥ï¼ˆéƒ¨åˆ†æ­¥éª¤æœ‰ï¼‰æˆ–è”ç³»æˆ‘ã€‚\u003c/p\u003e\n\u003ch1 id=\"å¦‚ä½•å®ç°\"\u003eå¦‚ä½•å®ç°\u003c/h1\u003e\n\u003cp\u003eå¯¹äºå®ç°ä¸æ„Ÿå…´è¶£çš„ï¼Œå¯ä»¥è·³è½¬åˆ°\u003ca href=\"/zh/posts/integrate-bluetooth-lamp-into-homekit-step-by-step/#Step1\"\u003eä¸‹ä¸€éƒ¨åˆ†\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"ç»„ä»¶åˆ—è¡¨\"\u003eç»„ä»¶åˆ—è¡¨\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.home-assistant.io/\"\u003eHome Assistant (HA)\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://hacs.xyz/\"\u003eHome Assistant Community Store (HACS)\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e\u003ca href=\"https://github.com/NicoIIT/ha-ble-adv/\"\u003eha-ble-adv\u003c/a\u003e\u003c/strong\u003e\n\u003cul\u003e\n\u003cli\u003eç¼©å†™æ˜¯ Home Assistant Bluetooth Low Energy Advertise\u003c/li\u003e\n\u003cli\u003eç¿»è¯‘ä¸º Home Assistant è“ç‰™ä½åŠŸè€—å¹¿æ’­\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://esphome.io/\"\u003eESP Home\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/NicoIIT/esphome-ble_adv_proxy\"\u003eesphome-ble-adv-proxy\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eESP32\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"ç»„ä»¶äº¤äº’\"\u003eç»„ä»¶äº¤äº’\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003eæ ¸å¿ƒæ˜¯ä½¿ç”¨ \u003ccode\u003eha-ble-adv\u003c/code\u003e é€šè¿‡è“ç‰™ä¸è®¾å¤‡äº¤äº’ï¼Œæ§åˆ¶å¼€å…³å’Œäº®åº¦\u003c/li\u003e\n\u003cli\u003eé€šè¿‡ Home Assistant æä¾›çš„ HomeKit Bridge è¿æ¥åˆ° iPhone å®¶åº­åº”ç”¨ï¼Œæ¥å®ç°æ§åˆ¶\u003c/li\u003e\n\u003cli\u003eè¦è®© Home Assistant æˆåŠŸä½¿ç”¨ä¸Š \u003ccode\u003eha-ble-adv\u003c/code\u003e éœ€è¦å…·å¤‡ä»¥ä¸‹æ¡ä»¶ï¼š\n\u003col\u003e\n\u003cli\u003eé€šè¿‡ \u003ccode\u003eHACS\u003c/code\u003e å®‰è£…ç»„ä»¶ \u003ccode\u003eha-ble-adv\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eé€šè¿‡ ESP Home åœ¨ ESP32 ä¸Šé¢å®‰è£… \u003ccode\u003eesphome-ble-adv-proxy\u003c/code\u003e ä»¥ä¾› \u003ccode\u003eha-ble-adv\u003c/code\u003e å‘é€å’Œæ¥æ”¶è“ç‰™ä¿¡æ¯\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eä»¥ä¸‹æ˜¯æ•´ä½“æ¶æ„å›¾\u003c/p\u003e","title":"æ•™ç¨‹ï¼šè®©ä½ çš„ä¸æ™ºèƒ½è“ç‰™ç¯æ¥å…¥ HomeKit æ™ºèƒ½å®¶å±…"},{"content":"ä¸€ã€ç¼˜èµ·ï¼šä¸€ä¸ª\u0026quot;åŸºç¡€ç‰ˆ\u0026quot;å¸é¡¶ç¯çš„æ™ºèƒ½åŒ–æŒ‘æˆ˜ æœ€è¿‘ç»™å®¶é‡Œå®¢å…æ¢äº†ä¸ªæ–°å¸é¡¶ç¯ã€‚è¿™ç¯ä¸ä»…èƒ½ç”¨é¥æ§å™¨ï¼Œè¿˜èƒ½ç”¨æ‰‹æœº App æ§åˆ¶ï¼Œçœ‹èµ·æ¥æŒºæ™ºèƒ½çš„ã€‚ç„¶è€Œï¼Œç¾ä¸­ä¸è¶³çš„æ˜¯ï¼Œå®ƒç«Ÿç„¶ä¸æ”¯æŒæ¥å…¥ç±³å®¶æˆ– HomeKitã€‚ æœç´¢åæ‰å‘ç°ï¼ŒåŸæ¥åŒå“ç‰Œæ›´è´µç‰ˆæœ¬æ˜¯æ”¯æŒç±³å®¶æ§åˆ¶çš„ï¼Œè€Œæˆ‘ä¹°çš„è¿™ä¸ªåŸºç¡€ç‰ˆä¸æ”¯æŒï¼Œå¤§æ¦‚ä»·å·® 100 å…ƒå·¦å³ã€‚\nä½œä¸ºä¸€ä¸ªå–œæ¬¢æŠ˜è…¾çš„ç¨‹åºå‘˜ï¼Œæˆ‘å¼€å§‹ä»ç¬¬ä¸€æ€§åŸç†æ€è€ƒï¼šæ—¢ç„¶å®ƒèƒ½é€šè¿‡æ‰‹æœº App æ§åˆ¶ï¼Œé€šè¿‡æ‰“å¼€ App æ—¶ç”³è¯·è“ç‰™æƒé™å¯ä»¥æ¨æ–­æ˜¯é€šè¿‡è“ç‰™è¿›è¡Œé€šä¿¡ã€‚æ—¢ç„¶æ˜¯è“ç‰™æ§åˆ¶ï¼Œé‚£ç†è®ºä¸Šå°±èƒ½é€šè¿‡åˆ«çš„è“ç‰™ç¨‹åºæ¥æ§åˆ¶å®ƒï¼Œè¿›è€Œæ¥å…¥æ™ºèƒ½å®¶å±…ç”Ÿæ€ã€‚å¯¹ï¼Œæ²¡é”™ï¼Œè‚¯å®šè¡Œï¼\nã€æ³¨æ„ã€‘æƒ³è¦ç€æ‰‹æ“ä½œä¸€ç•ªçš„æœ‹å‹ï¼Œå¯ä»¥å‚è€ƒæˆ‘çš„å¦ä¸€ç¯‡åšæ–‡ï¼šæ•™ç¨‹ï¼šè®©ä½ çš„ä¸æ™ºèƒ½è“ç‰™ç¯æ¥å…¥ HomeKit æ™ºèƒ½å®¶å±…\né—®é¢˜ç°çŠ¶æ¼”ç¤º æƒ³è¦ç›´æ¥çœ‹åˆ°æ¥å…¥åçš„æ•ˆæœï¼Œå¯ä»¥ ç‚¹å‡»è¿™é‡Œè·³è½¬ã€‚\näºŒã€æ¢ç´¢ï¼šHome Assistant ä¸è“ç‰™æ§åˆ¶æ–¹æ¡ˆ äºæ˜¯ä¹ï¼Œæˆ‘å…´å†²å†²åœ°å¼€å§‹äº†æˆ‘çš„æŠ˜è…¾ä¹‹æ—…ï¼Œè¿›è¡Œäº†å¤§é‡çš„æœç´¢å°è¯•ã€‚æ—¢ç„¶ç›´æ¥æ¥å…¥ç±³å®¶æ­¤è·¯ä¸é€šï¼Œé‚£æ›²çº¿æ•‘å›½å‘¢ï¼Ÿï¼ˆæ³¨ï¼šè¿™é‡ŒæŒ‡é€šè¿‡å…¶ä»–æ–¹å¼é—´æ¥å®ç°ç›®æ ‡ï¼‰æˆ‘çµæœºä¸€åŠ¨ï¼Œå¼€å§‹æœç´¢å¦‚ä½•å°†ç±³å®¶è®¾å¤‡æ¥å…¥ HomeKitã€‚ è¿™æ¬¡æœç´¢è®©æˆ‘æ‰“å¼€äº†ä¸€ä¸ªæ–°ä¸–ç•Œçš„å¤§é—¨ â€”â€” Home Assistant (HA)ï¼\nHome Assistant Open source home automation that puts local control and privacy first. Powered by a worldwide community of tinkerers and DIY enthusiasts. ä»¥æœ¬åœ°æ§åˆ¶å’Œéšç§ä¸ºå…ˆçš„å¼€æºå®¶åº­è‡ªåŠ¨åŒ–ã€‚ç”±å…¨çƒå·¥åŒ å’Œ DIY çˆ±å¥½è€…ç¤¾åŒºæä¾›æ”¯æŒã€‚\né¡ºè—¤æ‘¸ç“œï¼Œæˆ‘åˆå‘ç° Home Assistant ç«Ÿç„¶æœ‰ä¸ªå« HomeKit Bridge çš„ç»„ä»¶ï¼Œèƒ½æŠŠå„ç§é HomeKit è®¾å¤‡æ¡¥æ¥åˆ° HomeKitã€‚çœ‹åˆ°è¿™é‡Œï¼Œæˆ‘ä»¿ä½›çœ‹åˆ°äº†æ›™å…‰ï¼\nç»§ç»­åœ¨ Home Assistant çš„ç¤¾åŒºé‡Œæœç´¢ï¼Œæ„Ÿè°¢ä¸‡èƒ½çš„ç½‘å‹ï¼ŒæŒ–åˆ°äº†ä¸€ä¸ªå®è—é¡¹ç›®ï¼šha-ble-advï¼çœ‹åå­—å°±çŸ¥é“ï¼Œè¿™ç©æ„å„¿è·Ÿè“ç‰™æœ‰å…³ï¼Œç®€ç›´æ˜¯ä¸ºæˆ‘é‡èº«å®šåšçš„ï¼\nHome Assistant Bluetooth Low Energy Advertisement Home Assistant è“ç‰™ä½åŠŸè€—å¹¿æ’­ HA Custom Integration to control BLE ADV Ceiling Fans / Lamps Integration of Bluetooth controlled ceiling lamp Convert a \u0026ldquo;smart\u0026rdquo; chinese lamp to a real smart lamp Controlling BLE ceiling light with HA æ­¤æ—¶ï¼Œæˆ‘çš„è„‘æµ·ä¸­å·²ç»æµ®ç°å‡ºä¸€å‰¯è“å›¾ï¼š\né€šè¿‡ ha-ble-adv æ§åˆ¶è“ç‰™ç¯ã€‚ é€šè¿‡ Home Assistant æ§åˆ¶ ha-ble-advã€‚ é€šè¿‡ Home Assistant çš„ HomeKit Bridge æ¥å…¥ HomeKitã€‚ ä¸‰ã€å®è·µï¼šDocker ç¯å¢ƒä¸‹çš„é‡é‡é˜»ç¢ ç†è®ºå¯è¡Œï¼Œå¼€å§‹å®è·µï¼æˆ‘è¸ä¸Šäº†ä»é›¶å¼€å§‹æŠ˜è…¾ Home Assistant çš„æ—…ç¨‹ã€‚æ ¹æ®æ–‡æ¡£ä¸€è·¯è¿‡å…³æ–©å°†ï¼š\nå®‰è£… Home Assistantã€‚ å®‰è£… Home Assistant ç¤¾åŒºå•†åº—ï¼ˆHACSï¼‰ã€‚ é€šè¿‡ HACS å®‰è£… ha-ble-advã€‚ ä¸€åˆ‡ä¼¼ä¹éƒ½é‚£ä¹ˆé¡ºåˆ©ï¼Œç„¶è€Œï¼Œå½“æˆ‘æ‰“å¼€ ha-ble-adv å‡†å¤‡è¿æ¥è“ç‰™ç¯æ—¶ï¼Œé‡åˆ°äº†ç¬¬ä¸€ä¸ªéšœç¢ï¼šæ‰¾ä¸åˆ°è“ç‰™é€‚é…å™¨ã€‚ é€šè¿‡å¤§é‡æœç´¢ï¼Œæˆ‘å‘ç° Docker éƒ¨ç½²çš„ Home Assistant æ˜¯æ— æ³•ä½¿ç”¨å®¿ä¸»æœºçš„è“ç‰™è®¾å¤‡ã€‚ç½‘ç»œä¸Šç›¸å…³çš„æ•™ç¨‹æ–‡ç« å¤§å¤šé’ˆå¯¹ Linux ç¯å¢ƒã€‚ ç›´åˆ°æ‰¾åˆ°ä¸€ç¯‡æ–‡ç« æè¿°åˆ°ï¼š\nEasiest way to handle bluetooth (basically regardless of how you\u0026rsquo;re running HA) is to use an ESPHome BT proxy. Spend $5 on a ESP32, flash the BT proxy firmware, and you magically have bluetooth connectivity wherever you place your ESP(s) \u0026ndash; Reddit: Is bluetooth possible for docker in Mac?\nç¿»è¯‘è¿‡æ¥æ˜¯ï¼š\nå¤„ç†è“ç‰™çš„æœ€ç®€å•æ–¹æ³•ï¼ˆåŸºæœ¬ä¸Šä¸è¿è¡Œ HA çš„æ–¹å¼æ— å…³ï¼‰æ˜¯ä½¿ç”¨ ESPHome BT ä»£ç†ã€‚èŠ± 5 ç¾å…ƒä¹°ä¸€ä¸ª ESP32ï¼Œåˆ·å…¥ BT ä»£ç†å›ºä»¶ï¼Œç„¶åæ— è®ºä½ æŠŠ ESP æ”¾åœ¨å“ªé‡Œï¼Œéƒ½èƒ½ç¥å¥‡åœ°å®ç°è“ç‰™è¿æ¥ã€‚\nå¦å¤–ï¼Œha-ble-adv æœ¬èº«ä¹Ÿä¸æ”¯æŒ macOS åŸç”Ÿè“ç‰™è®¾å¤‡ï¼Œè¯¦æƒ…å¯ä»¥çœ‹è¿™ä¸ª issueã€‚\næ—¢ç„¶æœ€ç®€å•çš„æ–¹å¼æ˜¯ä½¿ç”¨ ESP32ï¼Œé‚£ä¹ˆæˆ‘ä¾¿ç€æ‰‹è´­ä¹°ã€‚ç½‘ä¸Šéšä¾¿é€‰äº†ä¸€ä¸ª ESP32 æ¿å­ï¼ŒèŠ±è´¹ 25 å…ƒã€‚\nä¸€å¤©åï¼ŒESP32 æ¿å­åˆ°æ‰‹ã€‚\n3.1 ESP32 åˆä½“éªŒï¼šWi-Fi è¿æ¥éš¾é¢˜ æ¥ä¸‹æ¥å¼€å§‹è¿›å…¥æŠ˜è…¾ä¹‹æ—…ç¬¬äºŒç« ï¼šé…ç½® ESP32ã€‚ æŸ¥é˜… ha-ble-adv æ–‡æ¡£ï¼Œå‘ç°å…¶æ›´æ¨èä½¿ç”¨ esphome-ble_adv_proxy ä½œä¸ºè“ç‰™ä»£ç†ã€‚\nç”±äºæ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦ ESP32 æ¿å­ï¼Œæˆ‘å¹¶æ²¡æœ‰å¤šæƒ³ï¼Œä¸¥æ ¼æŒ‰ç…§æ–‡æ¡£æŒ‡å¼•ï¼Œä¸€æ­¥æ­¥æ”»å…‹ï¼š\nå®‰è£… ESPHomeï¼šç”¨äº ESP32 çš„å¿«é€Ÿé…ç½®å’Œä¸ Home Assistant çš„æ— ç¼é›†æˆã€‚ è¿æ¥ ESP32 æ¿å­ï¼šåœ¨ ESPHome ä¸­æ·»åŠ æ–°è®¾å¤‡ã€‚ åˆ·å…¥ ble_adv_proxy ç»„ä»¶ï¼šä¸º ESP32 æ¿å­çƒ§å½• ESPHome çš„ ble_adv_proxy å›ºä»¶ã€‚ ç„¶è€Œï¼Œç¬¬äºŒä¸ªéšœç¢å‡ºç°äº†ï¼šæ¿å­æ¥ä¸Šåä¸€ç›´å¤„äºç¦»çº¿çŠ¶æ€ã€‚ å†æ¬¡æŠ•å…¥åˆ° ESPHome çš„ç›¸å…³æ–‡æ¡£ä¸­ï¼Œç»è¿‡ä¸€ç•ªæœç´¢ï¼Œå‘ç°é—®é¢˜å¯èƒ½å‡ºåœ¨å®‰è£…æ—¶å¡«å†™çš„ Wi-Fi ä¿¡æ¯ä¸Šâ€”â€”åŸæ¥ï¼Œå¤§éƒ¨åˆ† ESP32 å‹å·ä»…æ”¯æŒ 2.4GHz é¢‘æ®µçš„ Wi-Fiã€‚ è°ƒæ•´äº† Wi-Fi è®¾ç½®åï¼Œé—®é¢˜è¿åˆƒè€Œè§£ã€‚\nESP32 æˆåŠŸæ¥å…¥ ble_adv_proxy çš„è¿‡ç¨‹è¿˜ç®—é¡ºåˆ©ã€‚å½“æ‰“å¼€ ESP32 çš„ Debug ç½‘é¡µï¼Œçœ‹åˆ°å®ƒå¼€å§‹æ¥æ”¶åˆ°å‘¨å›´çš„è“ç‰™ä¿¡å·æ—¶ï¼Œå¿ƒä¸­è¿˜æ˜¯æ¶Œèµ·äº†ä¸€é˜µå°å°çš„æˆå°±æ„Ÿã€‚\n3.2 Home Assistant é›†æˆ ESP32ï¼šmDNS çš„\u0026quot;å‘\u0026quot; å›åˆ°ä¸»çº¿ä»»åŠ¡ï¼šå°† ESPHome æ¥å…¥ Home Assistantï¼Œè¿™æ · ha-ble-adv å°±èƒ½åˆ©ç”¨ ble_adv_proxy æ¥æ”¶å‘è“ç‰™æ¶ˆæ¯äº†ã€‚\næ ¹æ® ESPHome çš„æ–‡æ¡£ï¼Œå¦‚æœç½‘ç»œé…ç½®æ­£ç¡®ï¼ŒHome Assistant åº”è¯¥èƒ½è‡ªåŠ¨å‘ç° ESP32 è®¾å¤‡ã€‚ ä½†äº‹ä¸æ„¿è¿ï¼Œç¬¬ä¸‰ä¸ªéšœç¢å‡ºç°äº†ï¼šESP32 æ·»åŠ å¤±è´¥ã€‚ ç”±äºæˆ‘çš„é…ç½®å­˜åœ¨é—®é¢˜ï¼Œè‡ªåŠ¨å‘ç°å¹¶æœªæˆåŠŸã€‚å°è¯•æ‰‹åŠ¨æ·»åŠ ï¼Œè¾“å…¥ ESP32 çš„ .local åœ°å€ï¼Œä¹Ÿæ— æ³•è¿æ¥ã€‚ æˆ‘å¼€å§‹æ’æŸ¥ï¼šæ—¢ç„¶ ESP32 çš„ .local åœ°å€æ— æ³•è¯†åˆ«ï¼Œé‚£ç›´æ¥ä½¿ç”¨ IP åœ°å€æ˜¯å¦å¯è¡Œï¼Ÿ è€ƒè™‘åˆ°æˆ‘ä½¿ç”¨ Docker éƒ¨ç½² Home Assistantï¼Œå®¹å™¨å†…å¯èƒ½æ— æ³•æ­£ç¡®è§£æ ESP32 çš„ .local åœ°å€ã€‚äºæ˜¯ï¼Œæˆ‘åœ¨ Home Assistant çš„ Docker é…ç½®ä¸­æ·»åŠ äº† extra_hostsï¼Œå®ç°å®¹å™¨å†…çš„æ‰‹åŠ¨ DNS è§£æï¼š\nextra_hosts: - \u0026#34;esp32.local:192.168.50.66\u0026#34; # å°† esp32.local æŒ‡å‘å…¶ IP åœ°å€ åè¯ï¼šå…¶å®ï¼Œè¿™é‡Œæœªèƒ½è‡ªåŠ¨å‘ç°è®¾å¤‡ï¼Œå·²ç»æš—ç¤ºäº†æ›´æ·±å±‚æ¬¡çš„é—®é¢˜â€”â€”æœåŠ¡è‡ªå‘ç°åè®® mDNS æ²¡æœ‰æ­£å¸¸å·¥ä½œã€‚è¿™æ˜¯ Docker ç¯å¢ƒä¸‹éƒ¨ç½² Home Assistant æ—¶å¸¸è§çš„ä¸€ä¸ªå‘ï¼Œä¹Ÿä¸ºåç»­çš„ä¸€ç³»åˆ—é—®é¢˜åŸ‹ä¸‹äº†ä¼ç¬”ã€‚å¯ä»¥è¯´ï¼Œä¹‹åé‡åˆ°çš„æ‰€æœ‰éº»çƒ¦ï¼ŒåŸºæœ¬éƒ½ä¸ mDNS å¤±æ•ˆæœ‰å…³ã€‚\né‡å¯ Home Assistant åï¼Œå°è¯•é€šè¿‡ ESP32 çš„ .local åœ°å€å†æ¬¡æ·»åŠ ï¼Œè®¾å¤‡æˆåŠŸè¿æ¥ï¼çœ‹æ¥æ‰‹åŠ¨é…ç½® DNS è§£æç¡®å®æœ‰æ•ˆã€‚\n3.3 ha-ble-adv é…ç½®é£æ³¢ æ·»åŠ æˆåŠŸåï¼Œha-ble-adv ç»ˆäºèƒ½å¤Ÿè¯†åˆ«åˆ° ESP32 è¿™ä¸ªè“ç‰™é€‚é…å™¨äº†ã€‚ ç„¶è€Œï¼Œå°±åœ¨æˆ‘å‡†å¤‡è¿›ä¸€æ­¥é…ç½®æ—¶ï¼Œç¬¬å››ä¸ªéšœç¢åˆä¸æœŸè€Œè‡³ï¼šha-ble-adv çš„é…ç½®é¡µé¢æ— æ³•æ‰“å¼€ã€‚ æŸ¥çœ‹ Debug æ—¥å¿—ï¼Œå‘ç°äº†ä¸€ä¸ª Python ä»£ç æŠ¥é”™ã€‚ç»è¿‡ä¸€ç•ªæ’æŸ¥ï¼Œä¾æ—§æœªèƒ½å®šä½é—®é¢˜ã€‚ æ— å¥ˆä¹‹ä¸‹ï¼Œæˆ‘å†³å®šå‘é¡¹ç›®ä½œè€…æä¸ª issue æ±‚åŠ©ã€‚ å¹¸è¿çš„æ˜¯ï¼Œä½œè€…åœ¨ä¸€å¤©åå°±å¿«é€Ÿå“åº”ï¼Œå¹¶ä¿®å¤äº†è¯¥æŠ¥é”™ã€‚\næ›´æ–° ha-ble-adv åï¼Œæˆ‘ç»ˆäºæˆåŠŸè¿›å…¥äº†é…ç½®é¡µé¢ã€‚æŒ‰ç…§æŒ‡å¼•ï¼Œé¡ºåˆ©é…ç½®å¥½äº†æˆ‘çš„è“ç‰™å¸é¡¶ç¯ã€‚ è‡³æ­¤ï¼Œç¬¬ä¸€ä¸ªé‡è¦çš„é‡Œç¨‹ç¢‘è¾¾æˆï¼šæˆåŠŸé€šè¿‡ ESP32 è¿™ä¸ªç¬¬ä¸‰æ–¹è“ç‰™è®¾å¤‡æ§åˆ¶äº†å¸é¡¶ç¯ï¼ ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ç°åœ¨å·²ç»å¯ä»¥ç”¨ Home Assistant æ¥æ§åˆ¶ç¯çš„å¼€å…³å’Œäº®åº¦äº†ã€‚\nå››ã€ç»ˆææŒ‘æˆ˜ï¼šHomeKit Bridge é›†æˆéš¾é¢˜ èƒœåˆ©åœ¨æœ›ï¼Œæ¥ä¸‹æ¥å°±æ˜¯æœ€åä¸€æ­¥ï¼šæ·»åŠ  HomeKit Bridgeï¼Œå°†è¿™ä¸ªç¯æ¥å…¥è‹¹æœçš„ HomeKit ç”Ÿæ€ã€‚ æˆ‘åŸä»¥ä¸ºè¿™ä¼šæ˜¯æœ€ç®€å•çš„ä¸€æ­¥ï¼Œåªéœ€åœ¨ Home Assistant ä¸­å¯ç”¨ HomeKit Bridge ç»„ä»¶ï¼Œç„¶ååœ¨å®¶åº­ App ä¸­æ·»åŠ å³å¯ã€‚ ä¸‡ä¸‡æ²¡æƒ³åˆ°ï¼Œæœ€åä¸€ä¸ªï¼Œä¹Ÿæ˜¯æœ€æŠ˜ç£¨äººçš„éšœç¢å‡ºç°äº†ï¼šHomeKit Bridge æ— æ³•æ·»åŠ åˆ° HomeKitã€‚è¿™ä¸ªé—®é¢˜è¶³è¶³å›°æ‰°äº†æˆ‘ä¸‰å¤©ã€‚\næˆ‘å¼€å§‹äº†åˆä¸€è½®å¤§é‡çš„æœç´¢ï¼ŒæŸ¥é˜…å„ç§ç¤¾åŒºå¸–å­å’Œå®˜æ–¹æ–‡æ¡£ï¼Œå¸Œæœ›èƒ½æ‰¾åˆ°è§£å†³æ–¹æ¡ˆã€‚ æ ¹æ®å„æ–¹çº¿ç´¢ï¼Œé—®é¢˜é€æ¸æŒ‡å‘ç½‘ç»œå±‚é¢ã€‚æˆ‘å°è¯•æ£€æŸ¥å’Œè°ƒæ•´äº†ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š\nDocker çš„ network_mode è®¾ç½® mDNS ç›¸å…³çš„ç½‘ç»œé…ç½® HomeKit å¯¹ç½‘ç»œç¯å¢ƒçš„è¦æ±‚ Wi-Fi ç½‘ç»œè®¾ç½® ç”šè‡³å°è¯•äº†é‡è£… Home Assistantï¼ŒæŠŠä¹‹å‰çš„æ•´ä¸ªæµç¨‹é‡æ–°èµ°äº†ä¸€éï¼Œä½†é—®é¢˜ä¾æ—§ã€‚ æˆ‘å¼€å§‹é‡‡ç”¨æ§åˆ¶å˜é‡æ³•ï¼Œä¸æ–­è°ƒæ•´ Docker éƒ¨ç½² Home Assistant çš„å„é¡¹é…ç½®ï¼Œå¸Œæœ›èƒ½æ‰¾åˆ°ç—‡ç»“æ‰€åœ¨ã€‚ åœ¨æœç´¢è¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°è®¸å¤šç”¨æˆ·éƒ½æŠ¥å‘Šäº†åœ¨ Docker ç¯å¢ƒä¸‹è¿è¡Œ Home Assistant æ—¶é‡åˆ°å„ç§ç½‘ç»œé—®é¢˜ï¼Œå°¤å…¶æ˜¯ä¸ mDNS å’Œ HomeKit ç›¸å…³çš„ã€‚\näº”ã€æŸ³æš—èŠ±æ˜ï¼šå‘Šåˆ« Dockerï¼Œæ‹¥æŠ±åŸç”Ÿ è¿™æ—¶ï¼Œä¸€ä¸ªå¤§èƒ†çš„æƒ³æ³•èŒç”Ÿäº†ï¼šDocker å°±æ˜¯æœ€å¤§çš„å˜é‡ï¼Œå¯ä»¥å°è¯•å»æ‰ï¼ æˆ‘å†³å®šç›´æ¥åœ¨æˆ‘çš„ macOS ä¸ŠåŸç”Ÿéƒ¨ç½² Home Assistantï¼ç„¶åï¼ŒæŠŠä¹‹å‰çš„å…¨éƒ¨æµç¨‹åœ¨ macOS ç¯å¢ƒä¸‹é‡èµ°ä¸€éã€‚ å¥‡è¿¹å‘ç”Ÿäº†ï¼š\nmacOS å®¿ä¸»æœºçš„è“ç‰™é€‚é…å™¨è¢« Home Assistant è‡ªåŠ¨è¯†åˆ«å¹¶æˆåŠŸå¯ç”¨äº†ã€‚ ESP32 é€šè¿‡ ESPHome è¿æ¥åï¼Œä¹Ÿè¢« Home Assistant è‡ªåŠ¨å‘ç°äº†ã€‚ ä¸€æ­¥æ­¥é‡å¤ä¹‹å‰çš„å®‰è£…å’Œé…ç½®ï¼Œæ¯ä¸€æ­¥éƒ½æ¯”åœ¨ Docker ç¯å¢ƒä¸‹æ›´åŠ é¡ºç•…ï¼Œç»“æœä¹Ÿæ›´ç¬¦åˆé¢„æœŸã€‚è¿™ç»™äº†æˆ‘æå¤§çš„ä¿¡å¿ƒï¼Œæ„Ÿè§‰è¿™æ¬¡çœŸçš„è¦æˆåŠŸäº†ï¼ ç»ˆäºï¼Œåˆ°äº†æœ€åä¸€æ­¥â€”â€”æ·»åŠ  HomeKit Bridge åˆ° HomeKitã€‚è¿™ä¸€æ¬¡ï¼Œä¸€åˆ‡éƒ½å¦‚ä¸èˆ¬é¡ºæ»‘ï¼ŒæˆåŠŸäº†ï¼ğŸ‰\nç°åœ¨ï¼Œæˆ‘ç»ˆäºå¯ä»¥é€šè¿‡ iPhone ä¸Šçš„\u0026quot;å®¶åº­\u0026quot; Appï¼Œç”šè‡³ç›´æ¥ç”¨ Siri æ¥æ§åˆ¶æˆ‘çš„å¸é¡¶ç¯äº†ï¼å¼€å…³ç¯ã€è°ƒèŠ‚äº®åº¦ï¼Œä¸€åˆ‡éƒ½éšå¿ƒæ‰€æ¬²ã€‚\næœ€ç»ˆæ•ˆæœæ¼”ç¤º å…­ã€æ€»ç»“ä¸æ„Ÿæ‚Ÿ å›é¡¾æ•´ä¸ªè¿‡ç¨‹ï¼Œè™½ç„¶å……æ»¡æ³¢æŠ˜ï¼Œä½†æœ€ç»ˆå‡­å€Ÿä¸€å—å°å°çš„ ESP32ï¼ˆæˆæœ¬ä»… 25 å…ƒï¼‰ï¼Œæˆ‘ä¸ä½†æˆåŠŸåœ°å°†è¿™ä¸ª\u0026quot;éæ™ºèƒ½\u0026quot;çš„å¸é¡¶ç¯æ¥å…¥äº† HomeKitï¼Œè¿˜çœä¸‹äº†è´­ä¹°åŸè£…ç±³å®¶ç‰ˆç¯å…·çš„ 100 å…ƒå·¦å³å·®ä»·ã€‚è¿™æ³¢æŠ˜è…¾ï¼Œä¸ä»…æŠ€æœ¯ä¸Šæœ‰æ‰€æ”¶è·ï¼Œç»æµä¸Šä¹Ÿç›¸å½“åˆ’ç®—ï¼Œæˆå°±æ„Ÿæ»¡æ»¡ï¼ æ›´é‡è¦çš„æ˜¯ï¼Œè¿™æ¬¡ç»å†ä¹Ÿè®©æˆ‘å†æ¬¡å®è·µäº†ä»ç¬¬ä¸€æ€§åŸç†å‡ºå‘æ€è€ƒå’Œè§£å†³é—®é¢˜çš„èƒ½åŠ›ã€‚æ•´ä¸ªè¿‡ç¨‹è™½ç„¶è‰°è¾›ï¼Œä½†ç»“æœä»¤äººæ„‰æ‚¦ã€‚ç‰¹æ­¤è®°å½•ä¸‹è¿™æ®µç»å†ï¼Œä»¥ä½œåˆ†äº«ã€‚\nä¸è¶³ä¹‹å¤„ï¼š ble-adv æ–¹æ¡ˆä»æ—§æœ‰ä¸€äº›ä¸è¶³ä¹‹å¤„ï¼š\néœ€è¦ Home Assistant ä¸€ç›´ä¿æŒåå°è¿è¡Œ éœ€è¦ ESP32 ä¸€ç›´ä¿æŒè¿æ¥çŠ¶æ€ æ— æ³•è®°ä½å½“å‰çŠ¶æ€ï¼Œæ¯”å¦‚å…ˆç”¨æ‰‹æœºå¼€ç¯ä¹‹åï¼Œç”¨é¥æ§å™¨è¿›è¡Œå…³ç¯æ“ä½œï¼Œæ­¤æ—¶æ‰‹æœºä¸Šé¢ä»æ—§æ˜¾ç¤ºçš„æ˜¯å¼€ç¯çŠ¶æ€ã€‚ ","permalink":"https://lexcao.io/zh/posts/integrate-bluetooth-lamp-into-homekit/","summary":"\u003ch2 id=\"ä¸€ç¼˜èµ·ä¸€ä¸ªåŸºç¡€ç‰ˆå¸é¡¶ç¯çš„æ™ºèƒ½åŒ–æŒ‘æˆ˜\"\u003eä¸€ã€ç¼˜èµ·ï¼šä¸€ä¸ª\u0026quot;åŸºç¡€ç‰ˆ\u0026quot;å¸é¡¶ç¯çš„æ™ºèƒ½åŒ–æŒ‘æˆ˜\u003c/h2\u003e\n\u003cp\u003eæœ€è¿‘ç»™å®¶é‡Œå®¢å…æ¢äº†ä¸ªæ–°å¸é¡¶ç¯ã€‚è¿™ç¯ä¸ä»…èƒ½ç”¨é¥æ§å™¨ï¼Œè¿˜èƒ½ç”¨æ‰‹æœº App æ§åˆ¶ï¼Œçœ‹èµ·æ¥æŒºæ™ºèƒ½çš„ã€‚ç„¶è€Œï¼Œç¾ä¸­ä¸è¶³çš„æ˜¯ï¼Œå®ƒç«Ÿç„¶ä¸æ”¯æŒæ¥å…¥ç±³å®¶æˆ– HomeKitã€‚\næœç´¢åæ‰å‘ç°ï¼ŒåŸæ¥åŒå“ç‰Œæ›´è´µç‰ˆæœ¬æ˜¯æ”¯æŒç±³å®¶æ§åˆ¶çš„ï¼Œè€Œæˆ‘ä¹°çš„è¿™ä¸ªåŸºç¡€ç‰ˆä¸æ”¯æŒï¼Œå¤§æ¦‚ä»·å·® 100 å…ƒå·¦å³ã€‚\u003c/p\u003e\n\u003cp\u003eä½œä¸ºä¸€ä¸ªå–œæ¬¢æŠ˜è…¾çš„ç¨‹åºå‘˜ï¼Œæˆ‘å¼€å§‹ä»ç¬¬ä¸€æ€§åŸç†æ€è€ƒï¼šæ—¢ç„¶å®ƒèƒ½é€šè¿‡æ‰‹æœº App æ§åˆ¶ï¼Œé€šè¿‡æ‰“å¼€ App æ—¶ç”³è¯·è“ç‰™æƒé™å¯ä»¥æ¨æ–­æ˜¯é€šè¿‡è“ç‰™è¿›è¡Œé€šä¿¡ã€‚æ—¢ç„¶æ˜¯è“ç‰™æ§åˆ¶ï¼Œé‚£ç†è®ºä¸Šå°±èƒ½é€šè¿‡åˆ«çš„è“ç‰™ç¨‹åºæ¥æ§åˆ¶å®ƒï¼Œè¿›è€Œæ¥å…¥æ™ºèƒ½å®¶å±…ç”Ÿæ€ã€‚å¯¹ï¼Œæ²¡é”™ï¼Œè‚¯å®šè¡Œï¼\u003c/p\u003e\n\u003cp\u003eã€æ³¨æ„ã€‘æƒ³è¦ç€æ‰‹æ“ä½œä¸€ç•ªçš„æœ‹å‹ï¼Œå¯ä»¥å‚è€ƒæˆ‘çš„å¦ä¸€ç¯‡åšæ–‡ï¼š\u003ca href=\"/zh/posts/integrate-bluetooth-lamp-into-homekit-step-by-step/\"\u003eæ•™ç¨‹ï¼šè®©ä½ çš„ä¸æ™ºèƒ½è“ç‰™ç¯æ¥å…¥ HomeKit æ™ºèƒ½å®¶å±…\u003c/a\u003e\u003c/p\u003e\n\u003ch3 id=\"é—®é¢˜ç°çŠ¶æ¼”ç¤º\"\u003eé—®é¢˜ç°çŠ¶æ¼”ç¤º\u003c/h3\u003e\n\u003cp\u003e\n\n\u003cvideo width=\"100%\" controls disablepictureinpicture controlslist=\"nodownload\" src=\"/videos/integrate-bluetooth-lamp-into-homekit/remoter_control_lamp.webm\" type=\"video/webm\"\u003e\n\u003c/video\u003e\n\n\n\n\u003cvideo width=\"100%\" controls disablepictureinpicture controlslist=\"nodownload\" src=\"/videos/integrate-bluetooth-lamp-into-homekit/app_control_lamp.webm\" type=\"video/webm\"\u003e\n\u003c/video\u003e\n\u003c/p\u003e\n\u003cp\u003eæƒ³è¦ç›´æ¥çœ‹åˆ°æ¥å…¥åçš„æ•ˆæœï¼Œå¯ä»¥ \u003ca href=\"/zh/posts/integrate-bluetooth-lamp-into-homekit/#final\"\u003eç‚¹å‡»è¿™é‡Œè·³è½¬\u003c/a\u003eã€‚\u003c/p\u003e\n\u003ch2 id=\"äºŒæ¢ç´¢home-assistant-ä¸è“ç‰™æ§åˆ¶æ–¹æ¡ˆ\"\u003eäºŒã€æ¢ç´¢ï¼šHome Assistant ä¸è“ç‰™æ§åˆ¶æ–¹æ¡ˆ\u003c/h2\u003e\n\u003cp\u003eäºæ˜¯ä¹ï¼Œæˆ‘å…´å†²å†²åœ°å¼€å§‹äº†æˆ‘çš„æŠ˜è…¾ä¹‹æ—…ï¼Œè¿›è¡Œäº†å¤§é‡çš„æœç´¢å°è¯•ã€‚æ—¢ç„¶ç›´æ¥æ¥å…¥ç±³å®¶æ­¤è·¯ä¸é€šï¼Œé‚£æ›²çº¿æ•‘å›½å‘¢ï¼Ÿï¼ˆæ³¨ï¼šè¿™é‡ŒæŒ‡é€šè¿‡å…¶ä»–æ–¹å¼é—´æ¥å®ç°ç›®æ ‡ï¼‰æˆ‘çµæœºä¸€åŠ¨ï¼Œå¼€å§‹æœç´¢å¦‚ä½•å°†ç±³å®¶è®¾å¤‡æ¥å…¥ HomeKitã€‚\nè¿™æ¬¡æœç´¢è®©æˆ‘æ‰“å¼€äº†ä¸€ä¸ªæ–°ä¸–ç•Œçš„å¤§é—¨ â€”â€” \u003ccode\u003eHome Assistant\u003c/code\u003e (HA)ï¼\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.home-assistant.io/\"\u003e\u003ccode\u003eHome Assistant\u003c/code\u003e\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cp\u003eOpen source home automation that puts local control and privacy first. Powered by a worldwide community of tinkerers and DIY enthusiasts.\nä»¥æœ¬åœ°æ§åˆ¶å’Œéšç§ä¸ºå…ˆçš„å¼€æºå®¶åº­è‡ªåŠ¨åŒ–ã€‚ç”±å…¨çƒå·¥åŒ å’Œ DIY çˆ±å¥½è€…ç¤¾åŒºæä¾›æ”¯æŒã€‚\u003c/p\u003e\u003c/blockquote\u003e\n\u003cp\u003eé¡ºè—¤æ‘¸ç“œï¼Œæˆ‘åˆå‘ç° \u003ccode\u003eHome Assistant\u003c/code\u003e ç«Ÿç„¶æœ‰ä¸ªå« \u003ccode\u003eHomeKit Bridge\u003c/code\u003e çš„ç»„ä»¶ï¼Œèƒ½æŠŠå„ç§é HomeKit è®¾å¤‡æ¡¥æ¥åˆ° HomeKitã€‚çœ‹åˆ°è¿™é‡Œï¼Œæˆ‘ä»¿ä½›çœ‹åˆ°äº†æ›™å…‰ï¼\u003c/p\u003e\n\u003cp\u003eç»§ç»­åœ¨ \u003ccode\u003eHome Assistant\u003c/code\u003e çš„ç¤¾åŒºé‡Œæœç´¢ï¼Œæ„Ÿè°¢ä¸‡èƒ½çš„ç½‘å‹ï¼ŒæŒ–åˆ°äº†ä¸€ä¸ªå®è—é¡¹ç›®ï¼š\u003ccode\u003eha-ble-adv\u003c/code\u003eï¼çœ‹åå­—å°±çŸ¥é“ï¼Œè¿™ç©æ„å„¿è·Ÿè“ç‰™æœ‰å…³ï¼Œç®€ç›´æ˜¯ä¸ºæˆ‘é‡èº«å®šåšçš„ï¼\u003c/p\u003e","title":"æŠ˜è…¾ï¼šè“ç‰™å¸é¡¶ç¯æ¥å…¥ HomeKit"},{"content":"æœ¬æ–‡å°†ä¸ºå¤§å®¶ä»‹ç» genapiï¼Œä¸€ä¸ªç”¨äºè‡ªåŠ¨ç”Ÿæˆ Golang HTTP Client çš„ä»£ç åº“ã€‚å¦‚æœä½ å¯¹è¿™ä¸ªé¡¹ç›®æ„Ÿå…´è¶£ï¼Œå¯ä»¥è®¿é—® genapi å®˜ç½‘ æˆ– GitHub ä»“åº“ è·å–æ›´å¤šæŠ€æœ¯ç»†èŠ‚ã€‚\nä»æ‰‹å·¥åˆ°è‡ªåŠ¨ï¼šGolang HTTP Client çš„æ¼”è¿›ä¹‹è·¯ åœ¨ Golang å¼€å‘ä¸­ï¼Œè°ƒç”¨ HTTP API æ˜¯ä¸€ä¸ªéå¸¸å¸¸è§çš„éœ€æ±‚ã€‚æœ¬æ–‡å°†é€šè¿‡ä¸€ä¸ªå¤©æ°” API çš„ç¤ºä¾‹ï¼Œä»‹ç» HTTP Client ä»£ç æ˜¯å¦‚ä½•ä»æ‰‹å·¥ç¼–å†™æ¼”è¿›åˆ°è‡ªåŠ¨ç”Ÿæˆçš„ã€‚è®©æˆ‘ä»¬çœ‹çœ‹è¿™ä¸ªç®€å•çš„å¤©æ°” APIï¼š\nGET /api/weather?city=shanghai Response: { \u0026#34;temperature\u0026#34;: 25, \u0026#34;humidity\u0026#34;: 60, \u0026#34;condition\u0026#34;: \u0026#34;sunny\u0026#34; } åŸå§‹æ‰‹å·¥ç¼–å†™ æœ€åˆï¼Œæˆ‘ä»¬å¯èƒ½ä¼šç›´æ¥ç¼–å†™å¦‚ä¸‹ä»£ç ï¼š\nfunc getWeather(city string) (*Weather, error) { resp, err := http.Get(\u0026#34;https://api.weather.com/api/weather?city=\u0026#34; + city) if err != nil { return nil, err } defer resp.Body.Close() var weather Weather if err := json.NewDecoder(resp.Body).Decode(\u0026amp;weather); err != nil { return nil, err } return \u0026amp;weather, nil } è¿™ç§æ–¹å¼ç®€å•ç›´æ¥ï¼Œä½†å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š\nURL ç¡¬ç¼–ç åœ¨ä»£ç ä¸­ å‚æ•°æ‹¼æ¥å®¹æ˜“äº§ç”Ÿé”™è¯¯ é”™è¯¯å¤„ç†é€»è¾‘é‡å¤ å“åº”è§£æä»£ç é‡å¤ æ¨¡æ¿åŒ–è¯·æ±‚ ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œæˆ‘ä»¬å¼€å§‹å¯¹ä»£ç è¿›è¡ŒæŠ½è±¡å’Œæ¨¡æ¿åŒ–æ”¹é€ ï¼š\ntype Client struct { baseURL string client *http.Client } func (c *Client) doRequest(method, path string, query url.Values, result interface{}) error { u, _ := url.Parse(c.baseURL + path) u.RawQuery = query.Encode() req, err := http.NewRequest(method, u.String(), nil) if err != nil { return err } resp, err := c.client.Do(req) if err != nil { return err } defer resp.Body.Close() return json.NewDecoder(resp.Body).Decode(result) } func (c *Client) GetWeather(city string) (*Weather, error) { query := url.Values{} query.Set(\u0026#34;city\u0026#34;, city) var weather Weather err := c.doRequest(\u0026#34;GET\u0026#34;, \u0026#34;/api/weather\u0026#34;, query, \u0026amp;weather) return \u0026amp;weather, err } è¿™æ ·çš„æ”¹è¿›å¸¦æ¥äº†ä»¥ä¸‹å¥½å¤„ï¼š\nç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶ æ›´å®‰å…¨çš„å‚æ•°æ„å»ºæ–¹å¼ å¯å¤ç”¨çš„è¯·æ±‚å¤„ç†é€»è¾‘ ç„¶è€Œï¼Œæˆ‘ä»¬ä»ç„¶éœ€è¦æ‰‹åŠ¨ç¼–å†™æ¯ä¸ª API æ–¹æ³•ã€‚\ngenapiï¼šæ³¨è§£é©±åŠ¨çš„ä»£ç ç”Ÿæˆ ä¸ºäº†è¿›ä¸€æ­¥æé«˜å¼€å‘æ•ˆç‡ï¼Œå¼•å…¥ genapiã€‚é€šè¿‡ç®€å•çš„æ³¨è§£ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªåŠ¨ç”Ÿæˆæ‰€æœ‰çš„ API è°ƒç”¨ä»£ç ï¼š\npackage api import \u0026#34;github.com/lexcao/genapi\u0026#34; //go:generate go run github.com/lexcao/genapi/cmd/genapi -file $GOFILE // WeatherAPI å®šä¹‰äº†å¤©æ°”æœåŠ¡çš„ API // @BaseURL(\u0026#34;https://api.weather.com\u0026#34;) type WeatherAPI interface { genapi.Interface // @get(\u0026#34;/api/weather\u0026#34;) // @query(\u0026#34;city\u0026#34;, \u0026#34;{city}\u0026#34;) GetWeather(ctx context.Context, city string) (*Weather, error) } åªéœ€è¦å®šä¹‰æ¥å£å’Œæ·»åŠ æ³¨è§£ï¼Œä½¿ç”¨ go generate genapi å°±ä¼šè‡ªåŠ¨ç”Ÿæˆå®Œæ•´çš„å®¢æˆ·ç«¯ä»£ç ï¼š\n// CODE GENERATED BY genapi. DO NOT EDIT. package api import ( \u0026#34;context\u0026#34; \u0026#34;github.com/lexcao/genapi\u0026#34; \u0026#34;net/url\u0026#34; ) type implWeatherAPI struct { client genapi.HttpClient } // SetHttpClient implments genapi.Interface func (i *implWeatherAPI) SetHttpClient(client genapi.HttpClient) { i.client = client } func (i *implWeatherAPI) GetWeather(ctx context.Context, city string) (*Weather, error) { resp, err := i.client.Do(\u0026amp;genapi.Request{ Method: \u0026#34;get\u0026#34;, Path: \u0026#34;/api/weather\u0026#34;, Queries: url.Values{ \u0026#34;city\u0026#34;: []string{ city, }, }, Context: ctx, }) return genapi.HandleResponse[*Weather](resp, err) } func init() { genapi.Register[WeatherAPI, *implWeatherAPI]( genapi.Config{ BaseURL: \u0026#34;https://api.weather.com\u0026#34;, }, ) } ç”Ÿæˆåçš„ä»£ç è¿™æ ·ä½¿ç”¨ func main() { client := genapi.New[api.WeatherAPI]() weather, err := client.GetWeather(context.TODO(), \u0026#34;shanghai\u0026#34;) } æ›¿æ¢ä¸åŒçš„ HttpClient genapi çš„ä¸€ä¸ªæ ¸å¿ƒç‰¹æ€§æ˜¯æ”¯æŒåœ¨è¿è¡Œæ—¶åŠ¨æ€æ›¿æ¢ HttpClientã€‚è¿™ç»™äº†æˆ‘ä»¬æå¤§çš„çµæ´»æ€§ï¼Œå¯ä»¥æ ¹æ®éœ€è¦åˆ‡æ¢ä¸åŒçš„ HTTP å®¢æˆ·ç«¯å®ç°ã€‚\næ›¿æ¢é»˜è®¤çš„ HttpClient import ( http_client \u0026#34;net/http\u0026#34; \u0026#34;github.com/lexcao/genapi\u0026#34; \u0026#34;github.com/lexcao/genapi/pkg/clients/http\u0026#34; ) func main() { httpClient := \u0026amp;http_client.Client{} // åˆ›å»ºæ—¶æŒ‡å®š client := genapi.New[api.WeatherAPI]( genapi.WithHttpClient(http.New(httpClient)) ) // æˆ–è€…è¿è¡Œæ—¶è®¾ç½® client.SetHttpClient(httpClient) } ä½¿ç”¨ Resty genapi å·²ç»å†…ç½®æ”¯æŒäº† Resty å®¢æˆ·ç«¯ã€‚é¦–å…ˆéœ€è¦å®‰è£…ï¼š\ngo get github.com/lexcao/genapi/pkg/clients/resty ç„¶åå°±å¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š\nimport ( \u0026#34;github.com/lexcao/genapi\u0026#34; \u0026#34;github.com/lexcao/genapi/pkg/clients/resty\u0026#34; resty_client \u0026#34;github.com/go-resty/resty/v2\u0026#34; ) func main() { client := genapi.New[api.WeatherAPI]( genapi.WithHttpClient(resty.DefaultClient), // ä½¿ç”¨é»˜è®¤é…ç½® genapi.WithHttpClient(resty.New(resty_client.New())), // è‡ªå®šä¹‰é…ç½® ) } å®ç°è‡ªå·±çš„ HttpClient ä½ ä¹Ÿå¯ä»¥å®ç°è‡ªå·±çš„ HttpClientï¼Œåªéœ€è¦å®ç° genapi.HttpClient æ¥å£ï¼š\ntype HttpClient interface { SetConfig(Config) Do(req *Request) (*Response, error) } è¿˜å¯ä»¥ä½¿ç”¨æµ‹è¯•å¥—ä»¶ genapi.TestHttpClient æ¥éªŒè¯ä½ çš„å®ç°æ˜¯å¦è¦†ç›–åŸºæœ¬ç”¨ä¾‹ï¼š\næ€»ç»“ genapi é€šè¿‡æ³¨è§£é©±åŠ¨çš„æ–¹å¼ï¼Œè®©å¼€å‘è€…å¯ä»¥ï¼š\nä¸“æ³¨äºæ¥å£å®šä¹‰ï¼Œé¿å…ç¼–å†™é‡å¤ä»£ç  æé«˜å¼€å‘æ•ˆç‡ï¼Œé™ä½ç»´æŠ¤æˆæœ¬ ä½¿ä»£ç æ›´åŠ æ¸…æ™°å¯é  åŠ¨æ€æ›¿æ¢ HttpClient ","permalink":"https://lexcao.io/zh/posts/genapi/","summary":"\u003cp\u003eæœ¬æ–‡å°†ä¸ºå¤§å®¶ä»‹ç» genapiï¼Œä¸€ä¸ªç”¨äºè‡ªåŠ¨ç”Ÿæˆ Golang HTTP Client çš„ä»£ç åº“ã€‚å¦‚æœä½ å¯¹è¿™ä¸ªé¡¹ç›®æ„Ÿå…´è¶£ï¼Œå¯ä»¥è®¿é—® \u003ca href=\"https://lexcao.io/genapi/\"\u003egenapi å®˜ç½‘\u003c/a\u003e æˆ– \u003ca href=\"https://github.com/lexcao/genapi\"\u003eGitHub ä»“åº“\u003c/a\u003e è·å–æ›´å¤šæŠ€æœ¯ç»†èŠ‚ã€‚\u003c/p\u003e\n\u003ch1 id=\"ä»æ‰‹å·¥åˆ°è‡ªåŠ¨golang-http-client-çš„æ¼”è¿›ä¹‹è·¯\"\u003eä»æ‰‹å·¥åˆ°è‡ªåŠ¨ï¼šGolang HTTP Client çš„æ¼”è¿›ä¹‹è·¯\u003c/h1\u003e\n\u003cp\u003eåœ¨ Golang å¼€å‘ä¸­ï¼Œè°ƒç”¨ HTTP API æ˜¯ä¸€ä¸ªéå¸¸å¸¸è§çš„éœ€æ±‚ã€‚æœ¬æ–‡å°†é€šè¿‡ä¸€ä¸ªå¤©æ°” API çš„ç¤ºä¾‹ï¼Œä»‹ç» HTTP Client ä»£ç æ˜¯å¦‚ä½•ä»æ‰‹å·¥ç¼–å†™æ¼”è¿›åˆ°è‡ªåŠ¨ç”Ÿæˆçš„ã€‚è®©æˆ‘ä»¬çœ‹çœ‹è¿™ä¸ªç®€å•çš„å¤©æ°” APIï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eGET\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eapi\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eweather\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e?\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ecity\u003c/span\u003e=\u003cspan style=\"color:#a6e22e\"\u003eshanghai\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eResponse\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;temperature\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e25\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;humidity\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e60\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;condition\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;sunny\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"åŸå§‹æ‰‹å·¥ç¼–å†™\"\u003eåŸå§‹æ‰‹å·¥ç¼–å†™\u003c/h2\u003e\n\u003cp\u003eæœ€åˆï¼Œæˆ‘ä»¬å¯èƒ½ä¼šç›´æ¥ç¼–å†™å¦‚ä¸‹ä»£ç ï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003egetWeather\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ecity\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e) (\u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eWeather\u003c/span\u003e, \u003cspan style=\"color:#66d9ef\"\u003eerror\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003eresp\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ehttp\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eGet\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;https://api.weather.com/api/weather?city=\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ecity\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003edefer\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eresp\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eBody\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eClose\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eweather\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eWeather\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ejson\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eNewDecoder\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eresp\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eBody\u003c/span\u003e).\u003cspan style=\"color:#a6e22e\"\u003eDecode\u003c/span\u003e(\u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eweather\u003c/span\u003e); \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eweather\u003c/span\u003e, \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eè¿™ç§æ–¹å¼ç®€å•ç›´æ¥ï¼Œä½†å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eURL ç¡¬ç¼–ç åœ¨ä»£ç ä¸­\u003c/li\u003e\n\u003cli\u003eå‚æ•°æ‹¼æ¥å®¹æ˜“äº§ç”Ÿé”™è¯¯\u003c/li\u003e\n\u003cli\u003eé”™è¯¯å¤„ç†é€»è¾‘é‡å¤\u003c/li\u003e\n\u003cli\u003eå“åº”è§£æä»£ç é‡å¤\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"æ¨¡æ¿åŒ–è¯·æ±‚\"\u003eæ¨¡æ¿åŒ–è¯·æ±‚\u003c/h2\u003e\n\u003cp\u003eä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œæˆ‘ä»¬å¼€å§‹å¯¹ä»£ç è¿›è¡ŒæŠ½è±¡å’Œæ¨¡æ¿åŒ–æ”¹é€ ï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003etype\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eClient\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estruct\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003ebaseURL\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003eclient\u003c/span\u003e  \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ehttp\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eClient\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e (\u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eClient\u003c/span\u003e) \u003cspan style=\"color:#a6e22e\"\u003edoRequest\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003emethod\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003epath\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003equery\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eurl\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eValues\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eresult\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einterface\u003c/span\u003e{}) \u003cspan style=\"color:#66d9ef\"\u003eerror\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003eu\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003e_\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eurl\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eParse\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ebaseURL\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003epath\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003eu\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eRawQuery\u003c/span\u003e = \u003cspan style=\"color:#a6e22e\"\u003equery\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eEncode\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003ereq\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ehttp\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eNewRequest\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003emethod\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eu\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eString\u003c/span\u003e(), \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003eresp\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eclient\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eDo\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ereq\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003edefer\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eresp\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eBody\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eClose\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ejson\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eNewDecoder\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eresp\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eBody\u003c/span\u003e).\u003cspan style=\"color:#a6e22e\"\u003eDecode\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eresult\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e (\u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eClient\u003c/span\u003e) \u003cspan style=\"color:#a6e22e\"\u003eGetWeather\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ecity\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e) (\u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eWeather\u003c/span\u003e, \u003cspan style=\"color:#66d9ef\"\u003eerror\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003equery\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eurl\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eValues\u003c/span\u003e{}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003equery\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eSet\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;city\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003ecity\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eweather\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eWeather\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003edoRequest\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;GET\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/api/weather\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003equery\u003c/span\u003e, \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eweather\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eweather\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eè¿™æ ·çš„æ”¹è¿›å¸¦æ¥äº†ä»¥ä¸‹å¥½å¤„ï¼š\u003c/p\u003e","title":"ä»‹ç» genapiï¼šä¸€ä¸ª Golang HTTP Client ç”Ÿæˆä»£ç åº“"},{"content":"ç¿»è¯‘è‡ª The Double-Entry Counting Method\nä»‹ç» æœ¬æ–‡æ˜¯ä¸€ä»½å…³äºå¤å¼è®°è´¦çš„ç®€è¦ä»‹ç»ï¼Œä»è®¡ç®—æœºç§‘å­¦å®¶çš„è§’åº¦æ’°å†™ã€‚å®ƒè¯•å›¾ä»¥å°½å¯èƒ½ç®€å•çš„æ–¹æ³•è§£é‡ŠåŸºç¡€è®°è´¦ï¼Œç®€åŒ–ä¼šè®¡ä¸­é€šå¸¸æ¶‰åŠåˆ°çš„æŸäº›ç‰¹æ®Šæ€§ã€‚å®ƒä¹Ÿä»£è¡¨äº† Beancount çš„å·¥ä½œæ–¹å¼ï¼Œå¹¶ä¸”å¯¹æ‰€æœ‰ä½¿ç”¨çº¯æ–‡æœ¬è®°è´¦çš„ç”¨æˆ·éƒ½åº”è¯¥é€‚ç”¨ã€‚\nè¯·æ³¨æ„ï¼Œæˆ‘ä¸æ˜¯ä¼šè®¡å¸ˆï¼Œåœ¨ç¼–å†™æ­¤æ–‡æ¡£è¿‡ç¨‹ä¸­ï¼Œæˆ‘å¯èƒ½ä½¿ç”¨ä¸ä¼ ç»Ÿä¼šè®¡åŸ¹è®­æ•™æˆç•¥æœ‰ä¸åŒæˆ–ä¸å¸¸è§çš„æœ¯è¯­ã€‚æˆ‘ç»™è‡ªå·±æˆæƒåˆ›é€ ä¸€äº›æ–°çš„ã€ç”šè‡³æ˜¯ä¸å¯»å¸¸çš„ä¸œè¥¿ï¼Œä»¥ä¾¿å°†è¿™äº›æƒ³æ³•å°½å¯èƒ½ç®€å•æ˜äº†åœ°è§£é‡Šç»™é‚£äº›å¯¹å®ƒä»¬ä¸ç†Ÿæ‚‰çš„äººã€‚\næˆ‘è®¤ä¸ºæ¯ä¸ªé«˜ä¸­ç”Ÿéƒ½åº”è¯¥åœ¨é«˜ä¸­é˜¶æ®µå­¦ä¹ å¤å¼è®°è´¦æ³•ï¼Œå› ä¸ºè¿™æ˜¯ä¸€é¡¹æå…¶æœ‰ç”¨çš„ç»„ç»‡æŠ€èƒ½ï¼Œå¹¶ä¸”æˆ‘å¸Œæœ›è¿™ç¯‡æ–‡ç« å¯ä»¥å¸®åŠ©å°†å…¶çŸ¥è¯†ä¼ æ’­åˆ°ä¸“ä¸šåœˆä»¥å¤–çš„é¢†åŸŸã€‚\nå¤å¼è®°è´¦çš„åŸºç¡€ å¤å¼è®°è´¦æ³•åªæ˜¯ä¸€ç§ç®€å•çš„è®¡æ•°æ–¹æ³•ï¼Œåªæœ‰ä¸€äº›ç®€å•çš„è§„åˆ™ã€‚\nè®©æˆ‘ä»¬ä»å®šä¹‰è´¦æˆ·çš„æ¦‚å¿µå¼€å§‹ã€‚è´¦æˆ·æ˜¯ä¸€ç§å¯ä»¥å®¹çº³ç‰©å“çš„ä¸œè¥¿ï¼Œå°±åƒä¸€ä¸ªè¢‹å­ã€‚å®ƒç”¨äºè®¡ç®—å’Œç´¯ç§¯ç‰©å“ã€‚è®©æˆ‘ä»¬ç”»ä¸€æ¡æ°´å¹³ç®­å¤´æ¥ç›´è§‚åœ°è¡¨ç¤ºéšç€æ—¶é—´æ¨ç§»è´¦æˆ·ä¸­ä¸æ–­å˜åŒ–çš„å†…å®¹ï¼š\nå·¦ä¾§ï¼Œæ˜¯æè¿°è¿‡å»ï¼Œè€Œå³ä¾§åˆ™æ˜¯ä¸æ–­å¢é•¿çš„æ—¶é—´ï¼šç°åœ¨ã€æœªæ¥ç­‰ã€‚\nç°åœ¨ï¼Œè®©æˆ‘ä»¬å‡è®¾è´¦æˆ·åªèƒ½åŒ…å«ä¸€ç§ä¸œè¥¿ï¼Œä¾‹å¦‚ç¾å…ƒã€‚æ‰€æœ‰çš„è´¦æˆ·éƒ½ä»¥é›¶ç¾å…ƒçš„ç©ºå†…å®¹å¼€å§‹ã€‚æˆ‘ä»¬å°†ç§°è´¦æˆ·ä¸­å•ä½æ•°é‡ä¸ºè´¦æˆ·çš„ ä½™é¢ ï¼ˆBalanceï¼‰ã€‚è¯·æ³¨æ„ï¼Œå®ƒä»£è¡¨äº†ç‰¹å®šæ—¶é—´ç‚¹ä¸Šå…¶å†…å®¹çš„æƒ…å†µã€‚æˆ‘ä¼šä½¿ç”¨ä¸€ä¸ªæ•°å­—åœ¨å¸æˆ·æ—¶é—´è½´ä¸Šæ–¹ç»˜åˆ¶ä½™é¢ï¼š\nè´¦æˆ·çš„å†…å®¹ä¼šéšç€æ—¶é—´è€Œå˜åŒ–ã€‚ä¸ºäº†æ”¹å˜è´¦æˆ·çš„å†…å®¹ï¼Œæˆ‘ä»¬å¿…é¡»å‘å…¶æ·»åŠ ä¸€äº›ä¸œè¥¿ã€‚æˆ‘ä»¬å°†è¿™ä¸ªæ·»åŠ ç§°ä¸ºå¯¹è´¦æˆ·çš„è®°è´¦ï¼Œæˆ‘ä¼šåœ¨è¯¥è´¦æˆ·çš„æ—¶é—´è½´ä¸Šç”»ä¸€ä¸ªå¸¦åœˆæ•°å­—æ¥è¡¨ç¤ºè¿™ç§å˜åŒ–ï¼Œä¾‹å¦‚ï¼šå‘è¯¥è´¦æˆ·ä¸­æ·»åŠ  100 ç¾å…ƒï¼š\nç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è®°è´¦åç»˜åˆ¶æ›´æ–°åçš„è´¦æˆ·ä½™é¢ï¼Œå¹¶åœ¨å…¶åé¢åŠ ä¸Šå¦ä¸€ä¸ªå°æ•°å­—ï¼š\nè´¦æˆ·åŠ ä¸Š 100 ç¾å…ƒåï¼Œä½™é¢ç°åœ¨ä¸º 100 ç¾å…ƒã€‚\næˆ‘ä»¬ä¹Ÿå¯ä»¥ä»è´¦æˆ·ä¸­å‡å»ä¸€å®šé‡‘é¢ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å‡å» 25 ç¾å…ƒï¼Œè¿™æ ·è´¦æˆ·ä½™é¢å°±å˜æˆäº† 75 ç¾å…ƒï¼š\nå¦‚æœæˆ‘ä»¬å‡å»çš„é‡‘é¢è¶…è¿‡è´¦æˆ·ä½™é¢ï¼Œè´¦æˆ·ä½™é¢ä¹Ÿå¯èƒ½å˜ä¸ºè´Ÿæ•°ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬ä»è¯¥è´¦æˆ·ä¸­å–å‡º 200 ç¾å…ƒï¼Œåˆ™ä½™é¢ç°åœ¨å˜ä¸º -125 ç¾å…ƒï¼š\nè´¦æˆ·ä¸­åŒ…å«è´Ÿæ•°æ˜¯å®Œå…¨æ­£å¸¸çš„ã€‚è¯·è®°ä½ï¼Œæˆ‘ä»¬æ‰€åšçš„åªæ˜¯è®¡æ•°ã€‚å¾ˆå¿«æˆ‘ä»¬ä¼šçœ‹åˆ°ï¼Œæœ‰äº›è´¦æˆ·åœ¨å®ƒä»¬çš„æ—¶é—´è½´ä¸Šå°†ä¿æŒè´Ÿä½™é¢ã€‚\næŠ¥è¡¨ ï¼ˆStatementï¼‰ å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæˆ‘åœ¨å‰ä¸€èŠ‚ä¸­å†™ä¸‹çš„æ—¶é—´çº¿è®°è´¦ä¸æœºæ„ä¸ºæ¯ä¸ªå®¢æˆ·ç»´æŠ¤å¹¶é€šå¸¸é€šè¿‡é‚®ä»¶å‘é€çš„çº¸è´¨è´¦æˆ·æŠ¥è¡¨ç±»ä¼¼ï¼š\næ—¶é—´ æè¿° é‡‘é¢ ä½™é¢ 2016-10-02 â€¦ 100.00 1100.00 2016-10-05 .. -25.00 1075.00 2016-10-06 .. -200.00 875.00 æœ€ç»ˆç»“ä½™ 875.00 æœ‰æ—¶å€™é‡‘é¢æ ä¼šè¢«åˆ†æˆä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¾ç¤ºæ­£æ•°ï¼Œå¦ä¸€ä¸ªæ˜¾ç¤ºè´Ÿæ•°ï¼š\næ—¶é—´ æè¿° æ‰£æ¬¾ ï¼ˆDebitï¼‰ å…¥è´¦ ï¼ˆCreditï¼‰ ä½™é¢ ï¼ˆBalanceï¼‰ 2016-10-02 â€¦ 100.00 1100.00 2016-10-05 .. 25.00 1075.00 2016-10-06 .. 200.00 875.00 æœ€ç»ˆç»“ä½™ 875.00 åœ¨è¿™é‡Œï¼Œâ€œæ‰£æ¬¾ ï¼ˆDebitï¼‰â€ è¡¨ç¤º â€œä»ä½ çš„è´¦æˆ·ä¸­æ‰£é™¤â€ï¼Œè€Œ â€œå…¥è´¦ ï¼ˆCreditï¼‰â€ è¡¨ç¤º â€œå­˜å…¥ä½ çš„è´¦æˆ·â€ã€‚æœ‰æ—¶ä¼šä½¿ç”¨è¯è¯­ â€œå–æ¬¾ ï¼ˆWithdrawalsï¼‰â€ å’Œ â€œå­˜æ¬¾ ï¼ˆDepositsï¼‰â€ã€‚è¿™å®Œå…¨å–å†³äºä¸Šä¸‹æ–‡ï¼šå¯¹äºæ”¯ç¥¨å’Œå‚¨è“„è´¦æˆ·ï¼Œé€šå¸¸ä¼šæœ‰ä¸¤ç§ç±»å‹çš„è®°è´¦ï¼Œä½†å¯¹äºä¿¡ç”¨å¡è´¦æˆ·æ¥è¯´ï¼Œé€šå¸¸åªæ˜¾ç¤ºæ­£æ•°ï¼Œç„¶åå¶å°”è¿›è¡Œæœˆåº¦ä»˜æ¬¾ï¼Œå› æ­¤ä½¿ç”¨å•åˆ—æ ¼å¼ã€‚ ã€è¯‘è€…æ³¨ï¼šè¿™é‡Œ Debit å’Œ Credit å¯ä»¥ç¿»è¯‘ä¸º å€Ÿæ–¹ ï¼ˆDebitï¼‰ å’Œ è´·æ–¹ ï¼ˆCreditï¼‰ï¼Œè¿™é‡Œä¸ºäº†æ›´å¥½çš„ç†è§£é‡‘é’±çš„æµå‘ï¼Œä½¿ç”¨å¸¦æœ‰æ–¹å‘æ„å‘³çš„è¯ã€‘\næ— è®ºå¦‚ä½•ï¼Œâ€œä½™é¢â€ æ å§‹ç»ˆæ˜¾ç¤ºè´¦æˆ·åœ¨é‡‘é¢è®°å…¥åçš„ç»“ä½™ã€‚æœ‰æ—¶ï¼Œå¯¹è´¦å•æŒ‰æ—¶é—´å€’åºå‘ˆç°ã€‚\nå•å¼è®°è´¦ åœ¨è¿™ä¸ªæ•…äº‹ä¸­ï¼Œè¿™ä¸ªè´¦æˆ·å±äºæŸä¸ªäººã€‚æˆ‘ä»¬å°†ç§°å‘¼æ­¤äººä¸ºè´¦æˆ·æ‰€æœ‰è€…ã€‚è¯¥è´¦æˆ·å¯ä»¥ç”¨æ¥ä»£è¡¨ç°å®ä¸–ç•Œä¸­çš„ä¸€ä¸ªè´¦æˆ·ï¼Œä¾‹å¦‚ï¼Œæƒ³è±¡ä¸€ä¸‹æˆ‘ä»¬ä½¿ç”¨å®ƒæ¥ä»£è¡¨é“¶è¡Œé‡Œæ‰€æœ‰è€…æ”¯ç¥¨è´¦æˆ·çš„å†…å®¹ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°†é€šè¿‡ç»™å®ƒå‘½åæ¥æ ‡è®°è¯¥å¸æˆ·ï¼Œåœ¨æœ¬ä¾‹ä¸­ä¸º â€œæ”¯ç¥¨ ï¼ˆCheckingï¼‰â€ï¼š\næƒ³è±¡ä¸€ä¸‹ï¼ŒæŸä¸ªæ—¶åˆ»ï¼Œè¿™ä¸ªè´¦æˆ·çš„ä½™é¢ä¸º 1,000 ç¾å…ƒï¼Œå°±åƒæˆ‘åœ¨å›¾ä¸Šç”»çš„é‚£æ ·ã€‚ç°åœ¨ï¼Œå¦‚æœæ‰€æœ‰è€…ä»è¿™ä¸ªè´¦æˆ·ä¸­èŠ±è´¹äº† 79 ç¾å…ƒï¼Œæˆ‘ä»¬ä¼šç”¨ä»¥ä¸‹æ–¹å¼è¡¨ç¤ºï¼š\næ­¤å¤–ï¼Œå¦‚æœæ”¯å‡ºæ˜¯åœ¨ é¤å… ï¼ˆRestaurantï¼‰ ç”¨é¤äº§ç”Ÿçš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç±»åˆ«æ ‡è®°æ¥æŒ‡ç¤ºè¿™ç¬”è®°è´¦çš„ç”¨é€”ã€‚æ¯”å¦‚è¯´ï¼Œâ€œé¤å…â€ï¼Œå°±åƒè¿™æ ·ï¼š\nç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬æœ‰å¾ˆå¤šè¿™æ ·çš„è®°è´¦ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™ä¸€ä¸ªè®¡ç®—æœºç¨‹åºæ¥ç´¯ç§¯æ¯ä¸ªç±»åˆ«çš„æ‰€æœ‰æ›´æ”¹ï¼Œå¹¶ä¸ºå®ƒä»¬ä¸­çš„æ¯ä¸€ä¸ªè®¡ç®—æ€»å’Œã€‚ä¾‹å¦‚ï¼Œè¿™å°†å‘Šè¯‰æˆ‘ä»¬æ€»å…±åœ¨é¤é¦†èŠ±è´¹äº†å¤šå°‘é’±ã€‚è¿™è¢«ç§°ä¸ºå•å¼è®°è´¦æ³•ã€‚\nä½†æˆ‘ä»¬ä¸ä¼šè¿™æ ·åšï¼Œæˆ‘ä»¬æœ‰æ›´å¥½çš„æ–¹æ³•ã€‚è¯·å†è€å¿ƒç­‰å¾…å‡ ä¸ªç« èŠ‚ã€‚\nå¤å¼è®°è´¦ ä¸€ä¸ªæ‰€æœ‰è€…å¯èƒ½æœ‰å¤šä¸ªè´¦æˆ·ã€‚æˆ‘å°†é€šè¿‡åœ¨åŒä¸€å¼ å›¾ä¸Šç»˜åˆ¶è®¸å¤šç±»ä¼¼çš„è´¦æˆ·æ—¶é—´çº¿æ¥è¡¨ç¤ºè¿™ä¸€ç‚¹ã€‚ä¸ä»¥å‰ä¸€æ ·å®ƒä»¬å¸¦æœ‰å”¯ä¸€çš„åç§°æ ‡ç­¾ã€‚å‡è®¾æ‰€æœ‰è€…æœ‰ä¸ä¹‹å‰ç›¸åŒçš„ â€œæ”¯ç¥¨ ï¼ˆCheckingï¼‰â€ è´¦æˆ·ï¼Œå¹¶ä¸”ç°åœ¨è¿˜æœ‰ä¸€ä¸ª â€œé¤å… ï¼ˆRestaurantï¼‰â€ è´¦æˆ·ï¼Œå¯ä»¥ç”¨äºç´¯ç§¯åœ¨é¤å…æ¶ˆè´¹çš„æ‰€æœ‰ç”¨é¤å¼€é”€ã€‚å®ƒçœ‹èµ·æ¥åƒè¿™æ ·ï¼š\nç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ä¸åƒä¹‹å‰é‚£æ ·å°†è®°è´¦å½’ç±»ä¸º â€œé¤å…ç±»åˆ«â€ï¼Œè€Œæ˜¯åˆ›å»ºä¸€ä¸ªåŒ¹é…çš„è®°è´¦åœ¨ â€œé¤å…â€ è´¦æˆ·ä¸Šè®°å½•æˆ‘ä»¬èŠ±è´¹äº†å¤šå°‘é’±ç”¨äºç”¨é¤ï¼Œé‡‘é¢ä¸º 79 ç¾å…ƒï¼š\nâ€œé¤å…â€ è´¦æˆ·å’Œå…¶ä»–è´¦æˆ·ä¸€æ ·ï¼Œä¹Ÿæœ‰ä¸€ä¸ªç´¯ç§¯ä½™é¢ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥äº†è§£åˆ°æˆ‘ä»¬åœ¨ â€œé¤å…â€ æ€»å…±èŠ±è´¹äº†å¤šå°‘ã€‚è¿™ä¸è®¡ç®—æ”¯ç¥¨è´¦æˆ·ä¸­çš„å˜åŒ–å®Œå…¨å¯¹ç§°ã€‚\nç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ç§ç§°ä¸º â€œäº¤æ˜“ ï¼ˆTransactionï¼‰â€ çš„å¯¹è±¡æ¥å°†è¿™ä¸¤ä¸ªè®°è´¦å…³è”èµ·æ¥ï¼Œä»è€Œå½¢æˆä¸€ç§çˆ¶çº§æ¡†ã€‚\nè¯·æ³¨æ„ï¼Œæˆ‘ä»¬è¿˜å°† â€œåœ¨ Uncle Boons åƒæ™šé¤â€ ä¸æ­¤äº¤æ˜“å…³è”èµ·æ¥ã€‚ä¸€ç¬”äº¤æ˜“ä¹Ÿæœ‰ä¸€ä¸ªæ—¥æœŸï¼Œå®ƒçš„æ‰€æœ‰è®°è´¦éƒ½è®°å½•åœ¨è¯¥æ—¥æœŸå‘ç”Ÿã€‚æˆ‘ä»¬ç§°ä¹‹ä¸ºäº¤æ˜“æ—¥æœŸã€‚\nç°åœ¨æˆ‘ä»¬å¯ä»¥ä»‹ç»å¤å¼è®°è´¦ç³»ç»Ÿçš„åŸºæœ¬è§„åˆ™ï¼š\nä¸€ç¬”äº¤æ˜“çš„æ‰€æœ‰è´¦ç›®ä¹‹å’Œå¿…é¡»ç­‰äºé›¶ã€‚ The sum of all the postings of a transaction must equal zero. è®°ä½è¿™ä¸€ç‚¹ï¼Œå› ä¸ºè¿™æ˜¯å¤å¼è®°è´¦æ³•çš„åŸºç¡€å’Œæœ€é‡è¦çš„ç‰¹å¾ã€‚æœ‰ç€é‡è¦çš„åæœï¼Œæˆ‘å°†åœ¨æœ¬æ–‡ç¨åè®¨è®ºã€‚\nåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä»æ”¯ç¥¨è´¦æˆ·æ‰£é™¤ 79 ç¾å…ƒï¼Œå¹¶å°†å…¶ â€œè½¬ç§»â€ åˆ°é¤å…è´¦æˆ·ã€‚(79) + (-79) = 0ã€‚ ä¸ºäº†å¼ºè°ƒè¿™ä¸€ç‚¹ï¼Œæˆ‘åœ¨äº¤æ˜“çš„è®°è´¦ä¸‹é¢ç”»ä¸€ä¸ªå°æ±‚å’Œçº¿ï¼Œå°±åƒè¿™æ ·ï¼š\nè®¸å¤šè´¦æˆ· å¯èƒ½ä¼šæœ‰è®¸å¤šè¿™æ ·çš„äº¤æ˜“ï¼Œæ¶‰åŠè®¸å¤šä¸åŒçš„è´¦æˆ·ã€‚ä¾‹å¦‚ï¼Œå¦‚æœè´¦æˆ·æ‰€æœ‰è€…ç¬¬äºŒå¤©ç”¨ä¿¡ç”¨å¡æ”¯ä»˜äº†åˆé¤è´¹ç”¨ï¼Œåˆ™å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ª â€œä¿¡ç”¨å¡ ï¼ˆCredit cardï¼‰â€ è´¦æˆ·æ¥è¡¨ç¤ºï¼Œå¹¶å…·æœ‰ç›¸åº”çš„äº¤æ˜“æ¥è·Ÿè¸ªç°å®ä¸–ç•Œä¸­çš„ä¿¡ç”¨å¡ä½™é¢ï¼š\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ‰€æœ‰è€…åœ¨ä¸€å®¶åä¸º â€œEatalyâ€ çš„é¤å…èŠ±è´¹äº† 35 ç¾å…ƒã€‚æ‰€æœ‰è€…çš„ä¿¡ç”¨å¡ä¹‹å‰çš„ä½™é¢æ˜¯ -450 ç¾å…ƒï¼›æ”¯å‡ºåï¼Œæ–°ä½™é¢ä¸º -485 ç¾å…ƒã€‚\nå¯¹äºæ¯ä¸ªçœŸå®ä¸–ç•Œçš„è´¦æˆ·ï¼Œæ‰€æœ‰è€…éƒ½å¯ä»¥åƒæˆ‘ä»¬ä¸€æ ·åˆ›å»ºä¸€ä¸ªè®°è´¦è´¦æˆ·ã€‚æ­¤å¤–ï¼Œå¯¹äºæ¯ç§æ”¯å‡ºç±»åˆ«ï¼Œæ‰€æœ‰è€…è¿˜ä¼šåˆ›å»ºä¸€ä¸ªè®°è´¦è´¦æˆ·ã€‚åœ¨è¿™ä¸ªç³»ç»Ÿä¸­ï¼Œå¯ä»¥åˆ›å»ºæ— é™æ•°é‡çš„è´¦æˆ·ã€‚\nè¯·æ³¨æ„ï¼Œç¤ºä¾‹ä¸­çš„ä½™é¢æ˜¯è´Ÿæ•°ï¼›è¿™ä¸æ˜¯é”™è¯¯ã€‚ä¿¡ç”¨å¡è´¦æˆ·çš„ä½™é¢é€šå¸¸ä¸ºè´Ÿæ•°ï¼šå®ƒä»¬ä»£è¡¨ä½ æ¬ é“¶è¡Œçš„é‡‘é¢ï¼Œé“¶è¡Œåœ¨ä¿¡ç”¨ä¸Šå‘ä½ æä¾›äº†å€Ÿæ¬¾ã€‚å½“ä½ çš„ä¿¡ç”¨å¡å…¬å¸è·Ÿè¸ªä½ çš„æ”¯å‡ºæ—¶ï¼Œä»ä»–ä»¬è‡ªå·±çš„è§’åº¦å†™å‡ºå¯¹è´¦å•ï¼Œå¹¶å°†å…¶è¡¨ç¤ºä¸ºæ­£æ•°ã€‚å¯¹äºä½ æ¥è¯´ï¼Œè¿™äº›éƒ½æ˜¯æœ€ç»ˆéœ€è¦æ”¯ä»˜çš„é‡‘é¢ã€‚ä½†åœ¨æˆ‘ä»¬çš„è®°è´¦ç³»ç»Ÿä¸­ï¼Œåœ¨æ‰€æœ‰è€…çš„è§’åº¦ä¸‹è¡¨ç¤ºæ•°å­—ï¼Œåœ¨ä»–çœ‹æ¥ï¼Œè¿™æ˜¯ä»–æ¬ ä¸‹çš„è€Œä¸æ˜¯æ‹¥æœ‰çš„é’±ã€‚è€Œä»–æœ‰çš„æ˜¯ä¸€é¡¿é¥­ï¼ˆâ€œé¤å…â€ æ­£æ•°ï¼‰ã€‚\nå¤šæ¬¡è®°è´¦ æœ€åï¼Œäº¤æ˜“å¯èƒ½æœ‰è¶…è¿‡ä¸¤ä¸ªçš„è®°è´¦ï¼›äº‹å®ä¸Šï¼Œå®ƒä»¬å¯ä»¥æœ‰ä»»æ„æ•°é‡çš„è®°è´¦ã€‚å”¯ä¸€é‡è¦çš„æ˜¯å®ƒä»¬é‡‘é¢ä¹‹å’Œä¸ºé›¶ï¼ˆæ ¹æ®ä¸Šè¿°å¤å¼è®°è´¦è§„åˆ™ï¼‰ã€‚\nä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¦‚æœæ‰€æœ‰è€…åœ¨ 12 æœˆä»½å‘äº†å·¥èµ„ä¼šå‘ç”Ÿä»€ä¹ˆï¼š\nè¿™ä¸ªä¾‹å­ä¸­ä»–çš„æ€»å·¥èµ„è®°å½•ä¸º -2,905 ç¾å…ƒï¼ˆç¨åæˆ‘ä¼šè§£é‡Šç¬¦å·ï¼‰ã€‚å…¶ä¸­ 905 ç¾å…ƒç”¨äºç¼´ç¨ã€‚ä»–çš„ â€œå‡€â€ å·¥èµ„æ˜¯å‰©ä¸‹çš„ 2,000 ç¾å…ƒï¼Œå­˜å…¥äº†ä»–çš„â€œæ”¯ç¥¨è´¦æˆ·â€ï¼Œå¯¼è‡´è¯¥è´¦æˆ·ä½™é¢ä¸º 2,921 ç¾å…ƒï¼ˆä¹‹å‰çš„ä½™é¢ä¸º 921 + 2,000 = 2,921ï¼‰ã€‚æ­¤äº¤æ˜“æœ‰ä¸‰ä¸ªè®°è´¦ï¼š(+2000) + (-2905) + (+ 905) = 0ã€‚éµå®ˆå¤å¼è®°è´¦è§„åˆ™ã€‚\nç°åœ¨ï¼Œä½ å¯èƒ½ä¼šé—®ï¼šä¸ºä»€ä¹ˆä»–çš„å·¥èµ„è®°å½•ä¸ºè´Ÿæ•°ï¼Ÿè¿™é‡Œçš„æ¨ç†ä¸ä¸Šé¢çš„ä¿¡ç”¨å¡ç±»ä¼¼ï¼Œå°½ç®¡å¯èƒ½æ›´å¾®å¦™ä¸€äº›ã€‚è¿™äº›è´¦æˆ·å­˜åœ¨æ˜¯ä¸ºäº†ä»æ‰€æœ‰è€…çš„è§’åº¦è·Ÿè¸ªæ‰€æœ‰é‡‘é¢ã€‚æ‰€æœ‰è€…æä¾›å·¥ä½œï¼Œå¹¶ä»¥æ­¤æ¢å–é‡‘é’±å’Œç¨æ”¶ï¼ˆæ­£æ•°ï¼‰ã€‚æ‰€æä¾›çš„å·¥ä½œä»¥ç¾å…ƒå•ä½è®¡ä»·ã€‚å®ƒ â€œç¦»å¼€â€ äº†æ‰€æœ‰è€…ï¼ˆæƒ³è±¡ä¸€ä¸‹ï¼Œæ‰€æœ‰è€…å£è¢‹é‡Œå­˜æ”¾ç€æ½œåœ¨çš„å·¥ä½œï¼Œåœ¨æ¯å¤©ä¸Šç­æ—¶å°†æ½œåœ¨çš„å·¥ä½œäº¤ç»™å…¬å¸ï¼‰ã€‚ æ‰€æœ‰è€…ä»˜å‡ºäº†ä»·å€¼ 2905 ç¾å…ƒçš„åŠ³åŠ¨åŠ›ã€‚æˆ‘ä»¬æƒ³è¦è¿½è¸ªç»™å‡ºäº†å¤šå°‘åŠ³åŠ¨åŠ›ï¼Œå¹¶ä¸”ä½¿ç”¨ â€œè–ªæ°´â€ è´¦æˆ·æ¥å®Œæˆã€‚é‚£å°±æ˜¯ä»–æ€»è–ªæ°´ã€‚\nè¯·æ³¨æ„ï¼Œä¸ºäº†ä¿æŒç®€å•ï¼Œæˆ‘ä»¬å·²ç»ç®€åŒ–äº†è¿™ä¸ªå·¥èµ„æ”¯å‡ºäº¤æ˜“ã€‚æ›´çœŸå®çš„è–ªæ°´è®°å½•ä¼šæœ‰æ›´å¤šçš„è´¦æˆ·ï¼›æˆ‘ä»¬å°†åˆ†åˆ«æ ¸ç®—å·ç¨å’Œè”é‚¦ç¨é¢ï¼Œä»¥åŠç¤¾ä¼šä¿éšœå’ŒåŒ»ç–—ä¿é™©æ”¯ä»˜ã€æ‰£é™¤ã€é€šè¿‡å·¥ä½œæ”¯ä»˜çš„ä¿é™©è´¹å’Œåœ¨è¯¥æœŸé—´å†…ç´¯è®¡çš„ä¼‘å‡æ—¶é—´ã€‚ä½†å®ƒä¸ä¼šæ›´åŠ å¤æ‚ï¼šæ‰€æœ‰é‡‘é¢éƒ½å¯ä»¥ä»ä»–çš„å·¥èµ„å•ä¸­è½¬æ¢æˆä¸€ä¸ªå…·æœ‰æ›´å¤šè®°è´¦çš„å•ä¸€äº¤æ˜“ã€‚ç»“æ„ä»ç„¶ç›¸ä¼¼ã€‚\nè´¦æˆ·ç±»å‹ ç°åœ¨è®©æˆ‘ä»¬è½¬å‘æ‰€æœ‰è€…å¯ä»¥æ‹¥æœ‰çš„ä¸åŒç±»å‹çš„è´¦æˆ·ã€‚\nä½™é¢æˆ–å·®é¢ã€‚é¦–å…ˆï¼Œè´¦æˆ·ä¹‹é—´æœ€é‡è¦çš„åŒºåˆ«åœ¨äºæˆ‘ä»¬æ˜¯å¦å…³å¿ƒç‰¹å®šæ—¶é—´ç‚¹çš„ä½™é¢ï¼Œè¿˜æ˜¯åªå…³å¿ƒä¸€æ®µæ—¶é—´å†…çš„å·®å¼‚ã€‚ä¾‹å¦‚ï¼ŒæŸäººæ”¯ç¥¨æˆ–å‚¨è“„è´¦æˆ·çš„ä½™é¢æ˜¯ä¸€ä¸ªæœ‰æ„ä¹‰çš„æ•°å­—ï¼Œæ‰€æœ‰è€…å’Œç›¸åº”é“¶è¡Œéƒ½ä¼šå…³æ³¨å®ƒã€‚åŒæ ·åœ°ï¼ŒæŸäººä¿¡ç”¨å¡è´¦æˆ·ä¸Šæ¬ æ¬¾æ€»é¢ä¹Ÿå¾ˆé‡è¦ã€‚å¯¹äºæˆ¿å±‹è´·æ¬¾å‰©ä½™è¿˜æ¬¾é‡‘é¢ä¹Ÿæ˜¯å¦‚æ­¤ã€‚\nå¦ä¸€æ–¹é¢ï¼ŒæŸäººè‡ªå‡ºç”Ÿä»¥æ¥çš„é¤å…æ”¯å‡ºæ€»é¢å¹¶ä¸ç‰¹åˆ«æ„Ÿå…´è¶£ã€‚å¯¹äºè¿™ä¸ªè´¦æˆ·ï¼Œæˆ‘ä»¬å¯èƒ½å…³å¿ƒçš„æ˜¯åœ¨ç‰¹å®šæ—¶é—´æ®µå†…å‘ç”Ÿçš„é¤å…æ”¯å‡ºé‡‘é¢ã€‚ä¾‹å¦‚ï¼Œâ€œä¸Šä¸ªæœˆä½ åœ¨é¤é¦†èŠ±äº†å¤šå°‘é’±ï¼Ÿâ€æˆ–è€…ä¸Šå­£åº¦ã€å»å¹´ç­‰ã€‚åŒæ ·åœ°ï¼ŒæŸäººå‡ å¹´å‰å¼€å§‹åœ¨å…¬å¸å·¥ä½œä»¥æ¥æ‰€è·å¾—çš„æ€»è–ªèµ„æ”¶å…¥å¹¶ä¸é‡è¦ã€‚ä½†æˆ‘ä»¬ä¼šå…³å¿ƒä¸€ä¸ªç¨åŠ¡å¹´åº¦å†…æ‰€èµšå–çš„æ€»æ”¶å…¥ï¼Œå› ä¸ºå®ƒç”¨äºå‘ç¨åŠ¡éƒ¨é—¨æŠ¥å‘Šè‡ªå·±çš„æ”¶å…¥ã€‚\nåœ¨æŸä¸€æ—¶é—´ç‚¹ä¸Šä½™é¢æœ‰æ„ä¹‰çš„è´¦æˆ·ç§°ä¸ºèµ„äº§è´Ÿå€ºè¡¨è´¦æˆ·ã€‚è¿™ç±»è´¦æˆ·åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼š\nâ€œèµ„äº§ ï¼ˆAssetsï¼‰â€ å’Œ â€œè´Ÿå€º ï¼ˆLiabilitiesï¼‰â€ã€‚\nå¦å¤–ä¸€äº›è´¦æˆ·ï¼Œä¹Ÿå°±æ˜¯é‚£äº›ä½™é¢å¹¶ä¸ç‰¹åˆ«é‡è¦ä½†æˆ‘ä»¬æœ‰å…´è¶£è®¡ç®—ä¸€æ®µæ—¶é—´å†…å˜åŒ–çš„è´¦æˆ·è¢«ç§°ä¸º\næŸç›Šè¡¨è´¦æˆ·ã€‚åŒæ ·åœ°ï¼Œå®ƒä»¬åˆ†ä¸ºä¸¤ç§ï¼šâ€œæ”¶å…¥ ï¼ˆIncomeï¼‰â€ å’Œ â€œæ”¯å‡º ï¼ˆExpensesï¼‰â€ã€‚\næ™®é€šç¬¦å·ã€‚å…¶æ¬¡ï¼Œæˆ‘ä»¬è€ƒè™‘è´¦æˆ·ä½™é¢çš„å¸¸è§„æ ‡è®°ã€‚å¤å¼è®°è´¦æ³•ç»å¤§å¤šæ•°è´¦æˆ·çš„ä½™é¢å¾€å¾€å…·æœ‰å§‹ç»ˆä¸ºæ­£æˆ–å§‹ç»ˆä¸ºè´Ÿçš„ç¬¦å·ï¼ˆå°½ç®¡å¦‚å‰æ‰€è¿°ï¼Œä¸€ä¸ªè´¦æˆ·çš„ä½™é¢å¯èƒ½ä¼šæ”¹å˜ç¬¦å·ï¼‰ã€‚è¿™å°±æ˜¯æˆ‘ä»¬å°†åŒºåˆ†ä¸Šè¿°å‡ å¯¹å¸æˆ·çš„æ–¹å¼ï¼š\nå¯¹äºèµ„äº§è´Ÿå€ºè¡¨è´¦æˆ·ï¼Œèµ„äº§é€šå¸¸å…·æœ‰æ­£ä½™é¢ï¼Œè€Œè´Ÿå€ºé€šå¸¸å…·æœ‰è´Ÿä½™é¢ã€‚\nå¯¹äºæŸç›Šè¡¨è´¦æˆ·ï¼Œæ”¯å‡ºé€šå¸¸å…·æœ‰æ­£ä½™é¢ï¼Œè€Œæ”¶å…¥é€šå¸¸å…·æœ‰è´Ÿä½™é¢ã€‚\næ€»ç»“ä¸ºä»¥ä¸‹è¡¨æ ¼ï¼š\nä½™é¢ï¼šæ­£ï¼ˆ+ï¼‰ ä½™é¢ï¼šè´Ÿï¼ˆ-ï¼‰ åœ¨æŸä¸€æ—¶é—´ç‚¹ä¸Šä½™é¢æ•°é¢å¾ˆé‡è¦ï¼ˆèµ„äº§è´Ÿå€ºè¡¨ï¼‰ èµ„äº§Assets è´Ÿå€ºLiabilities éšç€æ—¶é—´çš„æ¨ç§»ä½™é¢å˜åŒ–å¾ˆé‡è¦ï¼ˆæŸç›Šè¡¨ï¼‰ æ”¯å‡ºExpenses æ”¶å…¥Income è®©æˆ‘ä»¬è®¨è®ºæ¯ç§ç±»å‹çš„è´¦æˆ·å¹¶æä¾›ä¸€äº›æ¡ˆä¾‹ï¼Œè¿™æ ·å®ƒå°±ä¸ä¼šå¤ªæŠ½è±¡ã€‚\nèµ„äº§ ï¼ˆAssets +ï¼‰ èµ„äº§è´¦æˆ·ä»£è¡¨æ‰€æœ‰è€…æ‹¥æœ‰çš„ä¸œè¥¿ã€‚ä¸€ä¸ªå…¸å‹çš„ä¾‹å­æ˜¯é“¶è¡Œè´¦æˆ·ã€‚å¦ä¸€ä¸ªä¾‹å­æ˜¯â€œç°é‡‘ ï¼ˆCashï¼‰ â€è´¦æˆ·ï¼Œå®ƒè®°å½•ä½ é’±åŒ…é‡Œæœ‰å¤šå°‘é’±ã€‚æŠ•èµ„ä¹Ÿæ˜¯èµ„äº§ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒä»¬çš„å•ä½ä¸æ˜¯ç¾å…ƒï¼Œè€Œæ˜¯æŸäº›å…±åŒåŸºé‡‘æˆ–è‚¡ç¥¨çš„ä¸€å®šæ•°é‡ä»½é¢ï¼‰ã€‚æœ€åï¼Œå¦‚æœä½ æ‹¥æœ‰ä¸€æ‰€æˆ¿å±‹ï¼Œåˆ™è¯¥æˆ¿å±‹æœ¬èº«è¢«è§†ä¸ºä¸€é¡¹èµ„äº§ï¼ˆå…¶å¸‚åœºä»·å€¼éšæ—¶é—´æ³¢åŠ¨ï¼‰ã€‚\nè´Ÿå€º ï¼ˆLiabilities -ï¼‰ è´Ÿå€ºè´¦æˆ·ä»£è¡¨æ‰€æœ‰è€…æ‰€æ¬ çš„ä¸œè¥¿ã€‚æœ€å¸¸è§çš„ä¾‹å­æ˜¯ä¿¡ç”¨å¡ã€‚åŒæ ·ï¼Œé“¶è¡Œæä¾›çš„å¯¹è´¦å•ä¼šæ˜¾ç¤ºæ­£æ•°ï¼Œä½†ä»ä½ è‡ªå·±çš„è§’åº¦æ¥çœ‹ï¼Œå®ƒä»¬æ˜¯è´Ÿæ•°ã€‚è´·æ¬¾ä¹Ÿæ˜¯ä¸€ç§è´Ÿå€ºè´¦æˆ·ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ åœ¨æˆ¿å±‹ä¸ŠæŠµæŠ¼äº†ä¸€ç¬”æŠµæŠ¼è´·æ¬¾ï¼Œåˆ™è¿™æ˜¯ä½ æ¬ ä¸‹çš„é’±ï¼Œå¹¶é€šè¿‡ä¸€ä¸ªå¸¦æœ‰è´Ÿé‡‘é¢çš„å¸æˆ·æ¥è·Ÿè¸ªã€‚éšç€æ¯ä¸ªæœˆå¿è¿˜æŒ‰æ­ä»˜æ¬¾ï¼Œè¿™ä¸ªæ•°å­—ä¼šå¢åŠ ï¼ˆå³å…¶ç»å¯¹å€¼éšæ—¶é—´å˜å°è€Œå˜å°ï¼Œä¾‹å¦‚ -120,000 \u0026gt; -117,345ï¼‰ã€‚\næ”¯å‡º ï¼ˆExpenses +ï¼‰ æ”¯å‡ºè´¦æˆ·ä»£è¡¨ä½ å·²ç»æ”¶åˆ°çš„æŸäº›ä¸œè¥¿ï¼Œå¯èƒ½æ˜¯é€šè¿‡äº¤æ¢å…¶ä»–ç‰©å“æ¥è´­ä¹°çš„ã€‚è¿™ç§ç±»å‹çš„è´¦æˆ·ä¼¼ä¹å¾ˆè‡ªç„¶ï¼šé£Ÿç‰©ã€é¥®æ–™ã€æœè£…ã€ç§Ÿé‡‘ã€èˆªç­ã€é…’åº—å’Œå¤§å¤šæ•°å…¶ä»–é€šå¸¸æ”¯é…æ”¶å…¥æ‰€èŠ±è´¹çš„ç±»åˆ«ã€‚ç„¶è€Œï¼Œç¨æ¬¾ä¹Ÿé€šå¸¸ç”±ä¸€ä¸ªæ”¯å‡ºè´¦æˆ·è·Ÿè¸ªï¼šå½“ä½ è·å¾—ä¸€äº›å·¥èµ„æ”¶å…¥æ—¶ï¼Œæºå¤´æ‰£é™¤çš„ç¨æ¬¾é‡‘é¢ä¼šç«‹å³è®°å½•ä¸ºä¸€ç¬”æ”¯å‡ºã€‚æŠŠå®ƒçœ‹ä½œæ˜¯æ”¯ä»˜ä½ åœ¨æ•´å¹´ä¸­äº«å—åˆ°çš„æ”¿åºœæœåŠ¡ã€‚\næ”¶å…¥ ï¼ˆIncome -ï¼‰ æ”¶å…¥è´¦æˆ·ç”¨äºè®¡ç®—ä½ ä¸ºäº†è·å¾—å…¶ä»–ä¸œè¥¿ï¼ˆé€šå¸¸æ˜¯èµ„äº§æˆ–è´¹ç”¨ï¼‰è€Œæ”¾å¼ƒçš„æŸäº›ä¸œè¥¿çš„ä»·å€¼ã€‚å¯¹äºå¤§å¤šæ•°æœ‰å·¥ä½œçš„äººæ¥è¯´ï¼Œè¿™å°±æ˜¯ä»–ä»¬æ—¶é—´çš„ä»·å€¼ï¼ˆè–ªæ°´æ”¶å…¥ï¼‰ã€‚å…·ä½“æ¥è¯´ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬è°ˆè®ºçš„æ˜¯æ€»æ”¶å…¥ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æ¯å¹´èµšå– 12 ä¸‡ç¾å…ƒçš„è–ªæ°´ï¼Œé‚£ä¸ªæ•°å­—å°±æ˜¯ 12 ä¸‡ç¾å…ƒï¼Œè€Œä¸æ˜¯æ”¯ä»˜ç¨æ¬¾åå‰©ä½™çš„é‡‘é¢ã€‚å…¶ä»–ç±»å‹çš„æ”¶å…¥åŒ…æ‹¬ä»æŠ•èµ„ä¸­è·å¾—çš„è‚¡æ¯æˆ–å€ºåˆ¸åˆ©æ¯æ”¯å‡ºç­‰ã€‚è¿˜æœ‰ä¸€äº›å¥‡æ€ªçš„äº‹æƒ…å¯ä»¥è¢«è®°å½•ä¸ºæ”¶å…¥ï¼Œæ¯”å¦‚ä»ä¿¡ç”¨å¡è¿”ç°æˆ–æŸäººé€ç»™ä½ ç¤¼ç‰©ç­‰æ‰€å¾—åˆ°å›æŠ¥ä»·å€¼ã€‚\nåœ¨ Beancount ä¸­ï¼Œæ‰€æœ‰çš„è´¦æˆ·åç§°éƒ½å¿…é¡»ä¸ä¹‹å‰æè¿°è¿‡çš„è´¦æˆ·ç±»å‹ä¹‹ä¸€ç›¸å…³è”ã€‚ç”±äºä¸€ä¸ªè´¦æˆ·çš„ç±»å‹åœ¨å…¶ç”Ÿå‘½å‘¨æœŸå†…æ°¸è¿œä¸ä¼šæ”¹å˜ï¼Œå› æ­¤æˆ‘ä»¬å°†å…¶ç±»å‹ä½œä¸ºå‰ç¼€ï¼Œå¹¶æŒ‰ç…§æƒ¯ä¾‹å°†å…¶ä½œä¸ºå¸æˆ·åç§°çš„ä¸€éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œé¤å…çš„åˆæ ¼å¸æˆ·åç§°å°†æ˜¯ Expenses:Restaurantã€‚å¯¹äºé“¶è¡Œæ”¯ç¥¨è´¦æˆ·ï¼Œåˆæ ¼å¸æˆ·åç§°å°†æ˜¯ Assets:Checkingã€‚\né™¤æ­¤ä¹‹å¤–ï¼Œä½ å¯ä»¥ä¸ºä½ çš„è´¦æˆ·é€‰æ‹©ä»»ä½•å–œæ¬¢çš„åç§°ã€‚ä½ å¯ä»¥åˆ›å»ºå°½å¯èƒ½å¤šçš„è´¦æˆ·ï¼Œå¹¶ä¸”æ­£å¦‚æˆ‘ä»¬ç¨åå°†çœ‹åˆ°çš„é‚£æ ·ï¼Œä½ å¯ä»¥æŒ‰å±‚æ¬¡ç»“æ„ç»„ç»‡å®ƒä»¬ã€‚æˆªè‡³æœ¬æ–‡æ’°å†™æ—¶ï¼Œæˆ‘ä½¿ç”¨äº†è¶…è¿‡ 700 ä¸ªè´¦æˆ·æ¥è·Ÿè¸ªæˆ‘çš„ä¸ªäººäº¤æ˜“ã€‚\nç°åœ¨è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹æˆ‘ä»¬çš„ä¾‹å­ï¼Œå¹¶æ·»åŠ æ›´å¤šè´¦æˆ·ï¼š\nå‡è®¾è¿˜æœ‰æ›´å¤šçš„äº¤æ˜“ï¼š\nâ€¦ ç”šè‡³æ›´å¤šï¼š\næœ€åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨è´¦æˆ·åç§°å‰åŠ ä¸Šç±»å‹æ¥ä¸ºè¿™äº›è´¦æˆ·ä¸­çš„æ¯ä¸€ä¸ªæ ‡è®°å‡ºå››ç§ä¸åŒçš„è´¦æˆ·ç±»å‹ï¼š\nä¸€ä¸ªè¿½è¸ªä¸ªäººäº¤æ˜“çš„çœŸå®è´¦æœ¬å¯èƒ½æ¯å¹´åŒ…å«æ•°åƒç¬”äº¤æ˜“ã€‚ä½†åŸåˆ™ä»ç„¶ç®€å•ä¸”ç›¸åŒï¼šåœ¨ä¸€æ®µæ—¶é—´å†…å°†è®°è´¦åº”ç”¨äºè´¦æˆ·ï¼Œå¹¶å¿…é¡»å°†å…¶å½’å±åˆ°äº¤æ˜“ä¸­ï¼Œåœ¨æ­¤äº¤æ˜“ä¸­ï¼Œæ‰€æœ‰è®°è´¦çš„æ€»å’Œä¸ºé›¶ã€‚\nå½“ä½ ä¸ºä¸€ç»„è´¦æˆ·è®°è´¦æ—¶ï¼Œå®è´¨ä¸Šæ˜¯åœ¨æè¿°æ‰€æœ‰å¸æˆ·éšæ—¶é—´å‘ç”Ÿçš„æ‰€æœ‰è®°è´¦ï¼Œå—è§„åˆ™çº¦æŸã€‚ä½ æ­£åœ¨åˆ›å»ºè¿™äº›è®°è´¦çš„æ•°æ®åº“ã€‚ä½ æ­£åœ¨ â€œè®°è´¦â€ï¼Œå³ä¼ ç»Ÿæ„ä¹‰ä¸Šæ‰€æœ‰äº¤æ˜“çš„è´¦æœ¬ã€‚æœ‰äº›äººç§°ä¹‹ä¸º â€œç»´æŠ¤æ—¥å¿—â€ã€‚\næˆ‘ä»¬ç°åœ¨å°†æŠŠæ³¨æ„åŠ›è½¬å‘ä»è¿™äº›æ•°æ®ä¸­è·å–æœ‰ç”¨ä¿¡æ¯ï¼Œæ€»ç»“è´¦æœ¬ä¸­çš„ä¿¡æ¯ã€‚\nè¯•ç®—å¹³è¡¡è¡¨ ï¼ˆTrail Balanceï¼‰ ä»¥æˆ‘ä»¬ä¸Šä¸€ä¸ªä¾‹å­ä¸ºä¾‹ï¼šæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°é‡æ–°æ’åˆ—æ‰€æœ‰è´¦æˆ·ï¼Œä½¿å¾—æ‰€æœ‰èµ„äº§è´¦æˆ·å‡ºç°åœ¨é¡¶éƒ¨ï¼Œç„¶åæ˜¯æ‰€æœ‰è´Ÿå€ºè´¦æˆ·ã€æ”¶å…¥è´¦æˆ·å’Œæœ€åæ˜¯æ”¯å‡ºè´¦æˆ·ã€‚æˆ‘ä»¬åªæ˜¯æ”¹å˜äº†é¡ºåºè€Œæ²¡æœ‰ä¿®æ”¹äº¤æ˜“ç»“æ„ï¼Œä»¥ä¾¿å°†æ¯ç§ç±»å‹çš„å¸æˆ·åˆ†ç»„åœ¨ä¸€èµ·ï¼š\næˆ‘ä»¬é‡æ–°æ’åˆ—äº†è´¦æˆ·ï¼Œèµ„äº§è´¦æˆ·ä½äºé¡¶éƒ¨åˆ†ç»„ï¼Œç„¶åæ˜¯è´Ÿå€ºè´¦æˆ·ï¼Œæ¥ç€æ˜¯ä¸€äº›æƒç›Š ï¼ˆEquityï¼‰è´¦æˆ·ï¼ˆæˆ‘ä»¬åˆšåˆšå¼•å…¥è¿™ä¸ªè´¦æˆ·ï¼Œæ›´å¤šå†…å®¹å°†åœ¨åé¢è®¨è®ºï¼‰ï¼Œç„¶åæ˜¯æ”¶å…¥å’Œæœ€ååº•éƒ¨çš„æ”¯å‡ºã€‚\nå¦‚æœæˆ‘ä»¬å°†æ‰€æœ‰è´¦æˆ·çš„è®°è´¦æ±‡æ€»ï¼Œå¹¶ä»…å‘ˆç°è´¦æˆ·åç§°åŠåœ¨å³ä¾§çš„æœ€ç»ˆä½™é¢ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°ä¸€ä»½æŠ¥å‘Šï¼Œç§°ä¸º â€œè¯•ç®—å¹³è¡¡è¡¨ ï¼ˆTrial balanceï¼‰â€ã€‚\nè¿™ä»…ä»…åæ˜ äº†ç‰¹å®šæ—¶é—´ç‚¹ä¸Šæ¯ä¸ªè´¦æˆ·çš„ä½™é¢ã€‚ç”±äºæ¯ä¸ªè´¦æˆ·æœ€åˆéƒ½æ˜¯é›¶ä½™é¢ï¼Œå¹¶ä¸”æ¯ç¬”äº¤æ˜“æœ¬èº«ä¹Ÿæœ‰ä¸€ä¸ªé›¶ä½™é¢ï¼Œå› æ­¤æˆ‘ä»¬çŸ¥é“æ‰€æœ‰è¿™äº›ä½™é¢çš„æ€»å’Œå¿…é¡»ç­‰äºé›¶ 1ã€‚è¿™æ˜¯æˆ‘ä»¬é™åˆ¶æ¯æ¬¡è®°è´¦éƒ½å¿…é¡»ä½œä¸ºä¸€ç¬”äº¤æ˜“çš„ç»“æœï¼Œä»¥åŠç¡®ä¿æ¯ç¬”äº¤æ˜“éƒ½æœ‰ç›¸äº’æŠµæ¶ˆçš„è®°è´¦æ‰€å¯¼è‡´çš„ã€‚\næŸç›Šè¡¨ ï¼ˆIncome Statementï¼‰ ä»äº¤æ˜“åˆ—è¡¨ä¸­æå–çš„ä¸€ç§å¸¸è§ä¿¡æ¯æ˜¯ç‰¹å®šæ—¶é—´æ®µå†…æ”¶å…¥è´¦æˆ·å˜åŒ–çš„æ‘˜è¦ã€‚è¿™å‘Šè¯‰æˆ‘ä»¬åœ¨æ­¤æœŸé—´èµšäº†å¤šå°‘é’±å’ŒèŠ±äº†å¤šå°‘é’±ï¼Œå·®é¢å‘Šè¯‰æˆ‘ä»¬äº§ç”Ÿäº†å¤šå°‘åˆ©æ¶¦ï¼ˆæˆ–äºæŸï¼‰ã€‚ç§°ä¸º â€œå‡€æ”¶å…¥ ï¼ˆNet incomeï¼‰â€ã€‚\nä¸ºäº†ç”Ÿæˆè¿™ä¸ªæ‘˜è¦ï¼Œæˆ‘ä»¬åªéœ€å…³æ³¨æ”¶å…¥å’Œæ”¯å‡ºç±»å‹çš„è´¦æˆ·ä½™é¢ï¼Œä»…æ±‡æ€»ç‰¹å®šæœŸé—´çš„äº¤æ˜“ï¼Œå¹¶å°†æ”¶å…¥ä½™é¢ç»˜åˆ¶åœ¨å·¦ä¾§ï¼Œæ”¯å‡ºä½™é¢ç»˜åˆ¶åœ¨å³ä¾§ï¼š\né‡è¦æç¤ºï¼šè¿™é‡Œçš„æ”¶å…¥æ•°å­—æ˜¯è´Ÿæ•°ï¼Œæ”¯å‡ºæ•°å­—æ˜¯æ­£æ•°ã€‚å› æ­¤ï¼Œå¦‚æœä½ èµšçš„æ¯”èŠ±è´¹å¤šï¼ˆä¸€ä¸ªå¥½ç»“æœï¼‰ï¼Œæœ€ç»ˆçš„æ”¶å…¥ + æ”¯å‡ºä½™é¢æ€»å’Œå°†ä¸ºè´Ÿæ•°ã€‚åƒä»»ä½•å…¶ä»–æ”¶å…¥ä¸€æ ·ï¼Œå‡€æ”¶å…¥æœ‰ä¸€ä¸ªè´Ÿæ•°æ„å‘³ç€ç›¸åº”æ•°é‡çš„èµ„äº§å’Œ/æˆ–è´Ÿå€ºæ˜¯æ­£æ•°ï¼ˆè¿™å¯¹ä½ æœ‰åˆ©ï¼‰ã€‚\nä¸€ä¸ªæŸç›Šè¡¨å‘Šè¯‰æˆ‘ä»¬åœ¨ç‰¹å®šæ—¶é—´æ®µå†…å‘ç”Ÿäº†ä»€ä¹ˆå˜åŒ–ã€‚å…¬å¸é€šå¸¸æ¯å­£åº¦å‘æŠ•èµ„è€…å’Œå…¬ä¼—ï¼ˆå¦‚æœå®ƒä»¬æ˜¯ä¸Šå¸‚å…¬å¸ï¼‰æŠ¥å‘Šè¿™äº›ä¿¡æ¯ï¼Œä»¥åˆ†äº«ä»–ä»¬èƒ½å¤Ÿèµšå–å¤šå°‘åˆ©æ¶¦ã€‚ä¸ªäººé€šå¸¸ä¼šåœ¨å…¶å¹´åº¦çº³ç¨ç”³æŠ¥ä¸­æŠ¥å‘Šæ­¤ç±»ä¿¡æ¯ã€‚\næ¸…ç®—æ”¶å…¥ ï¼ˆClearing Incomeï¼‰ æ³¨æ„åœ¨æŸç›Šè¡¨ä¸­ï¼Œåªæœ‰ç‰¹å®šæ—¶é—´é—´éš”å†…çš„äº¤æ˜“è¢«æ±‡æ€»ã€‚è¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥è®¡ç®—å‡ºä¸€å¹´å†…æ‰€æœ‰æ”¶å…¥çš„æ€»å’Œã€‚å¦‚æœæˆ‘ä»¬å°†è‡ªè´¦æˆ·åˆ›å»ºä»¥æ¥çš„æ‰€æœ‰äº¤æ˜“ç›¸åŠ ï¼Œå°±å¯ä»¥å¾—åˆ°è‡ªè´¦æˆ·åˆ›å»ºä»¥æ¥æ‰€è·å¾—çš„å…¨éƒ¨æ”¶å…¥ã€‚\nå®ç°åŒæ ·æ•ˆæœçš„æ›´å¥½æ–¹æ³•æ˜¯å°†æ”¶å…¥å’Œæ”¯å‡ºè´¦æˆ·çš„ä½™é¢æ¸…é›¶ã€‚Beancount å°†æ­¤åŸºæœ¬è½¬æ¢ç§°ä¸º â€œæ¸…ç®— ï¼ˆClearingï¼‰2â€œã€‚å®ƒé€šè¿‡ä»¥ä¸‹æ–¹å¼è¿›è¡Œï¼š\nä»æ—¶é—´å¼€å§‹åˆ°æŠ¥å‘ŠæœŸå¼€å§‹è®¡ç®—è¿™äº›è´¦æˆ·çš„ä½™é¢ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ åœ¨ 2000 å¹´åˆ›å»ºäº†ä½ çš„è´¦æˆ·ï¼Œå¹¶ä¸”æƒ³è¦ä¸º 2016 å¹´ç”Ÿæˆä¸€ä»½æ”¶å…¥æŠ¥è¡¨ï¼Œé‚£ä¹ˆä½ éœ€è¦å°† 2000 å¹´è‡³ 2016 å¹´ 1 æœˆ 1 æ—¥ä¹‹é—´çš„ä½™é¢æ±‡æ€»ã€‚\nå°†äº¤æ˜“æ’å…¥ä»¥æ¸…ç©ºè¿™äº›ä½™é¢å¹¶å°†å®ƒä»¬è½¬ç§»åˆ°ä¸æ˜¯æ”¶å…¥ä¹Ÿä¸æ˜¯æ”¯å‡ºçš„å…¶ä»–å¸æˆ·ã€‚ä¾‹å¦‚ï¼Œå¦‚æœé¤å…æ”¯å‡ºè´¦æˆ·åœ¨é‚£ 16 å¹´ä¸­æ€»è®¡ä¸º 85,321 ç¾å…ƒï¼Œåˆ™ä¼šæ’å…¥ä¸€ç¬”é‡‘é¢ä¸º -85,321 çš„äº¤æ˜“åˆ°é¤å…ï¼Œå¹¶å‘ â€œä¸ŠæœŸæ”¶ç›Š ï¼ˆPrevious earningsï¼‰â€ æ·»åŠ  +85,321 ç¾å…ƒã€‚è¿™äº›äº¤æ˜“æ—¥æœŸåº”ä¸º 2016 å¹´ 1 æœˆ 1 æ—¥ã€‚åŒ…æ‹¬æ­¤äº¤æ˜“ï¼Œåœ¨è¯¥æ—¥æœŸè¯¥è´¦æˆ·çš„æ€»å’Œå°†ä¸ºé›¶ã€‚è¿™å°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚\næ‰€æœ‰æ”¶å…¥è´¦æˆ·æ’å…¥çš„äº¤æ˜“å¦‚ä¸‹å›¾ç»¿è‰²æ‰€ç¤ºã€‚ç°åœ¨å°†æ•´ä¸ªäº¤æ˜“ç›¸åŠ åˆ°æ€»è´¦æœ«å°¾ï¼Œåªä¼šå¾—å‡º 2016 å¹´æœŸé—´çš„å˜åŒ–ï¼Œå› ä¸ºå½“æ—¶ä½™é¢ä¸ºé›¶ï¼š\nè¿™å°±æ˜¯ bean-query shell ä¸­çš„ CLEAR æ“ä½œçš„è¯­ä¹‰ã€‚\nï¼ˆè¯·æ³¨æ„ï¼Œå¯¹äºæŸç›Šè¡¨è´¦æˆ·å®ç°ç›¸åŒç›®çš„çš„å¦ä¸€ç§æ–¹æ³•æ˜¯ä»…é’ˆå¯¹æ¸…ç®—æ—¥æœŸåçš„äº¤æ˜“è¿›è¡Œé‡‘é¢åˆ†ç¦»å’Œè®¡æ•°ï¼›ä½†æ˜¯ï¼Œè”åˆæŠ¥å‘ŠæŸç›Šè¡¨è´¦æˆ·å’Œèµ„äº§è´Ÿå€ºè¡¨è´¦æˆ·å°†å¯¼è‡´èµ„äº§è´Ÿå€ºè¡¨è´¦æˆ·å‡ºç°é”™è¯¯ä½™é¢ã€‚ï¼‰\nè‚¡æƒ ï¼ˆEquityï¼‰ æ¥æ”¶å…ˆå‰ç´¯è®¡æ”¶å…¥çš„å¸æˆ·ç§°ä¸º â€œä¸ŠæœŸæ”¶ç›Š ï¼ˆPrevious earningsï¼‰ â€ã€‚å®ƒä½äºç¬¬äº”ç§ä¹Ÿæ˜¯æœ€åä¸€ç§ç±»å‹çš„è´¦æˆ·ä¸­ï¼šè‚¡æƒ ï¼ˆEquityï¼‰ã€‚æˆ‘ä»¬ä¹‹å‰æ²¡æœ‰è®¨è®ºè¿‡è¿™ç§ç±»å‹çš„è´¦æˆ·ï¼Œå› ä¸ºå®ƒä»¬é€šå¸¸åªç”¨äºè½¬ç§»é‡‘é¢ä»¥å»ºç«‹æŠ¥å‘Šï¼Œå¹¶ä¸”æ‰€æœ‰è€…é€šå¸¸ä¸ä¼šå¯¹è¿™äº›ç±»å‹è´¦æˆ·çš„æ›´æ”¹è¿›è¡Œè®°è´¦ï¼›è½¯ä»¶ä¼šè‡ªåŠ¨æ‰§è¡Œæ­¤æ“ä½œï¼Œä¾‹å¦‚åœ¨ç»“ç®—å‡€æ”¶å…¥æ—¶ã€‚\nâ€œè‚¡æƒâ€ è´¦æˆ·ç±»å‹ç”¨äºä¿å­˜æ‰€æœ‰è¿‡å»æ´»åŠ¨æ‰€æ¶‰åŠçš„å‡€æ”¶å…¥æ€»ç»“ã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬ç°åœ¨å°†èµ„äº§ã€è´Ÿå€ºå’Œè‚¡æƒè´¦æˆ·åˆ—åœ¨ä¸€èµ·ï¼Œå› ä¸ºæ”¶å…¥å’Œæ”¯å‡ºè´¦æˆ·å·²ç»æ¸…é›¶ï¼Œæ‰€æœ‰è¿™äº›ä½™é¢çš„æ€»å’Œåº”è¯¥æ°å¥½ç­‰äºé›¶ã€‚è€Œå¯¹æ‰€æœ‰è‚¡æƒè´¦æˆ·æ±‚å’Œæ˜ç¡®å‘Šè¯‰æˆ‘ä»¬ï¼Œåœ¨å®ä½“ä¸­æˆ‘ä»¬æŒæœ‰å¤šå°‘ä»½é¢ï¼Œæ¢å¥è¯è¯´ï¼Œå¦‚æœä½ ç”¨èµ„äº§æ¥æ”¯ä»˜æ‰€æœ‰è´Ÿå€ºï¼Œä¼ä¸šè¿˜å‰©ä¸‹å¤šå°‘ï¼Œä»·å€¼æ˜¯å¤šå°‘ã€‚\nè¯·æ³¨æ„ï¼Œè‚¡æƒè´¦æˆ·çš„æ­£å¸¸ç¬¦å·ä¸ºè´Ÿæ•°ã€‚è¿™å¹¶æ²¡æœ‰ç‰¹åˆ«çš„å«ä¹‰ï¼Œåªæ˜¯å®ƒä»¬ç”¨äºæŠµæ¶ˆèµ„äº§å’Œè´Ÿå€ºï¼Œå¦‚æœæ‰€æœ‰è€…æœ‰ä»»ä½•ä»·å€¼ï¼Œåˆ™è¯¥æ•°å­—åº”ä¸ºè´Ÿæ•°ã€‚ï¼ˆè´Ÿè‚¡æƒæ„å‘³ç€ä¸€äº›ç§¯æå‡€å€¼ã€‚ï¼‰\nè¿™äº›æ˜¯åœ¨ Beancount ä¸­ä½¿ç”¨çš„ä¸€äº›ä¸åŒçš„æƒç›Šè´¦æˆ·ï¼š\nä¸ŠæœŸæ”¶ç›Š ï¼ˆPrevious Earningsï¼‰æˆ–ç•™å­˜æ”¶ç›Š ï¼ˆRetained Earningsï¼‰ã€‚è¿™æ˜¯ä¸€ä¸ªè´¦æˆ·ï¼Œç”¨äºä¿å­˜ä»æ—¶é—´å¼€å§‹åˆ°æŠ¥å‘ŠæœŸå¼€å§‹çš„æ€»æ”¶å…¥å’Œæ”¯å‡ºä½™é¢ã€‚è¿™å°±æ˜¯æˆ‘ä»¬åœ¨ä¸Šä¸€èŠ‚ä¸­æåˆ°çš„è´¦æˆ·ã€‚\nå½“å‰æ”¶ç›Š ï¼ˆCurrent Earningsï¼‰ï¼Œä¹Ÿç§°ä¸ºå‡€æ”¶å…¥ ï¼ˆNet Incomeï¼‰ã€‚è¿™æ˜¯ä¸€ä¸ªè´¦æˆ·ï¼Œç”¨äºåŒ…å«æŠ¥å‘ŠæœŸé—´å‘ç”Ÿçš„æ”¶å…¥å’Œæ”¯å‡ºä½™é¢ä¹‹å’Œã€‚åœ¨æŠ¥å‘ŠæœŸç»“æŸæ—¶ï¼Œâ€œæ¸…ç®—â€æ”¶å…¥å’Œæ”¯å‡ºè´¦æˆ·åå¡«å†™ã€‚\næœŸåˆä½™é¢ ï¼ˆOpening Balancesï¼‰ã€‚ä¸€ç§è‚¡æƒè´¦æˆ·ï¼ŒæŠµæ¶ˆç”¨äºåˆå§‹åŒ–è´¦æˆ·çš„å­˜æ¬¾ã€‚å½“æˆ‘ä»¬æˆªæ–­è¿‡å»çš„äº¤æ˜“å†å²è®°å½•ï¼Œä½†ä¹Ÿéœ€è¦ç¡®ä¿ä¸€ä¸ªå¸æˆ·çš„ä½™é¢ä»¥ç‰¹å®šé‡‘é¢å¼€å§‹å…¶å†å²æ—¶ï¼Œå°±ä¼šä½¿ç”¨æ­¤ç±»å¸æˆ·ã€‚\nå†æ¬¡å¼ºè°ƒï¼šä½ ä¸éœ€è¦å®šä¹‰æˆ–ä½¿ç”¨è¿™äº›è´¦æˆ·ï¼Œå› ä¸ºå®ƒä»¬æ˜¯ä¸ºäº†æ€»ç»“äº¤æ˜“è€Œåˆ›å»ºçš„ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œè¿™äº›è´¦æˆ·ç”±ä¸Šè¿°æ¸…ç®—è¿‡ç¨‹å¡«å†™ï¼Œæˆ–è€…é€šè¿‡ Pad æŒ‡ä»¤å¡«å†™åˆ° â€œæœŸåˆä½™é¢â€ è‚¡æƒè´¦æˆ·ä¸­ï¼Œä»¥è®°å½•è¿‡å»çš„æ±‡æ€»ä½™é¢ã€‚å®ƒä»¬ç”±è½¯ä»¶è‡ªåŠ¨åˆ›å»ºå’Œå¡«å……ã€‚åœ¨æ¥ä¸‹æ¥çš„ç« èŠ‚ä¸­æˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½•ä½¿ç”¨å®ƒä»¬ã€‚\nèµ„äº§è´Ÿå€ºè¡¨ ï¼ˆBalance Sheetï¼‰ å¦ä¸€ç§æ‘˜è¦æ˜¯åˆ—å‡ºæ‰€æœ‰è´¦æˆ·çš„æ‰€æœ‰è€…èµ„äº§å’Œå€ºåŠ¡æ¸…å•ã€‚è¿™å›ç­”äº†ä¸€ä¸ªé—®é¢˜ï¼šâ€œé’±åœ¨å“ªé‡Œï¼Ÿâ€ç†è®ºä¸Šï¼Œæˆ‘ä»¬å¯ä»¥åªå…³æ³¨èµ„äº§å’Œè´Ÿå€ºè´¦æˆ·ï¼Œå¹¶å°†å…¶ç¼–åˆ¶æˆæŠ¥å‘Šï¼š\nç„¶è€Œï¼Œåœ¨å®è·µä¸­ï¼Œè¿˜æœ‰ä¸€ä¸ªç´§å¯†ç›¸å…³çš„é—®é¢˜ä¼šå‡ºç°ï¼Œå¹¶ä¸”é€šå¸¸åŒæ—¶å›ç­”ï¼šâ€œä¸€æ—¦æ‰€æœ‰å€ºåŠ¡éƒ½å¿æ¸…ï¼Œæˆ‘ä»¬å‰©ä¸‹å¤šå°‘é’±ï¼Ÿâ€è¿™è¢«ç§°ä¸ºå‡€èµ„äº§ä»·å€¼ ï¼ˆNet worthï¼‰ã€è¯‘è€…æ³¨ï¼šç®€ç§°å‡€å€¼ã€‘ã€‚\nå¦‚æœæ”¶å…¥å’Œæ”¯å‡ºè´¦æˆ·å·²ç»æ¸…é›¶ï¼Œå¹¶ä¸”å®ƒä»¬çš„ä½™é¢å·²è½¬ç§»åˆ°è‚¡æƒè´¦æˆ·ï¼Œåˆ™å‡€å€¼åº”ç­‰äºæ‰€æœ‰è‚¡æƒè´¦æˆ·çš„æ€»å’Œã€‚å› æ­¤ï¼Œåœ¨ç¼–åˆ¶èµ„äº§è´Ÿå€ºè¡¨æ—¶ï¼Œä¹ æƒ¯ä¸Šè¦æ¸…é™¤å‡€æ”¶ç›Šï¼Œç„¶åæ˜¾ç¤ºè‚¡æƒè´¦æˆ·çš„ä½™é¢ã€‚æŠ¥å‘Šå¦‚ä¸‹ï¼š\nè¯·æ³¨æ„ï¼Œèµ„äº§è´Ÿå€ºè¡¨å¯ä»¥åœ¨ä»»ä½•æ—¶é—´ç‚¹ç»˜åˆ¶ï¼Œåªéœ€æˆªæ–­ç‰¹å®šæ—¥æœŸåçš„äº¤æ˜“åˆ—è¡¨å³å¯ã€‚èµ„äº§è´Ÿå€ºè¡¨æ˜¾ç¤ºæŸä¸ªæ—¥æœŸçš„ä½™é¢å¿«ç…§ï¼›è€Œåˆ©æ¶¦è¡¨æ˜¾ç¤ºä¸¤ä¸ªæ—¥æœŸä¹‹é—´è¿™äº›ä½™é¢çš„å·®å¼‚ã€‚\næ€»ç»“ å°†è¿‡å»çš„äº¤æ˜“å†å²æ€»ç»“ä¸ºä¸€ä¸ªç­‰æ•ˆå­˜æ¬¾æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬å¯¹ 2016 å¹´æŸä¸ªè´¦æˆ·çš„äº¤æ˜“æ„Ÿå…´è¶£ï¼Œè¯¥è´¦æˆ·åœ¨ 2016 å¹´ 1 æœˆ 1 æ—¥æ—¶ä½™é¢ä¸º 450 ç¾å…ƒï¼Œåˆ™å¯ä»¥åˆ é™¤æ‰€æœ‰ä»¥å‰çš„äº¤æ˜“ï¼Œå¹¶ç”¨ä¸€ç¬”å•ç‹¬çš„äº¤æ˜“æ›¿æ¢å®ƒä»¬ï¼Œåœ¨ 2015 å¹´ 12 æœˆ 31 æ—¥å­˜å…¥ 450 ç¾å…ƒå¹¶ä»å…¶ä»–åœ°æ–¹å–å‡ºã€‚\né‚£ä¸ªåœ°æ–¹å°†æ˜¯è‚¡æƒè´¦æˆ·çš„æœŸåˆä½™é¢ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºæ‰€æœ‰èµ„äº§å’Œè´Ÿå€ºè´¦æˆ·ï¼ˆè¯·å‚è§è“è‰²äº¤æ˜“ï¼‰æ‰§è¡Œæ­¤æ“ä½œï¼š\nç„¶åæˆ‘ä»¬åˆ é™¤æ‰€æœ‰åœ¨å¼€æˆ·æ—¥æœŸä¹‹å‰çš„äº¤æ˜“ï¼Œä»¥è·å¾—ä¸€ä¸ªæˆªæ–­çš„äº¤æ˜“åˆ—è¡¨ï¼š\nå½“æˆ‘ä»¬ä¸“æ³¨äºç‰¹å®šæ—¶é—´é—´éš”çš„äº¤æ˜“æ—¶ï¼Œè¿™æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„æ“ä½œã€‚\nï¼ˆè¿™æ˜¯ä¸€äº›å®ç°ç»†èŠ‚ï¼šè¿™äº›æ“ä½œä¸ Beancount çš„è®¾è®¡æœ‰å…³ã€‚ä¸ºäº†é¿å…ä½¿ç”¨å‚æ•°è¿›è¡Œæ‰€æœ‰æŠ¥å‘Šæ“ä½œï¼Œå®ƒçš„æ‰€æœ‰æŠ¥å‘Šç¨‹åºéƒ½è¢«ç®€åŒ–ï¼Œæ›¿ä»£ä¸ºåœ¨æ•´ä¸ªäº¤æ˜“æµä¸Šè¿è¡Œï¼›é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å°†äº¤æ˜“åˆ—è¡¨è½¬æ¢ä¸ºä»…åŒ…å«è¦æŠ¥å‘Šçš„æ•°æ®ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæ±‡æ€»åªæ˜¯ä¸€ä¸ªæ¥å—å®Œæ•´äº¤æ˜“é›†å¹¶è¿”å›ç­‰æ•ˆæˆªæ–­æµçš„è½¬æ¢ã€‚ç„¶åï¼Œå¯ä»¥ä»æ­¤äº¤æ˜“æµä¸­ç”Ÿæˆä¸åŒ…æ‹¬è¿‡å»äº¤æ˜“çš„è®°è´¦ã€‚ä»ç¨‹åºè®¾è®¡çš„è§’åº¦æ¥çœ‹ï¼Œè¿™æ˜¯å¾ˆæœ‰å¸å¼•åŠ›çš„ï¼Œå› ä¸ºç¨‹åºçš„å”¯ä¸€çŠ¶æ€æ˜¯äº¤æ˜“æµï¼Œè€Œä¸”å®ƒæ°¸è¿œä¸ä¼šç›´æ¥è¢«ä¿®æ”¹ã€‚è¿™å¾ˆç®€å•å’Œå¥å£®ã€‚ï¼‰\næœŸé—´æŠ¥å‘Š ï¼ˆPeriod Reportingï¼‰ ç°åœ¨æˆ‘ä»¬çŸ¥é“ï¼Œé€šè¿‡æ¸…ç®—å’Œä»…æŸ¥çœ‹æ”¶å…¥å’Œæ”¯å‡ºè´¦æˆ·å¯ä»¥åˆ¶ä½œä¸€ä»½ä¸€æ®µæ—¶é—´å†…çš„å˜åŠ¨æŠ¥å‘Šï¼ˆæŸç›Šè¡¨ï¼‰ã€‚ æˆ‘ä»¬è¿˜çŸ¥é“ï¼Œå¯ä»¥è¿›è¡Œç»“ç®—ä»¥åœ¨ä»»ä½•æ—¶é—´ç‚¹ç”Ÿæˆèµ„äº§ã€è´Ÿå€ºå’Œæ‰€æœ‰è€…æƒç›Šçš„å¿«ç…§ï¼ˆèµ„äº§è´Ÿå€ºè¡¨ï¼‰ã€‚\næ›´ä¸€èˆ¬åœ°è¯´ï¼Œæˆ‘ä»¬æœ‰å…´è¶£æ£€æŸ¥ä¸€ä¸ªç‰¹å®šçš„æ—¶é—´æ®µã€‚è¿™æ„å‘³ç€éœ€è¦ä¸€ä¸ªæ”¶å…¥æŠ¥è¡¨ï¼Œè¿˜éœ€è¦ä¸¤ä¸ªèµ„äº§è´Ÿå€ºè¡¨ï¼šæœŸåˆèµ„äº§è´Ÿå€ºè¡¨å’ŒæœŸæœ«èµ„äº§è´Ÿå€ºè¡¨ã€‚\nä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬é‡‡ç”¨ä»¥ä¸‹è½¬æ¢ï¼š\nå¼€æˆ· ï¼ˆOpenï¼‰ã€‚æˆ‘ä»¬é¦–å…ˆåœ¨æœŸåˆæ¸…ç®—å‡€æ”¶å…¥ï¼Œå°†æ‰€æœ‰ä»¥å‰çš„æ”¶å…¥ä½™é¢è½¬ç§»è‡³è‚¡æƒä¸ŠæœŸæ”¶ç›Šè´¦æˆ·ã€‚ç„¶åæˆ‘ä»¬æ€»ç»“åˆ°æœŸåˆã€‚æˆ‘ä»¬ç§°æ¸…ç®— + æ€»ç»“çš„ç»„åˆä¸º â€œå¼€æˆ·â€ã€‚\nç»“å¸ ï¼ˆCloseï¼‰ã€‚æˆ‘ä»¬è¿˜ä¼šæˆªæ–­æŠ¥å‘ŠæœŸç»“æŸåçš„æ‰€æœ‰äº¤æ˜“ã€‚æˆ‘ä»¬ç§°è¿™ä¸ªæ“ä½œä¸º â€œç»“è´¦â€ã€‚\nè¿™æ˜¯ bean-query shell 3 çš„ â€œOPENâ€ å’Œ â€œCLOSEâ€ æ“ä½œçš„å«ä¹‰ã€‚æœ€ç»ˆçš„äº¤æ˜“é›†åº”è¯¥å¦‚ä¸‹æ‰€ç¤ºã€‚\nâ€œç»“å¸â€ åŒ…æ‹¬ä¸¤ä¸ªæ­¥éª¤ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ä¼šç§»é™¤æ‰€æœ‰åœ¨ç»“æŸæ—¥æœŸä¹‹åçš„äº¤æ˜“ï¼š\næˆ‘ä»¬å¯ä»¥å¤„ç†è¿™ä¸€ç¬”äº¤æ˜“æµæ¥ç”Ÿæˆè¯¥æœŸé—´çš„æŸç›Šè¡¨ã€‚\nç„¶åï¼Œåœ¨æ‰€éœ€æŠ¥å‘Šçš„ç»“æŸæ—¥æœŸå†æ¬¡è¿›è¡Œç»“ç®—ï¼Œä½†è¿™æ¬¡æˆ‘ä»¬å°†å‡€æ”¶å…¥ç»“ç®—åˆ° Equity:Earnings:Current è´¦æˆ·ï¼š\nä»è¿™äº›äº¤æ˜“ä¸­ï¼Œæˆ‘ä»¬åœ¨æœŸæœ«åˆ¶ä½œèµ„äº§è´Ÿå€ºè¡¨ã€‚\nè¿™æ¦‚æ‹¬äº†ä½¿ç”¨ Beancount å‡†å¤‡äº¤æ˜“æµä»¥ç”ŸæˆæŠ¥å‘Šçš„æ“ä½œï¼Œä»¥åŠå¯¹è¿™äº›ç±»å‹æŠ¥å‘Šçš„åŸºæœ¬ä»‹ç»ã€‚\nè´¦æˆ·è¡¨ æ–°ç”¨æˆ·ç»å¸¸ä¼šæƒ³çŸ¥é“ä»–ä»¬åœ¨è´¦æˆ·åç§°ä¸­åº”è¯¥ä½¿ç”¨å¤šå°‘ç»†èŠ‚ã€‚ä¾‹å¦‚ï¼Œæ˜¯å¦åº”è¯¥åœ¨è´¦æˆ·åç§°æœ¬èº«ä¸­åŒ…å«æ”¶æ¬¾äººï¼Œå°±åƒè¿™äº›ç¤ºä¾‹ä¸€æ ·ï¼Ÿ\nExpenses:Phone:Mobile:VerizonWireless Assets:AccountsReceivable:Clients:AcmeInc æˆ–è€…åº”è¯¥ä½¿ç”¨æ›´ç®€å•çš„åç§°ï¼Œè€Œä¾é â€œæ”¶æ¬¾äººâ€ã€â€œæ ‡ç­¾â€æˆ–å…¶ä»–å…ƒæ•°æ®æ¥åˆ†ç»„è®°è´¦ï¼Ÿ\nExpenses:Phone Assets:AccountsReceivable ç­”æ¡ˆæ˜¯å–å†³äºä½ ã€‚è¿™æ˜¯ä¸€ä¸ªä»»æ„çš„é€‰æ‹©ã€‚è¿™æ˜¯ä¸ªå“å‘³é—®é¢˜ã€‚æˆ‘ä¸ªäººå–œæ¬¢æ»¥ç”¨è´¦æˆ·åå¹¶åˆ›å»ºé•¿è€Œå…·æœ‰æè¿°æ€§çš„åç§°ï¼Œå…¶ä»–äººåˆ™æ›´å–œæ¬¢ä¿æŒç®€å•ï¼Œå¹¶ä½¿ç”¨æ ‡ç­¾æ¥åˆ†ç»„ä»–ä»¬çš„è®°è´¦ã€‚æœ‰æ—¶å€™ç”šè‡³ä¸éœ€è¦è¿‡æ»¤è®°è´¦çš„å­åˆ†ç»„ã€‚æ²¡æœ‰æ­£ç¡®ç­”æ¡ˆï¼Œè¿™å–å†³äºä½ æƒ³åšä»€ä¹ˆã€‚\néœ€è¦è®°ä½çš„ä¸€ç‚¹æ˜¯ï¼Œè´¦æˆ·åç§°éšå«åœ°å®šä¹‰äº†ä¸€ä¸ªå±‚æ¬¡ç»“æ„ã€‚æŸäº›æŠ¥å‘Šä»£ç ä¼šè§£é‡Š â€œ:â€ åˆ†éš”ç¬¦ä»¥åˆ›å»ºå†…å­˜æ ‘ï¼Œå¹¶å…è®¸ä½ æŠ˜å èŠ‚ç‚¹çš„å­å¸æˆ·å¹¶è®¡ç®—çˆ¶çº§ä¸Šçš„èšåˆå€¼ã€‚å°†å…¶è§†ä¸ºä¸€ç§é¢å¤–çš„åˆ†ç»„æ–¹å¼ã€‚\nå›½å®¶-æœºæ„ çº¦å®š æˆ‘æƒ³å‡ºäº†ä¸€ä¸ªå¯¹æˆ‘çš„èµ„äº§ã€è´Ÿå€ºå’Œæ”¶å…¥è´¦æˆ·éå¸¸æœ‰æ•ˆçš„çº¦å®šï¼Œå³ä»¥è¯¥è´¦æˆ·æ‰€åœ¨å›½å®¶çš„ä»£ç ä¸ºæ ¹ï¼Œåè·Ÿç›¸åº”æœºæ„çš„ç®€çŸ­å­—ç¬¦ä¸²ã€‚åœ¨æ­¤ä¹‹ä¸‹ï¼Œæ˜¯è¯¥æœºæ„ä¸­ç‰¹å®šè´¦æˆ·çš„å”¯ä¸€åç§°ã€‚å°±åƒè¿™æ ·ï¼š\n\u0026lt;type\u0026gt; : \u0026lt;country\u0026gt; : \u0026lt;institution\u0026gt; : \u0026lt;account\u0026gt; ä¾‹å¦‚ï¼šå¯ä»¥é€‰æ‹©å°†æ”¯ç¥¨è´¦æˆ·å‘½åä¸º Assets:US:BofA:Checking ï¼Œå…¶ä¸­ â€œBofAâ€ ä»£è¡¨ â€œBank of Americaâ€œï¼ˆç¾å›½é“¶è¡Œï¼‰ã€‚ä¿¡ç”¨å¡è´¦æˆ·å¯ä»¥åŒ…æ‹¬ç‰¹å®šç±»å‹çš„å¡åç§°ä½œä¸ºè´¦æˆ·åç§°ï¼Œæ¯”å¦‚ Liabilities:US:Amex:Platinum ï¼Œå¦‚æœä½ æœ‰å¤šå¼ å¡ç‰‡ï¼Œåˆ™è¿™æ ·åšå¾ˆæœ‰ç”¨ã€‚\næˆ‘å‘ç°å¯¹äºæ”¯å‡ºè´¦æˆ·æ¥è¯´ï¼Œä½¿ç”¨è¿™ç§æ–¹æ¡ˆå¹¶ä¸åˆç†ï¼Œå› ä¸ºå®ƒä»¬å¾€å¾€ä»£è¡¨ç€é€šç”¨ç±»åˆ«ã€‚å¯¹äºè¿™äº›è´¦æˆ·ï¼ŒæŒ‰ç…§ç±»åˆ«åˆ†ç»„ä¼¼ä¹æ›´æœ‰æ„ä¹‰ï¼Œä¾‹å¦‚ä½¿ç”¨ Expenses:Food:Restaurant è€Œä¸æ˜¯ä»…ä»…ä½¿ç”¨ Expenses:Restaurantã€‚\næ— è®ºå¦‚ä½•ï¼ŒBeancount é™¤äº†æ ¹è´¦æˆ·å¤–ä¸å¼ºåˆ¶æ‰§è¡Œä»»ä½•è§„å®šï¼›è¿™åªæ˜¯ä¸€ä¸ªå»ºè®®ï¼Œè¿™ä¸ªçº¦å®šåœ¨è½¯ä»¶ä¸­æ²¡æœ‰ç¼–ç ã€‚ä½ æœ‰å¾ˆå¤§çš„è‡ªç”±æ¥å°è¯•å®éªŒï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡å¤„ç†æ–‡æœ¬æ–‡ä»¶è½»æ¾æ›´æ”¹æ‰€æœ‰åç§°ã€‚è¯·å‚é˜…é£Ÿè°±ï¼ˆCookbookï¼‰ä»¥è·å–æ›´å¤šå®ç”¨æŒ‡å—ã€‚\nè´·æ–¹å’Œå€Ÿæ–¹ ï¼ˆCredits \u0026amp; Debitsï¼‰ ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰è®¨è®º â€œå€Ÿæ–¹ ï¼ˆCreditsï¼‰â€ å’Œ â€œè´·æ–¹ ï¼ˆDebitsï¼‰â€ çš„æ¦‚å¿µã€‚è¿™æ˜¯æœ‰æ„çš„ï¼šBeancount åŸºæœ¬ä¸Šæ‘’å¼ƒäº†è¿™äº›æ¦‚å¿µï¼Œå› ä¸ºå®ƒä½¿å…¶ä»–æ‰€æœ‰äº‹æƒ…å˜å¾—æ›´ç®€å•ã€‚æˆ‘è®¤ä¸ºä»…éœ€å­¦ä¹ æ”¶å…¥ã€è´Ÿå€ºå’Œæƒç›Šè´¦æˆ·çš„ç¬¦å·é€šå¸¸æ˜¯è´Ÿæ•°ï¼Œå¹¶ä»¥ç›¸åŒæ–¹å¼å¤„ç†æ‰€æœ‰è´¦æˆ·æ¯”ä½¿ç”¨å€Ÿæ–¹å’Œè´·æ–¹æœ¯è¯­å¹¶å¯¹ä¸åŒç±»åˆ«çš„è´¦æˆ·è¿›è¡Œä¸åŒå¤„ç†è¦ç®€å•å¾—å¤šã€‚æ— è®ºå¦‚ä½•ï¼Œæœ¬èŠ‚å°†è§£é‡Šè¿™äº›å†…å®¹ã€‚\næ­£å¦‚æˆ‘åœ¨ä¹‹å‰çš„ç« èŠ‚ä¸­æŒ‡å‡ºçš„é‚£æ ·ï¼Œæˆ‘ä»¬è®¤ä¸ºæ”¶å…¥ã€è´Ÿå€ºå’Œæƒç›Šè´¦æˆ·é€šå¸¸å…·æœ‰è´Ÿä½™é¢ã€‚è¿™å¬èµ·æ¥å¯èƒ½å¾ˆå¥‡æ€ªï¼›æ¯•ç«Ÿï¼Œæ²¡æœ‰äººä¼šæŠŠä»–ä»¬çš„æ€»è–ªæ°´çœ‹ä½œæ˜¯ä¸€ä¸ªè´Ÿæ•°ï¼Œå½“ç„¶ä½ çš„ä¿¡ç”¨å¡è´¦å•æˆ–æŠµæŠ¼è´·æ¬¾æŠ¥è¡¨ä¹Ÿä¼šæŠ¥å‘Šæ­£æ•°ã€‚è¿™æ˜¯å› ä¸ºåœ¨æˆ‘ä»¬çš„å¤å¼è®°è´¦ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬è®¤ä¸ºæ‰€æœ‰è´¦æˆ·éƒ½ä»æŒæœ‰äººçš„è§’åº¦è¿›è¡ŒæŒæœ‰ã€‚æˆ‘ä»¬ä½¿ç”¨ä¸æ­¤è§’åº¦ä¸€è‡´çš„ç¬¦å·ï¼Œå› ä¸ºå®ƒä½¿å¾—å¯¹å¸æˆ·å†…å®¹è¿›è¡Œæ‰€æœ‰æ“ä½œå˜å¾—ç®€å•ï¼šå®ƒä»¬åªæ˜¯ç®€å•åœ°åŠ æ³•ï¼Œå¹¶ä¸”æ‰€æœ‰å¸æˆ·éƒ½è¢«åŒç­‰å¯¹å¾…ã€‚\nç›¸æ¯”ä¹‹ä¸‹ï¼Œä¼šè®¡å¸ˆä¼ ç»Ÿä¸Šå°†å…¶è´¦æˆ·çš„æ‰€æœ‰ä½™é¢ä¿æŒä¸ºæ­£æ•°ï¼Œå¹¶æ ¹æ®åº”ç”¨äºå“ªç§ç±»å‹çš„è´¦æˆ·è€Œä»¥ä¸åŒæ–¹å¼å¤„ç†å¯¹è¿™äº›è´¦æˆ·çš„è¿‡å¸ã€‚è¦åº”ç”¨äºæ¯ä¸ªè´¦æˆ·çš„ç¬¦å·å®Œå…¨ç”±å…¶ç±»å‹å†³å®šï¼šèµ„äº§å’Œè´¹ç”¨è´¦æˆ·æ˜¯å€Ÿæ–¹(debit)è´¦æˆ·ï¼Œè€Œè´Ÿå€ºã€æƒç›Šå’Œæ”¶å…¥è´¦æˆ·æ˜¯è´·æ–¹ ï¼ˆCreditï¼‰ è´¦æˆ·å¹¶éœ€è¦è¿›è¡Œç¬¦å·è°ƒæ•´ã€‚æ­¤å¤–ï¼Œåœ¨ä¸€ä¸ªå¸æˆ·ä¸Šè®°è´¦æ­£é‡‘é¢ç§°ä¸ºâ€œå€Ÿè®°ã€è¯‘è€…æ³¨ï¼šå¯ä»¥ç†è§£ä¸ºæ‰£æ¬¾ã€‘â€ï¼Œä»ä¸€ä¸ªå¸æˆ·ä¸­åˆ é™¤åˆ™ç§°ä¸ºâ€œè´·è®°ã€è¯‘è€…æ³¨ï¼šå¯ä»¥ç†è§£ä¸ºå…¥è´¦ã€‘â€ã€‚ä¾‹å¦‚ï¼Œè¯·å‚é˜…æ­¤å¤–éƒ¨æ–‡æ¡£ï¼Œå‡ ä¹è®©æˆ‘å¤´ç—›æ¬²è£‚ï¼Œè€Œè¿™ä¸ªæœ€è¿‘çš„ä¸»é¢˜æœ‰æ›´å¤šç»†èŠ‚ã€‚è¿™ç§å¤„ç†è¿‡ç¨‹ä½¿ä¸€åˆ‡å˜å¾—æ¯”å¿…é¡»å¤æ‚å¾—å¤šã€‚\nè¿™ç§æ–¹æ³•çš„é—®é¢˜åœ¨äºï¼Œå¯¹äº¤æ˜“ä¸­å„ä¸ªè®°è´¦é‡‘é¢è¿›è¡Œæ±‚å’Œä¸å†æ˜¯ä¸€ä¸ªç®€å•çš„åŠ æ³•ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä½ æ­£åœ¨åˆ›å»ºä¸€ç¬”æ–°äº¤æ˜“ï¼Œå¹¶å‘ä¸¤ä¸ªèµ„äº§è´¦æˆ·ã€ä¸€ä¸ªæ”¯å‡ºè´¦æˆ·å’Œä¸€ä¸ªæ”¶å…¥è´¦æˆ·è®°å¸ï¼Œç³»ç»Ÿå‘Šè¯‰ä½ æœ‰ 9.95 ç¾å…ƒçš„å·®é”™ã€‚ä½ ç›¯ç€è®°å½•çœ‹äº†åŠå¤©ï¼›å“ªä¸ªè®°è´¦å¤ªå°äº†ï¼Ÿè¿˜æ˜¯å…¶ä¸­ä¸€ä¸ªè®°è´¦å¤ªå¤§äº†ï¼Ÿæ­¤å¤–ï¼Œä¹Ÿè®¸éœ€è¦æ·»åŠ æ–°çš„è®°è´¦ï¼Œä½†å®ƒåº”è¯¥è®°åˆ°å€Ÿæ–¹è´¦æˆ·è¿˜æ˜¯è´·æ–¹è´¦æˆ·å‘¢ï¼Ÿè¿™éœ€è¦è¿›è¡Œç¹ççš„å¿ƒç†è¿ç®—ã€‚ä¸€äº›åŒé‡ä¼šè®¡è½¯ä»¶è¯•å›¾é€šè¿‡ä¸ºå€Ÿæ–¹å’Œè´·æ–¹åˆ†åˆ«åˆ›å»ºåˆ—ï¼Œå¹¶å…è®¸ç”¨æˆ·ä»…åœ¨ä¸æ¯ä¸ªè®°å¸ç±»å‹ç›¸å¯¹åº”çš„åˆ—ä¸­è¾“å…¥é‡‘é¢æ¥å¤„ç†æ­¤ç±»é—®é¢˜ã€‚è¿™å¯ä»¥åœ¨è§†è§‰ä¸Šæä¾›å¸®åŠ©ï¼Œä½†ä¸ºä»€ä¹ˆä¸ç›´æ¥ä½¿ç”¨ç¬¦å·å‘¢ï¼Ÿ\næ­¤å¤–ï¼Œå½“ä½ æŸ¥çœ‹ä¼šè®¡å…¬å¼æ—¶ï¼Œè¿˜å¿…é¡»è€ƒè™‘å®ƒä»¬çš„ç¬¦å·ã€‚è¿™ä½¿å¾—å¯¹å®ƒä»¬è¿›è¡Œè½¬æ¢å˜å¾—å¾ˆéº»çƒ¦ï¼Œå¹¶å°†æœ¬è´¨ä¸Šæ˜¯å¯¹è®°è´¦è¿›è¡Œç®€å•æ±‚å’Œçš„æ“ä½œå˜æˆäº†ä¸€ä¸ªå¤æ‚æ··ä¹±ã€éš¾ä»¥ç†è§£çš„è¿‡ç¨‹ã€‚\nåœ¨çº¯æ–‡æœ¬ä¼šè®¡ä¸­ï¼Œæˆ‘ä»¬å®æ„¿æ‘†è„±è¿™ç§ä¸æ–¹ä¾¿çš„è´Ÿæ•°ã€‚æˆ‘ä»¬åªä½¿ç”¨åŠ æ³•ï¼Œå¹¶å­¦ä¼šè®°ä½è´Ÿå€ºã€æƒç›Šå’Œæ”¶å…¥è´¦æˆ·é€šå¸¸å…·æœ‰è´Ÿä½™é¢ã€‚è™½ç„¶è¿™å¾ˆä¸å¯»å¸¸ï¼Œä½†æ›´å®¹æ˜“ç†è§£ã€‚å¦‚æœéœ€è¦æŸ¥çœ‹ä»…åŒ…å«æ­£æ•°çš„ä¼ ç»ŸæŠ¥å‘Šï¼Œåˆ™å¯ä»¥åœ¨æŠ¥å‘Šä»£ç ä¸­è§¦å‘è¯¥æ“ä½œ4ï¼Œåè½¬ç¬¦å·ä»¥å°†å…¶å‘ˆç°åœ¨è¾“å‡ºä¸­ã€‚\nä¼šè®¡æ’ç­‰å¼ æ ¹æ®å‰é¢çš„éƒ¨åˆ†ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°ç”¨æœ‰ç¬¦å·çš„æœ¯è¯­è¡¨è¾¾ä¼šè®¡æ–¹ç¨‹ã€‚å¦‚æœï¼Œ\nA = æ‰€æœ‰èµ„äº§è®°è´¦ä¹‹å’Œ L = æ‰€æœ‰è´Ÿå€ºè®°è´¦ä¹‹å’Œ X = æ‰€æœ‰æ”¯å‡ºè®°è´¦ä¹‹å’Œ I = æ‰€æœ‰æ”¶å…¥è®°è´¦ä¹‹å’Œ E = æ‰€æœ‰è‚¡æƒè®°è´¦ä¹‹å’Œ æˆ‘ä»¬å¯ä»¥è¿™æ ·ï¼š\nA + L + E + X + I = 0 è¿™æ˜¯ç”±äºä»¥ä¸‹äº‹å®å¯¼è‡´çš„ï¼š\nsum(all postings) = 0 æ‰€æœ‰è®°è´¦çš„æ€»å’Œ = 0 è¿™æ˜¯å› ä¸ºæ¯ç¬”äº¤æ˜“éƒ½è¢« Beancount å¼ºåˆ¶ä¿è¯æ€»å’Œä¸ºé›¶ï¼š\nfor all transactions t, sum(postings of t) = 0 å¯¹äºæ‰€æœ‰çš„äº¤æ˜“ tï¼Œt çš„æ‰€æœ‰è´¦ç›®ä¹‹å’Œç­‰äº 0 æ­¤å¤–ï¼Œæ”¶å…¥å’Œæ”¯å‡ºè®°è´¦çš„æ€»å’Œæ˜¯å‡€æ”¶å…¥ ï¼ˆNIï¼‰ï¼š\nNI = X + I å¦‚æœæˆ‘ä»¬é€šè¿‡å°†æ”¶å…¥æ¸…ç®—åˆ°è‚¡æƒç•™å­˜æ”¶ç›Šè´¦æˆ·æ¥åæ˜ æ€»å‡€æ”¶å…¥å½±å“ï¼Œè°ƒæ•´è‚¡æƒï¼Œåˆ™å¯ä»¥å¾—åˆ°æ›´æ–°åçš„è‚¡æƒä»·å€¼ï¼ˆE\u0026rsquo;ï¼‰ï¼š\nEâ€™ = E + NI = E + X + I æˆ‘ä»¬æœ‰ä¸€ä¸ªç®€åŒ–çš„ä¼šè®¡å…¬å¼ï¼š\nA + L + E\u0026#39; = 0 å¦‚æœæˆ‘ä»¬è°ƒæ•´å€Ÿæ–¹å’Œè´·æ–¹çš„ç¬¦å·ï¼ˆå‚è§å‰ä¸€èŠ‚ï¼‰ï¼Œå¹¶ä¸”æ‰€æœ‰é‡‘é¢éƒ½æ˜¯æ­£æ•°ï¼Œé‚£ä¹ˆè¿™å°±å˜æˆäº†ç†Ÿæ‚‰çš„ä¼šè®¡æ’ç­‰å¼ï¼š\nAssets - Liabilities = Equity æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œæ€»æ˜¯æŠŠæ•°å­—åŠ èµ·æ¥è¦å®¹æ˜“å¾—å¤šã€‚\nçº¯æ–‡æœ¬è®°è´¦ å¥½çš„ï¼Œç°åœ¨æˆ‘ä»¬ç†è§£äº†è¿™ç§æ–¹æ³•åŠå…¶åœ¨ç†è®ºä¸Šèƒ½ä¸ºæˆ‘ä»¬åšäº›ä»€ä¹ˆã€‚å¤å¼è®°è´¦ç³»ç»Ÿçš„ç›®çš„æ˜¯å…è®¸ä½ å°†å‘ç”Ÿåœ¨å„ç§çœŸå®è´¦æˆ·ä¸­çš„äº¤æ˜“å¤åˆ¶åˆ°ä¸€ä¸ªå•ä¸€ã€ç»Ÿä¸€çš„ç³»ç»Ÿä¸­ï¼Œåœ¨ä¸€ä¸ªå…±åŒçš„è¡¨ç¤ºä¸‹ï¼Œå¹¶ä»è¿™äº›æ•°æ®ä¸­æå–å„ç§è§†å›¾å’ŒæŠ¥å‘Šã€‚ç°åœ¨è®©æˆ‘ä»¬æŠŠæ³¨æ„åŠ›è½¬å‘å¦‚ä½•å®è·µè®°å½•è¿™äº›æ•°æ®ã€‚\næœ¬æ–‡ä»‹ç»äº† Beancountï¼Œå…¶ç›®çš„æ˜¯ â€œä½¿ç”¨æ–‡æœ¬æ–‡ä»¶è¿›è¡Œå¤å¼è®°è´¦â€ã€‚Beancount å®ç°äº†ä¸€ä¸ªè§£æå™¨ï¼Œç”¨äºè§£æç®€å•è¯­æ³•ä»¥è®°å½•äº¤æ˜“å’Œè®°è´¦ã€‚ä¾‹å¦‚äº¤æ˜“çš„è¯­æ³•çœ‹èµ·æ¥åƒè¿™æ ·ï¼š\n2016-12-06 * \u0026#34;Biang!\u0026#34; \u0026#34;Dinner\u0026#34; Liabilities:CreditCard -47.23 USD Expenses:Restaurants ä½ å¯ä»¥åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­å†™å…¥è®¸å¤šè¿™æ ·çš„å£°æ˜ï¼ŒBeancount å°†è¯»å–å®ƒå¹¶åœ¨å†…å­˜ä¸­åˆ›å»ºç›¸åº”çš„æ•°æ®ç»“æ„ã€‚\néªŒè¯ ï¼ˆVerificationï¼‰ã€‚åœ¨è§£æå®Œäº¤æ˜“åï¼ŒBeancount è¿˜ä¼šéªŒè¯å¤å¼è®°è´¦æ³•åˆ™ï¼šå®ƒæ£€æŸ¥æ‰€æœ‰äº¤æ˜“çš„è®°è´¦æ€»å’Œæ˜¯å¦ä¸ºé›¶ã€‚å¦‚æœä½ çŠ¯äº†é”™è¯¯å¹¶è®°å½•äº†ä¸€ä¸ªéé›¶ä½™é¢çš„äº¤æ˜“ï¼Œåˆ™ä¼šæ˜¾ç¤ºé”™è¯¯ã€‚\nä½™é¢æ–­è¨€ ï¼ˆBalance Assertionsï¼‰ã€‚Beancount å…è®¸ä½ å¤åˆ¶ä»å¤–éƒ¨è´¦æˆ·å£°æ˜çš„ä½™é¢ï¼Œä¾‹å¦‚æœˆåº¦å¯¹è´¦å•ä¸Šå†™çš„ä½™é¢ã€‚å®ƒä¼šå¤„ç†è¿™äº›ä¿¡æ¯å¹¶æ£€æŸ¥è¾“å…¥äº¤æ˜“äº§ç”Ÿçš„ä½™é¢æ˜¯å¦ä¸å£°æ˜çš„ä½™é¢ç›¸åŒ¹é…ã€‚è¿™æœ‰åŠ©äºä½ è½»æ¾åœ°å‘ç°å’Œçº æ­£é”™è¯¯ã€‚\næ’ä»¶ ï¼ˆPluginsï¼‰ã€‚Beancount å…è®¸ä½ æ„å»ºå¯ä»¥è‡ªåŠ¨åŒ–å’Œ/æˆ–å¤„ç†è¾“å…¥æ–‡ä»¶ä¸­çš„äº¤æ˜“æµçš„ç¨‹åºã€‚ä½ å¯ä»¥é€šè¿‡ç¼–å†™ç›´æ¥å¤„ç†äº¤æ˜“æµçš„ä»£ç æ¥æ„å»ºè‡ªå®šä¹‰åŠŸèƒ½ã€‚\næŸ¥è¯¢å’ŒæŠ¥å‘Šï¼ˆQuerying \u0026amp; Reportingï¼‰ã€‚å®ƒæä¾›äº†å·¥å…·æ¥å¤„ç†äº¤æ˜“æµï¼Œä»¥ç”Ÿæˆæˆ‘ä»¬åœ¨æœ¬æ–‡ä¸­æ—©æœŸè®¨è®ºè¿‡çš„å„ç§æŠ¥å‘Šã€‚\nè¿˜æœ‰ä¸€äº›ç»†èŠ‚ï¼Œä¾‹å¦‚ Beancount å…è®¸ä½ è·Ÿè¸ªæˆæœ¬åŸºç¡€å’Œè¿›è¡Œè´§å¸è½¬æ¢ï¼Œä½†è¿™å°±æ˜¯å®ƒçš„æœ¬è´¨ã€‚\nè¡¨æ ¼è§†è§’ é‚®ä»¶åˆ—è¡¨ä¸Šç”¨æˆ·å‡ ä¹æ€»æ˜¯æå‡ºçš„å…³äºå¦‚ä½•è®¡ç®—æˆ–è·Ÿè¸ªæŸäº›å€¼çš„é—®é¢˜ï¼Œå…¶å®å¯ä»¥å¾ˆå®¹æ˜“åœ°è§£å†³ï¼šåªéœ€å°†æ•°æ®è§†ä¸ºä¸€é•¿ä¸²è¡Œï¼Œå…¶ä¸­ä¸€äº›éœ€è¦è¿›è¡Œè¿‡æ»¤å’Œèšåˆã€‚å¦‚æœä½ è€ƒè™‘åˆ°æˆ‘ä»¬æœ€ç»ˆæ‰€åšçš„å°±æ˜¯æ¨å¯¼è¿™äº›è®°è´¦çš„æ€»å’Œï¼Œå¹¶ä¸”äº¤æ˜“å’Œè®°è´¦çš„å±æ€§å…è®¸æˆ‘ä»¬è¿‡æ»¤è®°è´¦çš„å­é›†ï¼Œé‚£ä¹ˆå®ƒæ€»æ˜¯å˜å¾—éå¸¸ç®€å•ã€‚åœ¨å‡ ä¹æ‰€æœ‰æƒ…å†µä¸‹ï¼Œç­”æ¡ˆéƒ½æ˜¯æ‰¾åˆ°æŸç§æ–¹å¼æ¥æ¶ˆé™¤å¯¹è®°è´¦è¿›è¡Œé€‰æ‹©æ—¶å¯èƒ½å­˜åœ¨æ­§ä¹‰æ€§ï¼Œä¾‹å¦‚é€šè®°è´¦æˆ·åç§°ã€é™„åŠ æ ‡ç­¾ã€ä½¿ç”¨æŸäº›å…ƒæ•°æ®ç­‰ã€‚è€ƒè™‘å°†æ­¤æ•°æ®è¡¨ç¤ºä¸ºè¡¨æ ¼å¯èƒ½ä¼šæœ‰å¯å‘ä½œç”¨ã€‚\nå‡è®¾ä½ æœ‰ä¸¤ä¸ªè¡¨ï¼šä¸€ä¸ªåŒ…å«æ¯ä¸ªäº¤æ˜“çš„å­—æ®µï¼Œä¾‹å¦‚æ—¥æœŸå’Œæè¿°ï¼Œå¦ä¸€ä¸ªåŒ…å«æ¯ä¸ªè®°è´¦çš„å­—æ®µï¼Œä¾‹å¦‚è´¦æˆ·ã€é‡‘é¢å’Œè´§å¸ï¼Œä»¥åŠå¯¹å…¶çˆ¶äº¤æ˜“çš„å¼•ç”¨ã€‚è¡¨ç¤ºæ•°æ®æœ€ç®€å•çš„æ–¹æ³•æ˜¯è¿æ¥ ï¼ˆJoinï¼‰è¿™ä¸¤ä¸ªè¡¨ï¼Œåœ¨æ¯ä¸ªè®°è´¦ä¸­å¤åˆ¶çˆ¶äº¤æ˜“çš„å€¼ã€‚\næ¯”å¦‚ï¼Œè¿™ä¸ª Beancount è¾“å…¥ï¼š\n2016-12-04 * \u0026#34;Christmas gift\u0026#34; Liabilities:CreditCard -153.45 USD Expenses:Gifts 2016-12-06 * \u0026#34;Biang!\u0026#34; \u0026#34;Dinner\u0026#34; Liabilities:CreditCard -47.23 USD Expenses:Restaurants 2016-12-07 * \u0026#34;Pouring Ribbons\u0026#34; \u0026#34;Drinks with friends\u0026#34; Assets:Cash -25.00 USD Expenses:Tips 4.00 USD Expenses:Alcohol å¯ä»¥åƒè¿™æ ·å‘ˆç°æˆä¸€ä¸ªè¡¨æ ¼ï¼š\nDate Fl Payee Narration Account Number Ccy 2016-12-04 * Christmas gift Liabilities:CreditCard -153.45 USD 2016-12-04 * Christmas gift Expenses:Gifts 153.45 USD 2016-12-06 * Biang! Dinner Liabilities:CreditCard -47.23 USD 2016-12-06 * Biang! Dinner Expenses:Restaurants 47.23 USD 2016-12-07 * Pouring Ribbons Drinks with friends Assets:Cash -25.00 USD 2016-12-07 * Pouring Ribbons Drinks with friends Expenses:Tips 4.00 USD 2016-12-07 * Pouring Ribbons Drinks with friends Expenses:Alcohol 21.00 USD è¯·æ³¨æ„ï¼Œæ¯ä¸ªè®°è´¦éƒ½ä¼šå¤åˆ¶äº¤æ˜“å­—æ®µçš„å€¼ã€‚è¿™å°±åƒå¸¸è§„æ•°æ®åº“è¿æ¥æ“ä½œä¸€æ ·ã€‚è®°è´¦å­—æ®µä» â€œAccountâ€ åˆ—å¼€å§‹ã€‚ï¼ˆè¿˜è¦æ³¨æ„ï¼Œæ­¤ç¤ºä¾‹è¡¨æ ¼æ˜¯ç®€åŒ–çš„ï¼›å®é™…ä¸Šæœ‰æ›´å¤šçš„å­—æ®µã€‚ï¼‰\nå¦‚æœä½ æœ‰ä¸€ä¸ªåƒè¿™æ ·çš„è¿æ¥è¡¨ï¼Œä½ å¯ä»¥å¯¹å…¶è¿›è¡Œè¿‡æ»¤å¹¶æ±‡æ€»ä»»æ„åˆ†ç»„çš„è®°è´¦é‡‘é¢ã€‚è¿™æ­£æ˜¯ bean-query å·¥å…·å…è®¸ä½ æ‰§è¡Œçš„æ“ä½œï¼šä½ å¯ä»¥åœ¨æ•°æ®ä¸Šè¿è¡Œä¸å†…å­˜è¡¨ç­‰æ•ˆçš„ SQL æŸ¥è¯¢ï¼Œå¹¶åˆ—å‡ºå¦‚ä¸‹å€¼ï¼š\nSELECT date, payee, number WHERE account = \u0026#34;Liabilities:CreditCard\u0026#34;; æˆ–è€…åƒè¿™æ ·èšåˆæŒä»“ï¼š\nSELECT account, sum(position) GROUP BY account; è¿™ä¸ªç®€å•çš„å‘½ä»¤ä¼šç”Ÿæˆè¯•ç®—å¹³è¡¡è¡¨ã€‚\nè¯·æ³¨æ„ï¼Œè¡¨æ ¼è¡¨ç¤ºå¹¶ä¸ä¼šæœ¬è´¨ä¸Šé™åˆ¶è®°è´¦æ€»å’Œä¸ºé›¶ã€‚å¦‚æœä½ åœ¨ WHERE å­å¥ä¸­å§‹ç»ˆé€‰æ‹©æ¯ä¸ªåŒ¹é…äº¤æ˜“çš„æ‰€æœ‰è®°è´¦ï¼Œåˆ™å¯ä»¥ç¡®ä¿æ‰€æœ‰è®°è´¦çš„æœ€ç»ˆæ€»å’Œä¸ºé›¶ã€‚å¦åˆ™ï¼Œæ€»å’Œå¯èƒ½æ˜¯å…¶ä»–ä»»ä½•å€¼ã€‚è¿™æ˜¯éœ€è¦è®°ä½çš„ä¸€äº›äº‹æƒ…ã€‚\nå¦‚æœä½ ç†Ÿæ‚‰ SQL æ•°æ®åº“ï¼Œä½ å¯èƒ½ä¼šé—®ä¸ºä»€ä¹ˆ Beancount ä¸ç›´æ¥å¤„ç†æ•°æ®ä»¥å¡«å……ç°æœ‰çš„æ•°æ®åº“ç³»ç»Ÿï¼Œè¿™æ ·ç”¨æˆ·å°±å¯ä»¥ä½¿ç”¨é‚£äº›æ•°æ®åº“å·¥å…·ã€‚è¿™å…¶ä¸­æœ‰ä¸¤ä¸ªä¸»è¦åŸå› ï¼š\næŠ¥å‘Šæ“ä½œã€‚ ä¸ºäº†ç”Ÿæˆæ”¶å…¥æŠ¥è¡¨å’Œèµ„äº§è´Ÿå€ºè¡¨ï¼Œéœ€è¦ä½¿ç”¨å…ˆå‰æè¿°çš„æ¸…é™¤ã€æ‰“å¼€å’Œå…³é—­æ“ä½œå¯¹äº¤æ˜“åˆ—è¡¨è¿›è¡Œé¢„å¤„ç†ã€‚è¿™äº›æ“ä½œåœ¨æ•°æ®åº“æŸ¥è¯¢ä¸­å®ç°å¹¶ä¸å®¹æ˜“ï¼Œå¹¶ä¸”ä¾èµ–äºæŠ¥å‘Šæœ¬èº«ï¼Œç†æƒ³æƒ…å†µä¸‹ä¸éœ€è¦ä¿®æ”¹è¾“å…¥æ•°æ®ã€‚æˆ‘ä»¬å¿…é¡»å°†è®°è´¦æ•°æ®åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œç„¶åè¿è¡Œä¸€äº›ä»£ç ã€‚é€šè¿‡è§£æè¾“å…¥æ–‡ä»¶ï¼Œæˆ‘ä»¬å·²ç»åœ¨æ‰§è¡Œæ­¤æ“ä½œï¼›æ•°æ®åº“æ­¥éª¤æ˜¯å¤šä½™çš„ã€‚\nèšå’ŒæŒä»“ã€‚ è™½ç„¶åœ¨æœ¬æ–‡æ¡£ä¸­æˆ‘ä»¬è¿˜æ²¡æœ‰è®¨è®ºè¿‡ï¼Œä½†è´¦æˆ·çš„å†…å®¹å¯èƒ½åŒ…å«ä¸åŒç±»å‹çš„å•†å“ä»¥åŠé™„å¸¦æˆæœ¬åŸºç¡€çš„æŒä»“ã€‚è¿™äº›æŒä»“å¦‚ä½•èšåˆåœ¨ä¸€èµ·éœ€è¦å®ç°è‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œå› ä¸ºå®ƒéµå¾ªæœ‰å…³æŒä»“å¦‚ä½•ç›¸äº’æŠµæ¶ˆçš„æŸäº›è§„åˆ™ï¼ˆè¯¦è§ã€Šåº“å­˜å·¥ä½œåŸç†ã€‹ï¼‰ã€‚å¦‚æœè¦è¶…å‡ºä»…ä½¿ç”¨å•ä¸ªè´§å¸å¹¶å¿½ç•¥æˆæœ¬åŸºç¡€çš„æƒ…å†µä¸‹ï¼Œåœ¨ SQL æ•°æ®åº“ä¸­æ„å»ºè¿™äº›æ“ä½œå°†éå¸¸å›°éš¾ã€‚\nè¿™å°±æ˜¯ä¸ºä»€ä¹ˆ Beancount æä¾›äº†ä¸€ä¸ªè‡ªå®šä¹‰å·¥å…·æ¥ç›´æ¥å¤„ç†å’ŒæŸ¥è¯¢å…¶æ•°æ®çš„åŸå› ï¼šå®ƒæä¾›äº†è‡ªå·±çš„ SQL å®¢æˆ·ç«¯å®ç°ï¼Œè®©ä½ å¯ä»¥æŒ‡å®šå¼€æ”¾å’Œå…³é—­æ—¥æœŸï¼Œå¹¶åˆ©ç”¨è‡ªå®šä¹‰â€œåº“å­˜â€æ•°æ®ç»“æ„åˆ›å»ºè®°è´¦æŒä»“æ€»æ•°ã€‚è¯¥å·¥å…·æ”¯æŒ Beancount æ ¸å¿ƒç±»å‹çš„åˆ—ï¼šAmount (é‡‘é¢)ã€Position (æŒä»“) å’Œ Inventory (ä»“åº“) å¯¹è±¡ã€‚\nï¼ˆæ— è®ºå¦‚ä½•ï¼Œå¦‚æœä½ è¿˜ä¸ä¿¡æœï¼ŒBeancount æä¾›äº†ä¸€ç§å°†å…¶å†…å®¹å¯¼å‡ºåˆ°å¸¸è§„ SQL æ•°æ®åº“ç³»ç»Ÿçš„å·¥å…·ã€‚å¦‚æœä½ æ„¿æ„ï¼Œè¯·éšæ„å°è¯•å¹¶è‡ªè¡Œå®éªŒã€‚ï¼‰\nè¯·ä¸è¦å…³æ³¨è¿™äº›å¤§æ•°å­—ä¸­çš„æ•°å­—ï¼Œå®ƒä»¬æ˜¯éšæœºç”Ÿæˆçš„ï¼Œä¸åæ˜ å®é™…æƒ…å†µã€‚æˆ‘ä»¬åªå¯¹è¿™äº›å›¾è¡¨çš„ç»“æ„æ„Ÿå…´è¶£ã€‚\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nè¯·æ³¨æ„ï¼Œè¿™ä¸â€œæ¸…ç®—äº¤æ˜“â€ä¸€è¯æ— å…³ï¼Œåè€…æ„å‘³ç€æ‰¿è®¤æˆ–æ ‡è®°æŸäº›äº¤æ˜“å·²ç»è¢«ç°¿è®°å‘˜æŸ¥çœ‹å¹¶æ£€æŸ¥å…¶æ­£ç¡®æ€§ã€‚\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nè¯·æ³¨æ„ï¼Œæ“ä½œä¸ Beancount æä¾›çš„ Open å’Œ Close æŒ‡ä»¤æ— å…³ã€‚\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nç›®å‰åœ¨ Beancount ä¸­è¿˜æ²¡æœ‰æä¾›æ­¤åŠŸèƒ½ï¼Œä½†å®ç°èµ·æ¥éå¸¸ç®€å•ã€‚æˆ‘ä»¬åªéœ€è¦å€’è½¬è´Ÿå€ºã€æ”¶å…¥å’Œæƒç›Šè´¦æˆ·ä½™é¢å³å¯ã€‚æœ€ç»ˆå°†æä¾›æ­¤åŠŸèƒ½ã€‚\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","permalink":"https://lexcao.io/zh/posts/double-entry-counting-method/","summary":"\u003cp\u003eç¿»è¯‘è‡ª \u003ca href=\"https://beancount.github.io/docs/the_double_entry_counting_method.html\"\u003e\u003cem\u003eThe Double-Entry Counting Method\u003c/em\u003e\u003c/a\u003e\u003c/p\u003e\n\u003ch1 id=\"ä»‹ç»\"\u003eä»‹ç»\u003c/h1\u003e\n\u003cp\u003eæœ¬æ–‡æ˜¯ä¸€ä»½å…³äºå¤å¼è®°è´¦çš„ç®€è¦ä»‹ç»ï¼Œä»è®¡ç®—æœºç§‘å­¦å®¶çš„è§’åº¦æ’°å†™ã€‚å®ƒè¯•å›¾ä»¥å°½å¯èƒ½ç®€å•çš„æ–¹æ³•è§£é‡ŠåŸºç¡€è®°è´¦ï¼Œç®€åŒ–ä¼šè®¡ä¸­é€šå¸¸æ¶‰åŠåˆ°çš„æŸäº›ç‰¹æ®Šæ€§ã€‚å®ƒä¹Ÿä»£è¡¨äº† \u003ca href=\"http://furius.ca/beancount/\"\u003eBeancount\u003c/a\u003e çš„å·¥ä½œæ–¹å¼ï¼Œå¹¶ä¸”å¯¹æ‰€æœ‰ä½¿ç”¨çº¯æ–‡æœ¬è®°è´¦çš„ç”¨æˆ·éƒ½åº”è¯¥é€‚ç”¨ã€‚\u003c/p\u003e\n\u003cp\u003eè¯·æ³¨æ„ï¼Œæˆ‘ä¸æ˜¯ä¼šè®¡å¸ˆï¼Œåœ¨ç¼–å†™æ­¤æ–‡æ¡£è¿‡ç¨‹ä¸­ï¼Œæˆ‘å¯èƒ½ä½¿ç”¨ä¸ä¼ ç»Ÿä¼šè®¡åŸ¹è®­æ•™æˆç•¥æœ‰ä¸åŒæˆ–ä¸å¸¸è§çš„æœ¯è¯­ã€‚æˆ‘ç»™è‡ªå·±æˆæƒåˆ›é€ ä¸€äº›æ–°çš„ã€ç”šè‡³æ˜¯ä¸å¯»å¸¸çš„ä¸œè¥¿ï¼Œä»¥ä¾¿å°†è¿™äº›æƒ³æ³•å°½å¯èƒ½ç®€å•æ˜äº†åœ°è§£é‡Šç»™é‚£äº›å¯¹å®ƒä»¬ä¸ç†Ÿæ‚‰çš„äººã€‚\u003c/p\u003e\n\u003cp\u003eæˆ‘è®¤ä¸ºæ¯ä¸ªé«˜ä¸­ç”Ÿéƒ½åº”è¯¥åœ¨é«˜ä¸­é˜¶æ®µå­¦ä¹ å¤å¼è®°è´¦æ³•ï¼Œå› ä¸ºè¿™æ˜¯ä¸€é¡¹æå…¶æœ‰ç”¨çš„ç»„ç»‡æŠ€èƒ½ï¼Œå¹¶ä¸”æˆ‘å¸Œæœ›è¿™ç¯‡æ–‡ç« å¯ä»¥å¸®åŠ©å°†å…¶çŸ¥è¯†ä¼ æ’­åˆ°ä¸“ä¸šåœˆä»¥å¤–çš„é¢†åŸŸã€‚\u003c/p\u003e\n\u003ch1 id=\"å¤å¼è®°è´¦çš„åŸºç¡€\"\u003eå¤å¼è®°è´¦çš„åŸºç¡€\u003c/h1\u003e\n\u003cp\u003eå¤å¼è®°è´¦æ³•åªæ˜¯ä¸€ç§ç®€å•çš„è®¡æ•°æ–¹æ³•ï¼Œåªæœ‰ä¸€äº›ç®€å•çš„è§„åˆ™ã€‚\u003c/p\u003e\n\u003cp\u003eè®©æˆ‘ä»¬ä»å®šä¹‰è´¦æˆ·çš„æ¦‚å¿µå¼€å§‹ã€‚è´¦æˆ·æ˜¯ä¸€ç§å¯ä»¥å®¹çº³ç‰©å“çš„ä¸œè¥¿ï¼Œå°±åƒä¸€ä¸ªè¢‹å­ã€‚å®ƒç”¨äºè®¡ç®—å’Œç´¯ç§¯ç‰©å“ã€‚è®©æˆ‘ä»¬ç”»ä¸€æ¡æ°´å¹³ç®­å¤´æ¥ç›´è§‚åœ°è¡¨ç¤ºéšç€æ—¶é—´æ¨ç§»è´¦æˆ·ä¸­ä¸æ–­å˜åŒ–çš„å†…å®¹ï¼š\u003c/p\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://beancount.github.io/docs/the_double_entry_counting_method/media/2f37aa3938d599d4783ca9b74965026fba0a3b50.png#center\" alt=\"Untitled\"  /\u003e\n\u003c/p\u003e\n\u003cp\u003eå·¦ä¾§ï¼Œæ˜¯æè¿°è¿‡å»ï¼Œè€Œå³ä¾§åˆ™æ˜¯ä¸æ–­å¢é•¿çš„æ—¶é—´ï¼šç°åœ¨ã€æœªæ¥ç­‰ã€‚\u003c/p\u003e\n\u003cp\u003eç°åœ¨ï¼Œè®©æˆ‘ä»¬å‡è®¾è´¦æˆ·åªèƒ½åŒ…å«ä¸€ç§ä¸œè¥¿ï¼Œä¾‹å¦‚ç¾å…ƒã€‚æ‰€æœ‰çš„è´¦æˆ·éƒ½ä»¥é›¶ç¾å…ƒçš„ç©ºå†…å®¹å¼€å§‹ã€‚æˆ‘ä»¬å°†ç§°è´¦æˆ·ä¸­å•ä½æ•°é‡ä¸ºè´¦æˆ·çš„ \u003cstrong\u003eä½™é¢ ï¼ˆBalanceï¼‰\u003c/strong\u003eã€‚è¯·æ³¨æ„ï¼Œå®ƒä»£è¡¨äº†ç‰¹å®šæ—¶é—´ç‚¹ä¸Šå…¶å†…å®¹çš„æƒ…å†µã€‚æˆ‘ä¼šä½¿ç”¨ä¸€ä¸ªæ•°å­—åœ¨å¸æˆ·æ—¶é—´è½´ä¸Šæ–¹ç»˜åˆ¶ä½™é¢ï¼š\u003c/p\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://beancount.github.io/docs/the_double_entry_counting_method/media/54633827be99c315dc937778221752b848411ca9.png#center\" alt=\"Untitled\"  /\u003e\n\u003c/p\u003e\n\u003cp\u003eè´¦æˆ·çš„å†…å®¹ä¼šéšç€æ—¶é—´è€Œå˜åŒ–ã€‚ä¸ºäº†æ”¹å˜è´¦æˆ·çš„å†…å®¹ï¼Œæˆ‘ä»¬å¿…é¡»å‘å…¶æ·»åŠ ä¸€äº›ä¸œè¥¿ã€‚æˆ‘ä»¬å°†è¿™ä¸ªæ·»åŠ ç§°ä¸ºå¯¹è´¦æˆ·çš„è®°è´¦ï¼Œæˆ‘ä¼šåœ¨è¯¥è´¦æˆ·çš„æ—¶é—´è½´ä¸Šç”»ä¸€ä¸ªå¸¦åœˆæ•°å­—æ¥è¡¨ç¤ºè¿™ç§å˜åŒ–ï¼Œä¾‹å¦‚ï¼šå‘è¯¥è´¦æˆ·ä¸­æ·»åŠ  100 ç¾å…ƒï¼š\u003c/p\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://beancount.github.io/docs/the_double_entry_counting_method/media/004bc3354eb84bf554a8e5080a21f8d16fc29d82.png#center\" alt=\"Untitled\"  /\u003e\n\u003c/p\u003e\n\u003cp\u003eç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è®°è´¦åç»˜åˆ¶æ›´æ–°åçš„è´¦æˆ·ä½™é¢ï¼Œå¹¶åœ¨å…¶åé¢åŠ ä¸Šå¦ä¸€ä¸ªå°æ•°å­—ï¼š\u003c/p\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://beancount.github.io/docs/the_double_entry_counting_method/media/6281f96c3465982c6bf48fccb302b40f90890311.png#center\" alt=\"Untitled\"  /\u003e\n\u003c/p\u003e\n\u003cp\u003eè´¦æˆ·åŠ ä¸Š 100 ç¾å…ƒåï¼Œä½™é¢ç°åœ¨ä¸º 100 ç¾å…ƒã€‚\u003c/p\u003e\n\u003cp\u003eæˆ‘ä»¬ä¹Ÿå¯ä»¥ä»è´¦æˆ·ä¸­å‡å»ä¸€å®šé‡‘é¢ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å‡å» 25 ç¾å…ƒï¼Œè¿™æ ·è´¦æˆ·ä½™é¢å°±å˜æˆäº† 75 ç¾å…ƒï¼š\u003c/p\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://beancount.github.io/docs/the_double_entry_counting_method/media/1672e121ec80f8fcdb158bb497e05e6dc809dee5.png#center\" alt=\"Untitled\"  /\u003e\n\u003c/p\u003e\n\u003cp\u003eå¦‚æœæˆ‘ä»¬å‡å»çš„é‡‘é¢è¶…è¿‡è´¦æˆ·ä½™é¢ï¼Œè´¦æˆ·ä½™é¢ä¹Ÿå¯èƒ½å˜ä¸ºè´Ÿæ•°ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬ä»è¯¥è´¦æˆ·ä¸­å–å‡º 200 ç¾å…ƒï¼Œåˆ™ä½™é¢ç°åœ¨å˜ä¸º -125 ç¾å…ƒï¼š\u003c/p\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://beancount.github.io/docs/the_double_entry_counting_method/media/862c0b57a35631a52eead2cf8cdd7b5f2a1aa106.png#center\" alt=\"Untitled\"  /\u003e\n\u003c/p\u003e\n\u003cp\u003eè´¦æˆ·ä¸­åŒ…å«è´Ÿæ•°æ˜¯å®Œå…¨æ­£å¸¸çš„ã€‚è¯·è®°ä½ï¼Œæˆ‘ä»¬æ‰€åšçš„åªæ˜¯è®¡æ•°ã€‚å¾ˆå¿«æˆ‘ä»¬ä¼šçœ‹åˆ°ï¼Œæœ‰äº›è´¦æˆ·åœ¨å®ƒä»¬çš„æ—¶é—´è½´ä¸Šå°†ä¿æŒè´Ÿä½™é¢ã€‚\u003c/p\u003e\n\u003ch2 id=\"æŠ¥è¡¨-statement\"\u003eæŠ¥è¡¨ ï¼ˆStatementï¼‰\u003c/h2\u003e\n\u003cp\u003eå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæˆ‘åœ¨å‰ä¸€èŠ‚ä¸­å†™ä¸‹çš„æ—¶é—´çº¿è®°è´¦ä¸æœºæ„ä¸ºæ¯ä¸ªå®¢æˆ·ç»´æŠ¤å¹¶é€šå¸¸é€šè¿‡é‚®ä»¶å‘é€çš„çº¸è´¨è´¦æˆ·æŠ¥è¡¨ç±»ä¼¼ï¼š\u003c/p\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eæ—¶é—´\u003c/th\u003e\n          \u003cth\u003eæè¿°\u003c/th\u003e\n          \u003cth\u003eé‡‘é¢\u003c/th\u003e\n          \u003cth\u003eä½™é¢\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e2016-10-02\u003c/td\u003e\n          \u003ctd\u003eâ€¦\u003c/td\u003e\n          \u003ctd\u003e100.00\u003c/td\u003e\n          \u003ctd\u003e1100.00\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e2016-10-05\u003c/td\u003e\n          \u003ctd\u003e..\u003c/td\u003e\n          \u003ctd\u003e-25.00\u003c/td\u003e\n          \u003ctd\u003e1075.00\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e2016-10-06\u003c/td\u003e\n          \u003ctd\u003e..\u003c/td\u003e\n          \u003ctd\u003e-200.00\u003c/td\u003e\n          \u003ctd\u003e875.00\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eæœ€ç»ˆç»“ä½™\u003c/td\u003e\n          \u003ctd\u003e875.00\u003c/td\u003e\n          \u003ctd\u003e\u003c/td\u003e\n          \u003ctd\u003e\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003eæœ‰æ—¶å€™é‡‘é¢æ ä¼šè¢«åˆ†æˆä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¾ç¤ºæ­£æ•°ï¼Œå¦ä¸€ä¸ªæ˜¾ç¤ºè´Ÿæ•°ï¼š\u003c/p\u003e","title":"ã€Œç¿»è¯‘ã€å¤å¼è®°è´¦æ³• (The Double-Entry Counting Method)"},{"content":"èƒŒæ™¯ æœ¬æ–‡æ˜¯ Spring Data JPA å¤šæ¡ä»¶è¿è¡¨æŸ¥è¯¢ æ–‡ç« çš„æœ€ä½³å®è·µæ€»ç»“ã€‚\nè§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ ä½¿ç”¨ Spring Data JPA éœ€è¦é’ˆå¯¹å¤šæ¡ä»¶è¿›è¡Œè¿è¡¨æŸ¥è¯¢çš„åœºæ™¯ä¸ä½¿ç”¨åŸç”Ÿ SQL æˆ–è€… HQL çš„æ—¶å€™ï¼Œä»…ä»…é€šè¿‡ JpaSpecificationExecutor æ„é€  Specification åŠ¨æ€æ¡ä»¶è¯­å¥æ¥å®ç°ç±»å‹å®‰å…¨çš„å¤šæ¡ä»¶æŸ¥è¯¢ã€‚\nè¯´æ˜ ç›¸å…³ä¸Šä¸‹æ–‡èƒŒæ™¯è¯·å‰å¾€ å‰æ–‡ äº†è§£ã€‚ è¿™é‡Œå†æä¸€ä¸‹æ¥ä¸‹æ¥ç¤ºä¾‹ä¼šç”¨åˆ°çš„åœºæ™¯ï¼š\nä¸‰ä¸ªå®ä½“ï¼šä½œè€…ã€ä¹¦ã€ä¹¦è¯„ã€‚å…¶ä¸­ï¼Œä½œè€…ä¸ä¹¦æ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ï¼Œä¹¦ä¸ä¹¦è¯„æ˜¯ä¸€å¯¹ä¸€çš„å…³ç³»ï¼ˆå½“ç„¶ä¹¦è¯„ä¸è¯»è€…çš„è¯„ä»·æ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ï¼Œè¿™é‡Œçœå»ï¼Œä»…ç”¨ä¸€å¯¹ä¸€æ¥è¿›è¡Œæ¼”ç¤ºå³å¯ï¼‰ã€‚\nå‡è®¾æœ‰è¿™æ ·çš„åå°æŸ¥è¯¢æ¡ä»¶ï¼šä½œè€…åç§°ã€ä¹¦çš„å‘å¸ƒæ—¶é—´ã€ä¹¦è¯„çš„è¯„åˆ†ã€‚ï¼ˆè¿™é‡Œæ¯ä¸ªå®ä½“å–ä¸€ä¸ªå­—æ®µè¿›è¡Œè¿è¡¨æŸ¥è¯¢æ¼”ç¤ºï¼Œå…¶ä»–å­—æ®µåŒç†ï¼‰ã€‚è¿”å›ä¹¦ç±åˆ—è¡¨ä»¥åŠç›¸å…³è¡¨å­—æ®µã€‚\nã€æœ¬æ–‡æ‰€æœ‰ä»£ç åœ¨æ­¤ã€‘\næœ€ä½³å®è·µ éœ€è¦ SELECT æŸ¥è¯¢çš„å­—æ®µï¼Œé€šè¿‡å•ç‹¬çš„ Java Bean è¿›è¡Œæ˜ å°„ åˆ©ç”¨ JPA çš„è‡ªåŠ¨å®ä½“æ˜ å°„ç»“æœé›† @EntityGraph æ³¨è§£æ ‡æ³¨è¿”å›å®ä½“éœ€è¦ Fetch çš„å­—æ®µ æ— éœ€å†æ‰‹åŠ¨é’ˆå¯¹è¿è¡¨è¿›è¡Œ fetchï¼Œè§£å†³ N+1 é—®é¢˜ JOIN ON æŸ¥è¯¢æ¡ä»¶ä½¿ç”¨ join().on() æ‹¼æ¥ Join\u0026lt;Object, Object\u0026gt; author = root.join(\u0026#34;author\u0026#34;); author.on(cb.equal(author.get(\u0026#34;name\u0026#34;), param.getAuthorName())); WHERE æŸ¥è¯¢æ¡ä»¶ä½¿ç”¨ query.where() æ‹¼æ¥ query.where(cb.equal(root.get(\u0026#34;publishTime\u0026#34;), param.getBookPublishTime())); ä»£ç ç¤ºä¾‹ é’ˆå¯¹ Repository éœ€è¦ override å·²æœ‰ findAll æ–¹æ³•ï¼Œä½¿ç”¨ @EntityGraph æ³¨è§£ ä½¿ç”¨ @EntityGraph æ³¨è§£ï¼Œæ ‡æ³¨é¢å¤–å±æ€§éœ€è¦ fetch // BookJoinRepository.java @Repository public interface BookJoinRepository extends JpaRepository\u0026lt;BookJoin, String\u0026gt;, JpaSpecificationExecutor\u0026lt;BookJoin\u0026gt; { @Override @EntityGraph(attributePaths = { \u0026#34;author\u0026#34;, \u0026#34;review\u0026#34; }) Page\u0026lt;BookJoin\u0026gt; findAll(Specification\u0026lt;BookJoin\u0026gt; spec, Pageable pageable); } é’ˆå¯¹ Specification WHERE æŸ¥è¯¢æ¡ä»¶ä½¿ç”¨ query.where() æ‹¼æ¥ JOIN ON æŸ¥è¯¢æ¡ä»¶ä½¿ç”¨ join().on() æ‹¼æ¥ static Specification\u0026lt;BookJoin\u0026gt; multiQuery_04(BookJoinQuery param) { return (root, query, cb) -\u0026gt; { if (null != param.getBookPublishTime()) { query.where(cb.equal(root.get(\u0026#34;publishTime\u0026#34;), param.getBookPublishTime())); } if (null != param.getAuthorName()) { Join\u0026lt;Object, Object\u0026gt; author = root.join(\u0026#34;author\u0026#34;); author.on(cb.equal(author.get(\u0026#34;name\u0026#34;), param.getAuthorName())); } if (null != param.getReviewScore()) { Join\u0026lt;Object, Object\u0026gt; review = root.join(\u0026#34;review\u0026#34;); review.on(cb.equal(review.get(\u0026#34;score\u0026#34;), param.getReviewScore())); } return query.getRestriction(); }; } ç»“æœ SQL è¯­å¥ select bookjoin0_.id as id1_1_0_, bookjoin_a1_.id as id1_0_1_, bookjoin_r2_.id as id1_2_2_, bookjoin0_.author_id as author_i3_1_0_, bookjoin0_.publish_time as publish_2_1_0_, bookjoin0_.review_id as review_i4_1_0_, bookjoin_a1_.name as name2_0_1_, bookjoin_r2_.score as score2_2_2_ from book bookjoin0_ inner join author bookjoin_a1_ on bookjoin0_.author_id = bookjoin_a1_.id and (bookjoin_a1_.name = ?) inner join review bookjoin_r2_ on bookjoin0_.review_id = bookjoin_r2_.id and (bookjoin_r2_.score = ?) where bookjoin0_.publish_time = ? limit ? å½“ç„¶ï¼Œè¿™é‡Œæ¡ˆä¾‹ä½¿ç”¨çš„æ˜¯ INNER JOINï¼Œå¯¹äº LEFT JOIN ä¹Ÿæ˜¯ç”Ÿæ•ˆçš„ã€‚\nJoin\u0026lt;Object, Object\u0026gt; author = root.join(\u0026#34;author\u0026#34;, JoinType.LEFT); author.on(cb.equal(author.get(\u0026#34;name\u0026#34;), param.getAuthorName())); // left outer join author bookjoin_a1_ on // bookjoin0_.author_id = bookjoin_a1_.id // and (bookjoin_a1_.name = ?) é“¾æ¥ Spring Data JPA å¤šæ¡ä»¶è¿è¡¨æŸ¥è¯¢ Add annotation which will automatically add join fetch to query ","permalink":"https://lexcao.io/zh/posts/spring-data-jpa-join-table-best-practice/","summary":"\u003ch1 id=\"èƒŒæ™¯\"\u003eèƒŒæ™¯\u003c/h1\u003e\n\u003cp\u003eæœ¬æ–‡æ˜¯ \u003ca href=\"/zh/posts/spring-data-jpa-join-table\"\u003eSpring Data JPA å¤šæ¡ä»¶è¿è¡¨æŸ¥è¯¢\u003c/a\u003e æ–‡ç« çš„æœ€ä½³å®è·µæ€»ç»“ã€‚\u003c/p\u003e\n\u003ch3 id=\"è§£å†³ä»€ä¹ˆé—®é¢˜\"\u003eè§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ\u003c/h3\u003e\n\u003cp\u003eä½¿ç”¨ Spring Data JPA éœ€è¦é’ˆå¯¹å¤šæ¡ä»¶è¿›è¡Œè¿è¡¨æŸ¥è¯¢çš„åœºæ™¯ä¸ä½¿ç”¨åŸç”Ÿ SQL æˆ–è€… HQL çš„æ—¶å€™ï¼Œä»…ä»…é€šè¿‡ JpaSpecificationExecutor\u003cT\u003e æ„é€  Specification\u003cT\u003e åŠ¨æ€æ¡ä»¶è¯­å¥æ¥å®ç°ç±»å‹å®‰å…¨çš„å¤šæ¡ä»¶æŸ¥è¯¢ã€‚\u003c/p\u003e\n\u003ch3 id=\"è¯´æ˜\"\u003eè¯´æ˜\u003c/h3\u003e\n\u003cp\u003eç›¸å…³ä¸Šä¸‹æ–‡èƒŒæ™¯è¯·å‰å¾€ \u003ca href=\"/zh/posts/spring-data-jpa-join-table\"\u003eå‰æ–‡\u003c/a\u003e äº†è§£ã€‚\nè¿™é‡Œå†æä¸€ä¸‹æ¥ä¸‹æ¥ç¤ºä¾‹ä¼šç”¨åˆ°çš„åœºæ™¯ï¼š\u003c/p\u003e\n\u003cp\u003eä¸‰ä¸ªå®ä½“ï¼šä½œè€…ã€ä¹¦ã€ä¹¦è¯„ã€‚å…¶ä¸­ï¼Œä½œè€…ä¸ä¹¦æ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ï¼Œä¹¦ä¸ä¹¦è¯„æ˜¯ä¸€å¯¹ä¸€çš„å…³ç³»ï¼ˆå½“ç„¶ä¹¦è¯„ä¸è¯»è€…çš„è¯„ä»·æ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ï¼Œè¿™é‡Œçœå»ï¼Œä»…ç”¨ä¸€å¯¹ä¸€æ¥è¿›è¡Œæ¼”ç¤ºå³å¯ï¼‰ã€‚\u003c/p\u003e\n\u003cp\u003eå‡è®¾æœ‰è¿™æ ·çš„åå°æŸ¥è¯¢æ¡ä»¶ï¼šä½œè€…åç§°ã€ä¹¦çš„å‘å¸ƒæ—¶é—´ã€ä¹¦è¯„çš„è¯„åˆ†ã€‚ï¼ˆè¿™é‡Œæ¯ä¸ªå®ä½“å–ä¸€ä¸ªå­—æ®µè¿›è¡Œè¿è¡¨æŸ¥è¯¢æ¼”ç¤ºï¼Œå…¶ä»–å­—æ®µåŒç†ï¼‰ã€‚è¿”å›ä¹¦ç±åˆ—è¡¨ä»¥åŠç›¸å…³è¡¨å­—æ®µã€‚\u003c/p\u003e\n\u003cp\u003eã€\u003ca href=\"https://github.com/lexcao/spring-data-jpa-join-table\"\u003eæœ¬æ–‡æ‰€æœ‰ä»£ç åœ¨æ­¤\u003c/a\u003eã€‘\u003c/p\u003e\n\u003ch1 id=\"æœ€ä½³å®è·µ\"\u003eæœ€ä½³å®è·µ\u003c/h1\u003e\n\u003col\u003e\n\u003cli\u003eéœ€è¦ \u003ccode\u003eSELECT\u003c/code\u003e æŸ¥è¯¢çš„å­—æ®µï¼Œé€šè¿‡å•ç‹¬çš„ Java Bean è¿›è¡Œæ˜ å°„\n\u003cul\u003e\n\u003cli\u003eåˆ©ç”¨ JPA çš„è‡ªåŠ¨å®ä½“æ˜ å°„ç»“æœé›†\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e@EntityGraph\u003c/code\u003e æ³¨è§£æ ‡æ³¨è¿”å›å®ä½“éœ€è¦ Fetch çš„å­—æ®µ\n\u003cul\u003e\n\u003cli\u003eæ— éœ€å†æ‰‹åŠ¨é’ˆå¯¹è¿è¡¨è¿›è¡Œ \u003ccode\u003efetch\u003c/code\u003eï¼Œè§£å†³ N+1 é—®é¢˜\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eJOIN ON æŸ¥è¯¢æ¡ä»¶ä½¿ç”¨ \u003ccode\u003ejoin().on()\u003c/code\u003e æ‹¼æ¥\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eJoin\u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003eObject, Object\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e author \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e root.\u003cspan style=\"color:#a6e22e\"\u003ejoin\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;author\u0026#34;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eauthor.\u003cspan style=\"color:#a6e22e\"\u003eon\u003c/span\u003e(cb.\u003cspan style=\"color:#a6e22e\"\u003eequal\u003c/span\u003e(author.\u003cspan style=\"color:#a6e22e\"\u003eget\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e), param.\u003cspan style=\"color:#a6e22e\"\u003egetAuthorName\u003c/span\u003e()));\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003cli\u003eWHERE æŸ¥è¯¢æ¡ä»¶ä½¿ç”¨ \u003ccode\u003equery.where()\u003c/code\u003e æ‹¼æ¥\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003equery.\u003cspan style=\"color:#a6e22e\"\u003ewhere\u003c/span\u003e(cb.\u003cspan style=\"color:#a6e22e\"\u003eequal\u003c/span\u003e(root.\u003cspan style=\"color:#a6e22e\"\u003eget\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;publishTime\u0026#34;\u003c/span\u003e), param.\u003cspan style=\"color:#a6e22e\"\u003egetBookPublishTime\u003c/span\u003e()));\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch1 id=\"ä»£ç ç¤ºä¾‹\"\u003eä»£ç ç¤ºä¾‹\u003c/h1\u003e\n\u003ch2 id=\"é’ˆå¯¹-repository\"\u003eé’ˆå¯¹ Repository\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003eéœ€è¦ \u003ccode\u003eoverride\u003c/code\u003e å·²æœ‰ \u003ccode\u003efindAll\u003c/code\u003e æ–¹æ³•ï¼Œä½¿ç”¨ \u003ccode\u003e@EntityGraph\u003c/code\u003e æ³¨è§£\u003c/li\u003e\n\u003cli\u003eä½¿ç”¨ \u003ccode\u003e@EntityGraph\u003c/code\u003e æ³¨è§£ï¼Œæ ‡æ³¨é¢å¤–å±æ€§éœ€è¦ fetch\u003c/li\u003e\n\u003c/ol\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// BookJoinRepository.java\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003e@Repository\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einterface\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eBookJoinRepository\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eextends\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    JpaRepository\u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003eBookJoin, String\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e, JpaSpecificationExecutor\u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003eBookJoin\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003e@Override\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003e@EntityGraph\u003c/span\u003e(attributePaths \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e { \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;author\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;review\u0026#34;\u003c/span\u003e })\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    Page\u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003eBookJoin\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003efindAll\u003c/span\u003e(Specification\u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003eBookJoin\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e spec, Pageable pageable);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"é’ˆå¯¹-specification\"\u003eé’ˆå¯¹ Specification\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003eWHERE æŸ¥è¯¢æ¡ä»¶ä½¿ç”¨ \u003ccode\u003equery.where()\u003c/code\u003e æ‹¼æ¥\u003c/li\u003e\n\u003cli\u003eJOIN ON æŸ¥è¯¢æ¡ä»¶ä½¿ç”¨ \u003ccode\u003ejoin().on()\u003c/code\u003e æ‹¼æ¥\u003c/li\u003e\n\u003c/ol\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003estatic\u003c/span\u003e Specification\u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003eBookJoin\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emultiQuery_04\u003c/span\u003e(BookJoinQuery param) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e (root, query, cb) \u003cspan style=\"color:#f92672\"\u003e-\u0026gt;\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e (\u003cspan style=\"color:#66d9ef\"\u003enull\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e param.\u003cspan style=\"color:#a6e22e\"\u003egetBookPublishTime\u003c/span\u003e()) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            query.\u003cspan style=\"color:#a6e22e\"\u003ewhere\u003c/span\u003e(cb.\u003cspan style=\"color:#a6e22e\"\u003eequal\u003c/span\u003e(root.\u003cspan style=\"color:#a6e22e\"\u003eget\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;publishTime\u0026#34;\u003c/span\u003e), param.\u003cspan style=\"color:#a6e22e\"\u003egetBookPublishTime\u003c/span\u003e()));\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e (\u003cspan style=\"color:#66d9ef\"\u003enull\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e param.\u003cspan style=\"color:#a6e22e\"\u003egetAuthorName\u003c/span\u003e()) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            Join\u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003eObject, Object\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e author \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e root.\u003cspan style=\"color:#a6e22e\"\u003ejoin\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;author\u0026#34;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            author.\u003cspan style=\"color:#a6e22e\"\u003eon\u003c/span\u003e(cb.\u003cspan style=\"color:#a6e22e\"\u003eequal\u003c/span\u003e(author.\u003cspan style=\"color:#a6e22e\"\u003eget\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e), param.\u003cspan style=\"color:#a6e22e\"\u003egetAuthorName\u003c/span\u003e()));\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e (\u003cspan style=\"color:#66d9ef\"\u003enull\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e param.\u003cspan style=\"color:#a6e22e\"\u003egetReviewScore\u003c/span\u003e()) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            Join\u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003eObject, Object\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e review \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e root.\u003cspan style=\"color:#a6e22e\"\u003ejoin\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;review\u0026#34;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            review.\u003cspan style=\"color:#a6e22e\"\u003eon\u003c/span\u003e(cb.\u003cspan style=\"color:#a6e22e\"\u003eequal\u003c/span\u003e(review.\u003cspan style=\"color:#a6e22e\"\u003eget\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;score\u0026#34;\u003c/span\u003e), param.\u003cspan style=\"color:#a6e22e\"\u003egetReviewScore\u003c/span\u003e()));\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e query.\u003cspan style=\"color:#a6e22e\"\u003egetRestriction\u003c/span\u003e();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    };\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"ç»“æœ-sql-è¯­å¥\"\u003eç»“æœ SQL è¯­å¥\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eselect\u003c/span\u003e bookjoin0_.id           \u003cspan style=\"color:#66d9ef\"\u003eas\u003c/span\u003e id1_1_0_,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e       bookjoin_a1_.id         \u003cspan style=\"color:#66d9ef\"\u003eas\u003c/span\u003e id1_0_1_,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e       bookjoin_r2_.id         \u003cspan style=\"color:#66d9ef\"\u003eas\u003c/span\u003e id1_2_2_,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e       bookjoin0_.author_id    \u003cspan style=\"color:#66d9ef\"\u003eas\u003c/span\u003e author_i3_1_0_,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e       bookjoin0_.publish_time \u003cspan style=\"color:#66d9ef\"\u003eas\u003c/span\u003e publish_2_1_0_,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e       bookjoin0_.review_id    \u003cspan style=\"color:#66d9ef\"\u003eas\u003c/span\u003e review_i4_1_0_,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e       bookjoin_a1_.name       \u003cspan style=\"color:#66d9ef\"\u003eas\u003c/span\u003e name2_0_1_,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e       bookjoin_r2_.score      \u003cspan style=\"color:#66d9ef\"\u003eas\u003c/span\u003e score2_2_2_\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efrom\u003c/span\u003e book bookjoin0_\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e       \u003cspan style=\"color:#66d9ef\"\u003einner\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003ejoin\u003c/span\u003e author bookjoin_a1_ \u003cspan style=\"color:#66d9ef\"\u003eon\u003c/span\u003e bookjoin0_.author_id \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e bookjoin_a1_.id \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                                      \u003cspan style=\"color:#66d9ef\"\u003eand\u003c/span\u003e (bookjoin_a1_.name \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e?\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e       \u003cspan style=\"color:#66d9ef\"\u003einner\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003ejoin\u003c/span\u003e review bookjoin_r2_ \u003cspan style=\"color:#66d9ef\"\u003eon\u003c/span\u003e bookjoin0_.review_id \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e bookjoin_r2_.id \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                                      \u003cspan style=\"color:#66d9ef\"\u003eand\u003c/span\u003e (bookjoin_r2_.score \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e?\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003ewhere\u003c/span\u003e bookjoin0_.publish_time \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e?\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003elimit\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e?\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eå½“ç„¶ï¼Œè¿™é‡Œæ¡ˆä¾‹ä½¿ç”¨çš„æ˜¯ \u003ccode\u003eINNER JOIN\u003c/code\u003eï¼Œå¯¹äº \u003ccode\u003eLEFT JOIN\u003c/code\u003e ä¹Ÿæ˜¯ç”Ÿæ•ˆçš„ã€‚\u003c/p\u003e","title":"Spring Data JPA å¤šæ¡ä»¶è¿è¡¨æŸ¥è¯¢æœ€ä½³å®è·µ"},{"content":"ç—›ç‚¹ é¡¹ç›®ä¸­ä½¿ç”¨ Spring Data JPA ä½œä¸º ORM æ¡†æ¶çš„æ—¶å€™ï¼Œå®ä½“æ˜ å°„éå¸¸æ–¹ä¾¿ã€‚Spring Data Repository çš„é¡¶å±‚æŠ½è±¡å®Œå…¨è§£å†³å•å®ä½“çš„æŸ¥è¯¢ï¼Œé¢å¯¹å•å®ä½“çš„å¤æ‚æŸ¥è¯¢ï¼Œä¹Ÿèƒ½ä½¿ç”¨ JpaSpecificationExecutor\u0026lt;T\u0026gt; æ„é€  Specification\u0026lt;T\u0026gt; è½»æ¾åº”å¯¹ã€‚\nè€Œå¯¹äºåå°ç®¡ç†æŠ¥è¡¨æŸ¥è¯¢éœ€æ±‚æ¥è¯´ï¼Œéœ€è¦è¿›è¡Œè¿è¡¨å¤šæ¡ä»¶åŠ¨æ€æŸ¥è¯¢çš„æ—¶å€™ï¼Œå°±æ˜¾å¾—æ— ä»ä¸‹æ‰‹ã€‚å› ä¸ºå®ƒå¹¶ä¸åƒ MyBatis ä¸€æ ·èƒ½å¤Ÿåœ¨ XML æ–‡ä»¶ä¸­å†™å‡ºåŠ¨æ€ SQL è¯­å¥ã€‚\nå°½ç®¡å¯ä»¥ä½¿ç”¨ EntityManager åŠ¨æ€æ‹¼æ¥åŸç”Ÿ SQL è¯­å¥ï¼Œä½†æ˜¯è¯¥æ–¹æ³•è¿”å›å€¼ä¸º ResultSet ï¼Œä¹Ÿå°±æ˜¯è¯´æŸ¥å‡ºæ¥çš„å®ä½“æ˜ å°„å…³ç³»éœ€è¦æ‰‹åŠ¨æ˜ å°„ï¼ˆğŸ˜¢è¿™æ ·ä¸å¤ªä¼˜é›…ï¼Œå·²ç»å®šä¹‰å‡ºå®ä½“ï¼Œè¿˜éœ€è¦è‡ªå·±å»æ˜ å°„ï¼‰ã€‚\næ‰€ä»¥ï¼Œæœ¬æ–‡çš„ç›®çš„æ˜¯ï¼Œåœ¨ç°æœ‰å®ä½“å…³ç³»çš„åŸºç¡€ä¸Šï¼Œç»“åˆ Specification\u0026lt;T\u0026gt; è®°å½•ä¸‹ Spring Data JPA å¤šæ¡ä»¶åŠ¨æ€è¿è¡¨æŸ¥è¯¢æ“ä½œï¼Œä»¥åŠå…¶ä¸­çš„è¸©å‘å’Œä¼˜åŒ–ã€‚\næƒ³è¦ç›´æ¥çœ‹ç»“è®ºçš„ï¼Œè¯·çœ‹è¿™ç¯‡ Spring Data JPA åŠ¨æ€å¤šæ¡ä»¶è¿è¡¨æŸ¥è¯¢æœ€ä½³å®è·µã€‚\nåŸºç¡€æ“ä½œ é‚£ä¹ˆï¼Œè®©æˆ‘ä»¬å¼€å§‹è¿›å…¥ä»£ç æ“ä½œã€‚ã€æœ¬æ–‡æ‰€æœ‰ä»£ç åœ¨æ­¤ã€‘\nå‰ç½®è¯´æ˜ ç›¸å…³ä¾èµ– Java 11 SpringBoot 2.4.2 build.gradle\nplugins { id \u0026#39;org.springframework.boot\u0026#39; version \u0026#39;2.4.2\u0026#39; id \u0026#39;io.spring.dependency-management\u0026#39; version \u0026#39;1.0.11.RELEASE\u0026#39; id \u0026#39;java\u0026#39; } dependencies { implementation \u0026#39;org.springframework.boot:spring-boot-starter-data-jpa\u0026#39; compileOnly \u0026#39;org.projectlombok:lombok\u0026#39; runtimeOnly \u0026#39;mysql:mysql-connector-java\u0026#39; annotationProcessor \u0026#39;org.projectlombok:lombok\u0026#39; testImplementation \u0026#39;org.springframework.boot:spring-boot-starter-test\u0026#39; testRuntimeOnly \u0026#39;com.h2database:h2\u0026#39; } maven.xml\n\u0026lt;build\u0026gt; \u0026lt;plugins\u0026gt; \u0026lt;plugin\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-boot-maven-plugin\u0026lt;/artifactId\u0026gt; \u0026lt;configuration\u0026gt; \u0026lt;excludes\u0026gt; \u0026lt;exclude\u0026gt; \u0026lt;groupId\u0026gt;org.projectlombok\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;lombok\u0026lt;/artifactId\u0026gt; \u0026lt;/exclude\u0026gt; \u0026lt;/excludes\u0026gt; \u0026lt;/configuration\u0026gt; \u0026lt;/plugin\u0026gt; \u0026lt;/plugins\u0026gt; \u0026lt;/build\u0026gt; \u0026lt;dependencies\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-boot-starter-data-jpa\u0026lt;/artifactId\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;com.h2database\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;h2\u0026lt;/artifactId\u0026gt; \u0026lt;scope\u0026gt;runtime\u0026lt;/scope\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.projectlombok\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;lombok\u0026lt;/artifactId\u0026gt; \u0026lt;optional\u0026gt;true\u0026lt;/optional\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-boot-starter-test\u0026lt;/artifactId\u0026gt; \u0026lt;scope\u0026gt;test\u0026lt;/scope\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;/dependencies\u0026gt; æ¨¡æ‹Ÿåœºæ™¯ ä¸‰ä¸ªå®ä½“ï¼šä½œè€…ã€ä¹¦ã€ä¹¦è¯„ã€‚å…¶ä¸­ï¼Œä½œè€…ä¸ä¹¦æ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ï¼Œä¹¦ä¸ä¹¦è¯„æ˜¯ä¸€å¯¹ä¸€çš„å…³ç³»ï¼ˆå½“ç„¶ä¹¦è¯„ä¸è¯»è€…çš„è¯„ä»·æ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ï¼Œè¿™é‡Œçœå»ï¼Œä»…ç”¨ä¸€å¯¹ä¸€æ¥è¿›è¡Œæ¼”ç¤ºå³å¯ï¼‰ã€‚\nå‡è®¾æœ‰è¿™æ ·çš„åå°æŸ¥è¯¢æ¡ä»¶ï¼šä½œè€…åç§°ã€ä¹¦çš„å‘å¸ƒæ—¶é—´ã€ä¹¦è¯„çš„è¯„åˆ†ã€‚ï¼ˆè¿™é‡Œæ¯ä¸ªå®ä½“å–ä¸€ä¸ªå­—æ®µè¿›è¡Œè¿è¡¨æŸ¥è¯¢æ¼”ç¤ºï¼Œå…¶ä»–å­—æ®µåŒç†ï¼‰ã€‚è¿”å›ä¹¦ç±åˆ—è¡¨ä»¥åŠç›¸å…³è¡¨å­—æ®µã€‚\nå®ä½“å…³ç³» è¡¨ç»“æ„ CREATE TABLE `author` ( `id` VARCHAR(255) PRIMARY KEY, `name` VARCHAR(255) ); CREATE TABLE `book` ( `id` VARCHAR(255) PRIMARY KEY, `publish_time` TIMESTAMP DEFAULT CURRENT_TIMESTAMP, `author_id` VARCHAR(255), `review_id` VARCHAR(255) ); CREATE TABLE `review` ( `id` VARCHAR(255) PRIMARY KEY, `score` INT ); -- æ•°æ®åˆå§‹åŒ– INSERT INTO `author` (`id`, `name`) VALUES (\u0026#39;A_1\u0026#39;, \u0026#39;Author_1\u0026#39;), (\u0026#39;A_2\u0026#39;, \u0026#39;Author_2\u0026#39;), (\u0026#39;A_3\u0026#39;, \u0026#39;Author_3\u0026#39;), (\u0026#39;A_4\u0026#39;, \u0026#39;Author_4\u0026#39;), (\u0026#39;A_5\u0026#39;, \u0026#39;Author_5\u0026#39;); INSERT INTO `review` (`id`, `score`) VALUES (\u0026#39;R_1\u0026#39;, 20), (\u0026#39;R_2\u0026#39;, 30), (\u0026#39;R_3\u0026#39;, 40), (\u0026#39;R_4\u0026#39;, 50), (\u0026#39;R_5\u0026#39;, 60), (\u0026#39;R_6\u0026#39;, 70), (\u0026#39;R_7\u0026#39;, 80), (\u0026#39;R_8\u0026#39;, 90); INSERT INTO `book` (`id`, `author_id`, `review_id`) VALUES (\u0026#39;B_1\u0026#39;, \u0026#39;A_1\u0026#39;, \u0026#39;R_1\u0026#39;), (\u0026#39;B_2\u0026#39;, \u0026#39;A_2\u0026#39;, \u0026#39;R_2\u0026#39;), (\u0026#39;B_3\u0026#39;, \u0026#39;A_3\u0026#39;, \u0026#39;R_3\u0026#39;), (\u0026#39;B_4\u0026#39;, \u0026#39;A_4\u0026#39;, \u0026#39;R_4\u0026#39;), (\u0026#39;B_5\u0026#39;, \u0026#39;A_5\u0026#39;, \u0026#39;R_5\u0026#39;), (\u0026#39;B_6\u0026#39;, \u0026#39;A_2\u0026#39;, \u0026#39;R_6\u0026#39;), (\u0026#39;B_7\u0026#39;, \u0026#39;A_2\u0026#39;, \u0026#39;R_7\u0026#39;), (\u0026#39;B_8\u0026#39;, \u0026#39;A_3\u0026#39;, \u0026#39;R_8\u0026#39;); JPA å®ä½“å…³ç³» ä½¿ç”¨ Java persistence API æ„å»ºå¦‚ä¸‹å®ä½“å…³ç³»ï¼Œå…¶ä»–ä¸šåŠ¡å­—æ®µçœç•¥ã€‚\n@Data @Table @Entity public class Author { @Id private String id; private String name; } @Data @Table @Entity public class Book { @Id private String id; @Column(name = \u0026#34;publish_time\u0026#34;) private LocalDateTime publishTime; @ManyToOne(fetch = FetchType.LAZY) @JoinColumn(name = \u0026#34;author_id\u0026#34;, foreignKey = @ForeignKey(ConstraintMode.NO_CONSTRAINT)) private Author author; @OneToOne(fetch = FetchType.LAZY) @JoinColumn(name = \u0026#34;review_id\u0026#34;, foreignKey = @ForeignKey(ConstraintMode.NO_CONSTRAINT)) private Review review; } @Data @Table @Entity public class Review { @Id private String id; } ç›¸å…³è§£é‡Šï¼š\n@Data Lombok æ³¨è§£ï¼Œè‡ªåŠ¨ç”Ÿæˆ getterã€setterã€hashcodeã€equals @Table @Entity @Id @Column @JoinColumn å‡ä¸º persistence API @ManyToOne å®ä½“æ˜ å°„å…³ç³» å¤šå¯¹ä¸€ @OneToOne å®ä½“æ˜ å°„å…³ç³» ä¸€å¯¹ä¸€ åœ¨å®é™…ä¸šåŠ¡ä¸­ï¼Œè¿è¡¨çš„æ—¶å€™ä¸ä¸€å®šæ˜¯æŸ¥è¯¢å¤šä¸ªå®ä½“çš„å…¨éƒ¨å­—æ®µï¼Œä¸ºäº†ä¸å½±å“åŸæœ‰å®ä½“å…³ç³»çš„æ­£å¸¸æ˜ å°„ï¼Œè¿™é‡Œå•ç‹¬å£°æ˜ä¸€ä¸ªç±» BookJoin æ¥æ˜ å°„æŸ¥è¯¢æ¡ä»¶è¿”å›ã€‚ä¼˜é›…çš„å®ç° Spring Data JPA è¿è¡¨æ“ä½œï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼š\nåªæœ‰ SELECT æŸ¥è¯¢å‡ºæ¥çš„å­—æ®µï¼Œæ‰éœ€è¦åœ¨å®ä½“é‡Œé¢å£°æ˜å‡ºæ¥ JOIN ON åé¢çš„æ¡ä»¶ï¼Œéœ€è¦åœ¨å®ä½“é‡Œé¢å£°æ˜å‡ºæ¥ å†æ ¹æ® Specification ä¸­çš„ query.join æ¥è¿›è¡Œ JOIN ä»¥ä¸‹æ˜¯è¿è¡¨å®ä½“ BookJoin.java æ–‡ä»¶\n@Data @Entity @Table(name = \u0026#34;book\u0026#34;) public class BookJoin { @Id private String id; @Column(name = \u0026#34;publish_time\u0026#34;) private LocalDateTime publishTime; @ManyToOne @JoinColumn(name = \u0026#34;author_id\u0026#34;, foreignKey = @ForeignKey(ConstraintMode.NO_CONSTRAINT)) private Author author; @OneToOne @JoinColumn(name = \u0026#34;review_id\u0026#34;, foreignKey = @ForeignKey(ConstraintMode.NO_CONSTRAINT)) private Review review; @Data @Entity @Table(name = \u0026#34;author\u0026#34;) public static class Author { @Id private String id; private String name; } @Data @Entity @Table(name = \u0026#34;review\u0026#34;) public static class Review { @Id private String id; private Integer score; } } æ„å»ºæµ‹è¯•ç¯å¢ƒ ä¸ºäº†æ¼”ç¤ºå¤šæ¡ä»¶æŸ¥è¯¢ç»“æœï¼Œè¿™é‡Œä½¿ç”¨ JUnit æ¥è¿›è¡Œå•å…ƒæµ‹è¯•\nSpringBoot x JUnit å•å…ƒæµ‹è¯•æ›´è¯¦ç»†çš„å†…å®¹ï¼Œè¯·çœ‹å¦ä¸€ç¯‡åšå®¢\n/** * given: * empty query * then: * paged data */ @Test void multiQuery() { var spec = BookJoinSpec.multiQuery(emptyQuery()); var page = PageRequest.of(0, 5); queryBySpecMethod(spec, page); } private Page\u0026lt;BookJoin\u0026gt; queryBySpecMethod(Specification\u0026lt;BookJoin\u0026gt; spec, PageRequest pageRequest) { var books = repo.findAll(spec, pageRequest); assertThat(books.getNumberOfElements()).isGreaterThan(0); books.getContent().forEach(it -\u0026gt; { assertThat(it).isNotNull(); // è®¿é—®ç»“æœé›†çš„å±æ€§ï¼ŒéªŒè¯æ˜¯å¦æ‡’åŠ è½½ assertThat(it.getAuthor().getName()).isNotNull(); assertThat(it.getReview().getScore()).isNotNull(); } ); return books; } è¿è¡¨æ“ä½œ å¦‚ä½•è¿›è¡Œå£°æ˜å¼è¿è¡¨æŸ¥è¯¢ï¼Œè¿™é‡Œè®²æ¼”ç¤ºå„ç§å†™æ³•çš„ä¸åŒï¼Œ ä»¥åŠå„ä¸ªå‚æ•°æ‰€èµ·çš„ä½œç”¨ï¼Œæœ€åä¼šç»™å‡ºä¸€ä¸ªæœ€ç»ˆç‰ˆæœ¬ä½œä¸ºæœ€ä½³å®è·µå‚è€ƒã€‚\n01 ç‰ˆæœ¬ static Specification\u0026lt;BookJoin\u0026gt; multiQuery_01(BookJoinQuery param) { return (root, query, cb) -\u0026gt; { var predicates = new LinkedList\u0026lt;Predicate\u0026gt;(); root.join(\u0026#34;author\u0026#34;); root.join(\u0026#34;review\u0026#34;); // ... }; } é€šè¿‡ä»¥ä¸Šçš„å•å…ƒæµ‹è¯•ï¼Œæ‰“å°å‡ºçš„ SQL å¦‚ä¸‹\nHibernate: SELECT `bookjoin0_`.`id` AS `id1_1_`, `bookjoin0_`.`author_id` AS `author_i3_1_`, `bookjoin0_`.`publish_time` AS `publish_2_1_`, `bookjoin0_`.`review_id` AS `review_i4_1_` FROM `book` `bookjoin0_` INNER JOIN `author` `bookjoin_a1_` ON `bookjoin0_`.`author_id` = `bookjoin_a1_`.`id` INNER JOIN `review` `bookjoin_r2_` ON `bookjoin0_`.`review_id` = `bookjoin_r2_`.`id` WHERE 1 = 1 LIMIT ? OFFSET ? Hibernate: SELECT `bookjoin_a0_`.`id` AS `id1_0_0_`, `bookjoin_a0_`.`name` AS `name2_0_0_` FROM `author` `bookjoin_a0_` WHERE `bookjoin_a0_`.`id` = ? Hibernate: SELECT `bookjoin_r0_`.`id` AS `id1_2_0_`, `bookjoin_r0_`.`score` AS `score2_2_0_` FROM `review` `bookjoin_r0_` WHERE `bookjoin_r0_`.`id` = ? Hibernate: SELECT `bookjoin_r0_`.`id` AS `id1_2_0_`, `bookjoin_r0_`.`score` AS `score2_2_0_` FROM `review` `bookjoin_r0_` WHERE `bookjoin_r0_`.`id` = ? Hibernate: SELECT `bookjoin_a0_`.`id` AS `id1_0_0_`, `bookjoin_a0_`.`name` AS `name2_0_0_` FROM `author` `bookjoin_a0_` WHERE `bookjoin_a0_`.`id` = ? Hibernate: SELECT `bookjoin_r0_`.`id` AS `id1_2_0_`, `bookjoin_r0_`.`score` AS `score2_2_0_` FROM `review` `bookjoin_r0_` WHERE `bookjoin_r0_`.`id` = ? å¯ä»¥çœ‹åˆ°ï¼š\næ•°æ®æ€»å…±æŸ¥å‡ºæ¥ 3 æ¡ï¼Œç»“æœæ‰§è¡Œçš„ SQL è¯­å¥æœ‰ 7 æ¡ åˆ†åˆ«æ˜¯ï¼š1 æ¡è¿è¡¨æŸ¥è¯¢ï¼Œ3 æ¡ author è¡¨çš„å•æŸ¥è¯¢ï¼Œ3 æ¡ review è¡¨çš„å•æŸ¥è¯¢ 02 ç‰ˆæœ¬ - ä½¿ç”¨ fetch ä¼˜åŒ– ä½¿ç”¨ fetch æ›¿ä»£ join\njoin ä»…è¿è¡¨æŸ¥è¯¢ï¼Œè¿”å›çš„ä¸»å®ä½“çš„æ‰€æœ‰å±æ€§ï¼Œå¯ä»¥ç†è§£ä¸º SELECT book.* fetch è¿è¡¨æŸ¥è¯¢ + å¿«åŠ è½½ï¼Œè¿”å›è¿è¡¨æ‰€æœ‰å®ä½“çš„å±æ€§ï¼Œå¯ä»¥ç†è§£ä¸º SELECT * static Specification\u0026lt;BookJoin\u0026gt; multiQuery_02(BookJoinQuery param) { return (root, query, cb) -\u0026gt; { // ... root.fetch(\u0026#34;author\u0026#34;); root.fetch(\u0026#34;review\u0026#34;); // ... }; } é€šè¿‡ä»¥ä¸Šçš„å•å…ƒæµ‹è¯•ï¼Œæ‰“å°å‡ºçš„ SQL å¦‚ä¸‹\nHibernate: SELECT `bookjoin0_`.`id` AS `id1_1_0_`, `bookjoin_a1_`.`id` AS `id1_0_1_`, `bookjoin_r2_`.`id` AS `id1_2_2_`, `bookjoin0_`.`author_id` AS `author_i3_1_0_`, `bookjoin0_`.`publish_time` AS `publish_2_1_0_`, `bookjoin0_`.`review_id` AS `review_i4_1_0_`, `bookjoin_a1_`.`name` AS `name2_0_1_`, `bookjoin_r2_`.`score` AS `score2_2_2_` FROM `book` `bookjoin0_` INNER JOIN `author` `bookjoin_a1_` ON `bookjoin0_`.`author_id` = `bookjoin_a1_`.`id` INNER JOIN `review` `bookjoin_r2_` ON `bookjoin0_`.`review_id` = `bookjoin_r2_`.`id` WHERE 1 = 1 LIMIT ? OFFSET ? å¯ä»¥çœ‹åˆ°ï¼š\næ‰§è¡Œçš„ SQL åªæœ‰ 1 æ¡ SELECT ä¸­çš„å­—æ®µåŒ…æ‹¬è¿è¡¨çš„å­—æ®µ è¸©å‘ - åˆ†é¡µé—®é¢˜ åˆ›å»ºä¸€ä¸ªæ–°çš„å•å…ƒæµ‹è¯•ï¼Œç›´æ¥ä½¿ç”¨ fetch åˆ†é¡µæŠ¥é”™\n@Test void multiQuery_02() { var spec = BookJoinSpec.multiQuery_02(emptyQuery()); var page = PageRequest.of(0, 5); assertThatThrownBy(() -\u0026gt; queryBySpecMethod(spec, page)) .hasCauseInstanceOf(QueryException.class); } å½“ä½¿ç”¨ fetch å†è¿›è¡Œåˆ†é¡µçš„æ—¶å€™ï¼Œä¼šæŠ¥ä»¥ä¸‹é”™è¯¯\nCaused by: org.hibernate.QueryException: query specified join fetching, but the owner of the fetched association was not present in the select list. åŸå› åˆ†æï¼š\nå®é™…æŠ¥é”™å‡ºç°åœ¨ count è¯­å¥ï¼Œé”™è¯¯ä¿¡æ¯è¡¨ç¤ºè¯¥ count è¯­å¥è¿”å›å€¼æ²¡æœ‰æ‰¾åˆ°å…·ä½“çš„æ˜ å°„å±æ€§ è§£å†³æ–¹æ³•ï¼š\né’ˆå¯¹åˆ†é¡µçš„ count æŸ¥è¯¢è¯­å¥å•ç‹¬åšå¤„ç†ï¼Œä»£ç å¦‚ä¸‹ static Specification\u0026lt;BookJoin\u0026gt; multiQuery_02_fix(BookJoinQuery param) { return (root, query, cb) -\u0026gt; { // ... if (Long.class.equals(query.getResultType()) || long.class.equals(query.getResultType())) { root.join(\u0026#34;author\u0026#34;); root.join(\u0026#34;review\u0026#34;); } else { root.fetch(\u0026#34;author\u0026#34;); root.fetch(\u0026#34;review\u0026#34;); } // ... }; } æ³¨æ„ å¯èƒ½ç–‘é—®ã€Œä¸Šé¢ BookJoin å®ä½“é‡Œé¢å£°æ˜å…³ç³»ä¸æ˜¯ fetch = FetchType.LAZY ï¼Œæ²¡æœ‰æŒ‡æ˜æ˜¯æ‡’åŠ è½½ï¼Œä¸ºä»€ä¹ˆè¿è¡¨æŸ¥è¯¢çš„æ—¶å€™è¿˜æ˜¯æ²¡æœ‰åŠ è½½å‡ºæ¥ã€ã€‚\nåŸå› æ˜¯ JPA é‡Œé¢ join æœºåˆ¶å¤„ç†ï¼ŒåŸç†å¤§è‡´æ˜¯è¿™æ ·çš„ï¼š\næ ¹æ® join å’Œ fetch ç”Ÿæˆä¸åŒçš„ JpaQL è¯­å¥ï¼Œå·®åˆ«åœ¨äº join ä¸ join fetch -- fetch ç”Ÿæˆçš„ JpaQL è¯­å¥ select generatedAlias0 from BookJoin as generatedAlias0 inner join fetch generatedAlias0.author as generatedAlias1 inner join fetch generatedAlias0.review as generatedAlias2 where 1=1 -- join ç”Ÿæˆçš„ JpaQL è¯­å¥ select generatedAlias0 from BookJoin as generatedAlias0 inner join generatedAlias0.author as generatedAlias1 inner join generatedAlias0.review as generatedAlias2 where 1=1 JpaQL è¯­å¥æ ¹æ® join fetch è½¬æ¢ä¸º HQL å†è½¬æ¢ä¸ºæœ€ç»ˆçš„ SQL è¯­å¥ï¼Œé€šè¿‡ QueryTranslatorImpl ç±»ï¼Œåœ¨ doCompile æ–¹æ³•çœ‹åˆ°å®Œæ•´è½¬æ¢è¿‡ç¨‹ï¼Œéƒ¨åˆ†ä»£ç å¦‚ä¸‹ // QueryTranslatorImpl // doCompile -\u0026gt; analyze -\u0026gt; HqlSqlBaseWalker.statement -\u0026gt; selectStatement // selectClause -\u0026gt; fromClause -\u0026gt; fromElementList -\u0026gt; fromElement -\u0026gt; joinElement // HqlSqlWalker.java createFromJoinElement #367 // DotNode æ­¤å¤„è®¾ç½® fetch DotNode dot = (DotNode) path; JoinType hibernateJoinType = JoinProcessor.toHibernateJoinType( joinType ); dot.setJoinType( hibernateJoinType ); // Tell the dot node about the join type. dot.setFetch( fetch ); // Generate an explicit join for the root dot node. The implied joins will be collected and passed up // to the root dot node. dot.resolve( true, false, alias == null ? null : alias.getText() ); // è§£æé˜¶æ®µ // selectStatement -\u0026gt; query -\u0026gt; processQuery // ä¸Šé¢çš„æŠ¥é”™åœ¨æ­¤å¤„ SelectClause.java #212 if ( !fromElementsForLoad.contains( origin ) \u0026amp;\u0026amp; !fromElementsForLoad.contains( fromElement.getFetchOrigin() ) ) throw new QueryException( \u0026#34;query specified join fetching, but the owner \u0026#34; + \u0026#34;of the fetched association was not present in the select list \u0026#34; + \u0026#34;[\u0026#34; + fromElement.getDisplayText() + \u0026#34;]\u0026#34; ); } 03 ç‰ˆæœ¬ - åŠ ä¸Š WHERE æ¡ä»¶ç­›é€‰ åˆ›å»ºä¸€ä¸ªæ–°çš„å•å…ƒæµ‹è¯•ï¼Œç­›é€‰ä¸€ä¸‹ Join æ¡ä»¶\n@Test void multiQuery_03() { var query = BookJoinQuery.builder() .authorName(\u0026#34;Author_2\u0026#34;) .build(); var spec = BookJoinSpec.multiQuery_03(query); var page = PageRequest.of(0, 5); var result = queryBySpecMethod(spec, page); var givenAuthor = result.getContent().get(0).getAuthor(); assertThat(givenAuthor.getName()).isEqualTo(\u0026#34;Author_2\u0026#34;); } å…·ä½“çš„è¿è¡¨æŸ¥è¯¢æ¡ä»¶å¦‚ä¸‹\nstatic Specification\u0026lt;BookJoin\u0026gt; multiQuery_03(BookJoinQuery param) { return (root, query, cb) -\u0026gt; { var predicates = new LinkedList\u0026lt;Predicate\u0026gt;(); if (Long.class.equals(query.getResultType()) || long.class.equals(query.getResultType())) { root.join(\u0026#34;author\u0026#34;); root.join(\u0026#34;review\u0026#34;); } else { root.fetch(\u0026#34;author\u0026#34;); root.fetch(\u0026#34;review\u0026#34;); } if (null != param.getBookPublishTime()) { predicates.add(cb.equal(root.get(\u0026#34;publishTime\u0026#34;), param.getBookPublishTime())); } if (null != param.getAuthorName()) { predicates.add(cb.equal(root.get(\u0026#34;author\u0026#34;).get(\u0026#34;name\u0026#34;), param.getAuthorName())); } if (null != param.getReviewScore()) { predicates.add(cb.equal(root.get(\u0026#34;review\u0026#34;).get(\u0026#34;score\u0026#34;), param.getReviewScore())); } query.where(predicates.toArray(new Predicate[0])); return query.getRestriction(); }; } ç”Ÿæˆçš„æŸ¥è¯¢è¯­å¥å¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°æŸ¥è¯¢æ¡ä»¶æ˜¯æ‹¼æ¥åœ¨ WHERE éƒ¨åˆ†\nselect bookjoin0_.id as id1_1_0_, bookjoin_a1_.id as id1_0_1_, bookjoin_r2_.id as id1_2_2_, bookjoin0_.author_id as author_i3_1_0_, bookjoin0_.publish_time as publish_2_1_0_, bookjoin0_.review_id as review_i4_1_0_, bookjoin_a1_.name as name2_0_1_, bookjoin_r2_.score as score2_2_2_ from book bookjoin0_ inner join author bookjoin_a1_ on bookjoin0_.author_id = bookjoin_a1_.id inner join review bookjoin_r2_ on bookjoin0_.review_id = bookjoin_r2_.id where bookjoin_a1_.name = ? limit ? å¦‚æœæˆ‘æƒ³è¦é’ˆå¯¹ join çš„è¡¨è¿›è¡Œ on æ¡ä»¶æŸ¥è¯¢ï¼Œåº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ ä¸‹é¢æ¥çœ‹ä¸‹ 04 ç‰ˆæœ¬ã€‚\n04 ç‰ˆæœ¬ - åŠ ä¸Š JOIN ON æ¡ä»¶ç­›é€‰ åˆ›å»ºä¸€ä¸ªæ–°çš„å•å…ƒæµ‹è¯•\n@Test void multiQuery_04() { var query = BookJoinQuery.builder() .authorName(\u0026#34;Author_2\u0026#34;) .reviewScore(70) .build(); var spec = BookJoinSpec.multiQuery_04(query); var page = PageRequest.of(0, 5); var bookJoin = queryBySpecMethod(spec, page).getContent().get(0); assertThat(bookJoin.getAuthor().getName()).isEqualTo(\u0026#34;Author_2\u0026#34;); assertThat(bookJoin.getReview().getScore()).isEqualTo(70); } é¦–å…ˆç›´æ¥å¯¹ join æ¡ä»¶è¿›è¡Œ on æŸ¥è¯¢\nstatic Specification\u0026lt;BookJoin\u0026gt; multiQuery_04(BookJoinQuery param) { return (root, query, cb) -\u0026gt; { if (null != param.getBookPublishTime()) { query.where(cb.equal(root.get(\u0026#34;publishTime\u0026#34;), param.getBookPublishTime())); } if (null != param.getAuthorName()) { Join\u0026lt;Object, Object\u0026gt; author = root.join(\u0026#34;author\u0026#34;); author.on(cb.equal(author.get(\u0026#34;name\u0026#34;), param.getAuthorName())); } if (null != param.getReviewScore()) { Join\u0026lt;Object, Object\u0026gt; review = root.join(\u0026#34;review\u0026#34;); review.on(cb.equal(review.get(\u0026#34;score\u0026#34;), param.getReviewScore())); } return query.getRestriction(); }; } æ­¤æ—¶ç”Ÿæˆçš„ SQL è¯­å¥å¦‚ä¸‹ï¼Œèƒ½å¤ŸæˆåŠŸæ‹¼æ¥ JOIN ON æ¡ä»¶ä½†æ˜¯å‡ºç° N + 1 é—®é¢˜ï¼Œ\nselect bookjoin0_.id as id1_1_, bookjoin0_.author_id as author_i3_1_, bookjoin0_.publish_time as publish_2_1_, bookjoin0_.review_id as review_i4_1_ from book bookjoin0_ inner join author bookjoin_a1_ on bookjoin0_.author_id = bookjoin_a1_.id and (bookjoin_a1_.name = ?) inner join review bookjoin_r2_ on bookjoin0_.review_id = bookjoin_r2_.id and (bookjoin_r2_.score = ?) limit ? select bookjoin_a0_.id as id1_0_0_, bookjoin_a0_.name as name2_0_0_ from author bookjoin_a0_ where bookjoin_a0_.id = ? select bookjoin_r0_.id as id1_2_0_, bookjoin_r0_.score as score2_2_0_ from review bookjoin_r0_ where bookjoin_r0_.id = ? æ­¤æ—¶å¦‚æœæˆ‘ä»¬æ”¹ç”¨ fetch çš„è¯ï¼Œåˆä¸èƒ½è¿›è¡Œ on æ¡ä»¶ç­›é€‰ï¼Œè¯¥æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ\nè¿™é‡Œçš„è§£å†³æ–¹æ¡ˆæ˜¯å¼•å…¥ä¸€ä¸ªæ–°çš„æ³¨è§£ @EntityGraphï¼Œä¿®æ”¹æˆ‘ä»¬çš„æŸ¥è¯¢æ–¹æ³•\nä¸»åŠ¨å£°æ˜æŸ¥è¯¢æ–¹æ³•è¿”å›çš„ Entity æ˜ç¡®éœ€è¦è¿›è¡Œ Fetch çš„å±æ€§æœ‰å“ªäº› @Override @EntityGraph(attributePaths = { \u0026#34;author\u0026#34;, \u0026#34;review\u0026#34; }) Page\u0026lt;BookJoin\u0026gt; findAll(Specification\u0026lt;BookJoin\u0026gt; spec, Pageable pageable); å†çœ‹ä¸€ä¸‹ç”Ÿæˆçš„è¯­å¥ï¼Œå¾ˆå¥½ï¼Œè‡ªåŠ¨å¸®å¿™ fetch å‡ºæ¥äº†ï¼Œå¹¶ä¸”ä¹Ÿè§£å†³äº† 02 ç‰ˆæœ¬çš„åˆ†é¡µæŸ¥è¯¢é—®é¢˜\nselect bookjoin0_.id as id1_1_0_, bookjoin_a1_.id as id1_0_1_, bookjoin_r2_.id as id1_2_2_, bookjoin0_.author_id as author_i3_1_0_, bookjoin0_.publish_time as publish_2_1_0_, bookjoin0_.review_id as review_i4_1_0_, bookjoin_a1_.name as name2_0_1_, bookjoin_r2_.score as score2_2_2_ from book bookjoin0_ inner join author bookjoin_a1_ on bookjoin0_.author_id = bookjoin_a1_.id and (bookjoin_a1_.name = ?) inner join review bookjoin_r2_ on bookjoin0_.review_id = bookjoin_r2_.id and (bookjoin_r2_.score = ?) limit ? æ³¨æ„ ä¸Šé¢ä½¿ç”¨çš„ç¤ºä¾‹æ˜¯é’ˆå¯¹ã€å¼ºä¸€å¯¹ä¸€å…³ç³»ã€‘æ‰€ä»¥ä½¿ç”¨é»˜è®¤çš„è¿æ¥ç±»å‹ INNER JOIN\nå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨å·¦å¤–è¿æ¥ï¼ˆå³å¤–è¿æ¥ä¸æ”¯æŒï¼‰\nroot.join(\u0026#34;author\u0026#34;, JoinType.LEFT); root.fetch(\u0026#34;author\u0026#34;, JoinType.LEFT); æ‰©å±•é˜…è¯» Advanced Spring Data JPA - Specifications and Querydsl REST Query Language with Spring Data JPA Specifications Spring Data JPA Specification DSL for Kotlin ğŸ”— é“¾æ¥ Github source Spring Data JPAä½¿ç”¨Specification ğŸ‘€æ€»ç»“ ä½¿ç”¨ SpringJPA æ¥å†™åŠ¨æ€å¤šæ¡ä»¶è¿è¡¨æŸ¥è¯¢ï¼Œé€šè¿‡ä»£ç æ¥æ§åˆ¶ SQL è¯­å¥ï¼Œéœ€è¦å¯¹ JPA ä»¥åŠ Hibernate ç›¸å…³ API ç›¸å¯¹ç†Ÿç»ƒæ‰å¯ä»¥å†™å‡ºä¼˜è´¨çš„ SQL è¯­å¥ç”Ÿæˆã€‚ å’Œ MyBatis å¯ä»¥ç›´æ¥æ‹¼æ¥ SQL çš„ç›¸æ¯”ï¼Œå„æœ‰åº”ç”¨åœºæ™¯ã€‚ æ•´ä½“æ¥è¯´ç”¨ä»£ç æ¥å†™ JPA çš„åŠ¨æ€æŸ¥è¯¢ï¼Œå¯¹äºä¹ æƒ¯ SQL è¯­å¥çš„äººæ¥è¯´ï¼Œè¿˜æ˜¯æ„Ÿè§‰éš”äº†ä¸€å±‚ã€‚ å¯¹äºè¿™æ ·çš„åˆ†é¡µè¿è¡¨æŸ¥è¯¢ï¼Œä¸ªäººæ„Ÿè§‰è¿˜æ˜¯ MyBatis èˆ’æœä¸€ç‚¹ï¼Œç®€å•ã€‚ ","permalink":"https://lexcao.io/zh/posts/spring-data-jpa-join-table/","summary":"\u003ch1 id=\"ç—›ç‚¹\"\u003eç—›ç‚¹\u003c/h1\u003e\n\u003cp\u003eé¡¹ç›®ä¸­ä½¿ç”¨ Spring Data JPA ä½œä¸º ORM æ¡†æ¶çš„æ—¶å€™ï¼Œå®ä½“æ˜ å°„éå¸¸æ–¹ä¾¿ã€‚Spring Data Repository çš„é¡¶å±‚æŠ½è±¡å®Œå…¨è§£å†³å•å®ä½“çš„æŸ¥è¯¢ï¼Œé¢å¯¹å•å®ä½“çš„å¤æ‚æŸ¥è¯¢ï¼Œä¹Ÿèƒ½ä½¿ç”¨ \u003ccode\u003eJpaSpecificationExecutor\u0026lt;T\u0026gt;\u003c/code\u003e æ„é€  \u003ccode\u003eSpecification\u0026lt;T\u0026gt;\u003c/code\u003e è½»æ¾åº”å¯¹ã€‚\u003c/p\u003e\n\u003cp\u003eè€Œå¯¹äºåå°ç®¡ç†æŠ¥è¡¨æŸ¥è¯¢éœ€æ±‚æ¥è¯´ï¼Œéœ€è¦è¿›è¡Œè¿è¡¨å¤šæ¡ä»¶åŠ¨æ€æŸ¥è¯¢çš„æ—¶å€™ï¼Œå°±æ˜¾å¾—æ— ä»ä¸‹æ‰‹ã€‚å› ä¸ºå®ƒå¹¶ä¸åƒ MyBatis ä¸€æ ·èƒ½å¤Ÿåœ¨ XML æ–‡ä»¶ä¸­å†™å‡ºåŠ¨æ€ SQL è¯­å¥ã€‚\u003c/p\u003e\n\u003cp\u003eå°½ç®¡å¯ä»¥ä½¿ç”¨ \u003ccode\u003eEntityManager\u003c/code\u003e åŠ¨æ€æ‹¼æ¥åŸç”Ÿ SQL è¯­å¥ï¼Œä½†æ˜¯è¯¥æ–¹æ³•è¿”å›å€¼ä¸º \u003ccode\u003eResultSet\u003c/code\u003e ï¼Œä¹Ÿå°±æ˜¯è¯´æŸ¥å‡ºæ¥çš„å®ä½“æ˜ å°„å…³ç³»éœ€è¦æ‰‹åŠ¨æ˜ å°„ï¼ˆğŸ˜¢è¿™æ ·ä¸å¤ªä¼˜é›…ï¼Œå·²ç»å®šä¹‰å‡ºå®ä½“ï¼Œè¿˜éœ€è¦è‡ªå·±å»æ˜ å°„ï¼‰ã€‚\u003c/p\u003e\n\u003cp\u003eæ‰€ä»¥ï¼Œæœ¬æ–‡çš„ç›®çš„æ˜¯ï¼Œåœ¨ç°æœ‰å®ä½“å…³ç³»çš„åŸºç¡€ä¸Šï¼Œç»“åˆ \u003ccode\u003eSpecification\u0026lt;T\u0026gt;\u003c/code\u003e è®°å½•ä¸‹ Spring Data JPA å¤šæ¡ä»¶åŠ¨æ€è¿è¡¨æŸ¥è¯¢æ“ä½œï¼Œä»¥åŠå…¶ä¸­çš„è¸©å‘å’Œä¼˜åŒ–ã€‚\u003c/p\u003e\n\u003cp\u003eæƒ³è¦ç›´æ¥çœ‹ç»“è®ºçš„ï¼Œè¯·çœ‹è¿™ç¯‡ \u003ca href=\"/zh/posts/spring-data-jpa-join-table-best-practice\"\u003eSpring Data JPA åŠ¨æ€å¤šæ¡ä»¶è¿è¡¨æŸ¥è¯¢æœ€ä½³å®è·µ\u003c/a\u003eã€‚\u003c/p\u003e\n\u003ch1 id=\"åŸºç¡€æ“ä½œ\"\u003eåŸºç¡€æ“ä½œ\u003c/h1\u003e\n\u003cp\u003eé‚£ä¹ˆï¼Œè®©æˆ‘ä»¬å¼€å§‹è¿›å…¥ä»£ç æ“ä½œã€‚ã€\u003ca href=\"https://github.com/lexcao/spring-data-jpa-join-table\"\u003eæœ¬æ–‡æ‰€æœ‰ä»£ç åœ¨æ­¤\u003c/a\u003eã€‘\u003c/p\u003e\n\u003ch2 id=\"å‰ç½®è¯´æ˜\"\u003eå‰ç½®è¯´æ˜\u003c/h2\u003e\n\u003ch3 id=\"ç›¸å…³ä¾èµ–\"\u003eç›¸å…³ä¾èµ–\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eJava 11\u003c/li\u003e\n\u003cli\u003eSpringBoot 2.4.2\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003ebuild.gradle\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eplugins \u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    id \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;org.springframework.boot\u0026#39;\u003c/span\u003e version \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;2.4.2\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    id \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;io.spring.dependency-management\u0026#39;\u003c/span\u003e version \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;1.0.11.RELEASE\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    id \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;java\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edependencies \u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    implementation \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;org.springframework.boot:spring-boot-starter-data-jpa\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    compileOnly \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;org.projectlombok:lombok\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    runtimeOnly \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;mysql:mysql-connector-java\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    annotationProcessor \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;org.projectlombok:lombok\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    testImplementation \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;org.springframework.boot:spring-boot-starter-test\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    testRuntimeOnly \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;com.h2database:h2\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003emaven.xml\u003c/p\u003e","title":"Spring Data JPA å¤šæ¡ä»¶è¿è¡¨æŸ¥è¯¢ (2022 æ›´æ–°)"},{"content":"ä»€ä¹ˆ æˆ‘æƒ³å†™ä¸€ç¯‡å…³äºæˆ‘å¦‚ä½•å­¦ä¹ Rustçš„åšå®¢ã€‚\nè¯·åŸè°…æˆ‘åœ¨ 2022 å¹´æ‰å¼€å§‹å­¦ä¹ è¿™ä¸ªä¼Ÿå¤§çš„ç¼–ç¨‹è¯­è¨€ã€‚\nä¸ºäº†åœ¨å®è·µä¸­å­¦ä¹ Rustï¼Œæˆ‘æ„å»ºäº†ä¸€ä¸ªå…¨æ ˆå¾…åŠåº”ç”¨ã€‚\nä½ å¯ä»¥åœ¨ è¿™é‡Œ å°è¯•ã€‚ç›¸å…³æºç å¯ä»¥åœ¨ GitHub ä¸Šæ‰¾åˆ°ã€‚\nç°åœ¨ï¼Œæˆ‘å‡†å¤‡å†™ä¸€ä¸‹å®ƒæ˜¯å¦‚ä½•æ„å»ºçš„ã€‚\nå¦‚ä½• é¦–å…ˆï¼Œå’Œå¤§å®¶ä¸€æ ·ï¼Œæˆ‘ä¹Ÿæ˜¯ä» The Book ä¸­å­¦ä¹  Rustã€‚è¿™æ˜¯ä¸€æœ¬ä¸åº”è¯¥è·³è¿‡å…¥é—¨å­¦ä¹  Rust çš„å¥½ä¹¦ã€‚\nåœ¨å­¦ä¹ äº†ä¸€äº›åŸºæœ¬çš„è¯­æ³•ä¹‹åï¼Œæˆ‘å°è¯•ä»é›¶å¼€å§‹ä½¿ç”¨ Rust æ„å»ºä¸€ä¸ªå…¨æ ˆåº”ç”¨ï¼Œè¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ Rust tokio çš„åç«¯æœåŠ¡å’Œä¸€ä¸ªä½¿ç”¨ Rust WASMï¼ˆWeb Assemblyï¼‰çš„å‰ç«¯é¡µé¢ã€‚\næˆ‘å°†åˆ†åˆ«å¯¹è¿™ä¸¤éƒ¨åˆ†åšä¸€ä¸ªç®€å•çš„ä»‹ç»ã€‚\nåç«¯ åå°æœåŠ¡æ˜¯ä¸€ä¸ªçš„ç®€å•çš„ REST APIã€‚ä½¿ç”¨ actix-web ä½œä¸ºç½‘ç»œæ¡†æ¶ã€‚\næˆ‘å°†å†™å¦ä¸€ç¯‡åšå®¢ï¼Œä»‹ç»æˆ‘å¦‚ä½•ä½¿ç”¨ TDD å¼€å‘ Rust åå°æœåŠ¡ã€‚ è¢« Rust ç¼–è¯‘å™¨å’Œ Borrow Checker æ•™è‚²æ˜¯ä¸€æ¬¡ç‰¹åˆ«çš„ä½“éªŒã€‚ å¯¹äºéƒ¨ç½²ï¼Œæˆ‘ä½¿ç”¨ Supabase ä½œä¸º Postgres æœåŠ¡ï¼Œä½¿ç”¨ Railway æ¥è¿è¡Œåå°æœåŠ¡ docker é•œåƒã€‚\nå‰ç«¯ å‰ç«¯é¡µé¢æœ‰åœ¨çº¿å’Œç¦»çº¿æ•°æ®æºï¼Œåœ¨çº¿æ˜¯ä»åå°æœåŠ¡å™¨è·å–æ•°æ®ï¼Œè€Œç¦»çº¿æ˜¯åœ¨æœ¬åœ°å­˜å‚¨ã€‚å¹¶ä¸”æœ‰ä¸€ä¸ªæŒ‰é’®æ¥åˆ‡æ¢å®ƒä»¬ã€‚\nå‰å°ç”± Rust WASM å’Œ yew æ¡†æ¶é©±åŠ¨ï¼Œè¿™æ˜¯ä¸€ä¸ªç±»ä¼¼ React åŸºäºç»„ä»¶æ„å»º Web åº”ç”¨æ¡†æ¶ã€‚\nå¦‚æœä½ ç†Ÿæ‚‰ JSXï¼Œä½ å¯ä»¥åœ¨ä½¿ç”¨ Yew æ—¶æ„Ÿåˆ°å¾ˆè‡ªåœ¨ã€‚ åœ¨ Rust ä¸­ç¼–å†™ç±»ä¼¼ React çš„ä»£ç ä½“éªŒè‰¯å¥½ï¼Œè€Œä¸”çœŸçš„å¾ˆæœ‰è¶£ã€‚ ä½†æœ‰ä¸€äº›ä¸åŒä¹‹å¤„æˆ‘æƒ³ä¸å¤§å®¶åˆ†äº«ï¼Œæ™šç‚¹ä¼šå†™ä¸€ç¯‡åšå®¢æ¥è°ˆè¿™ä¸ªé—®é¢˜ï¼Œæ‰€ä»¥æ•¬è¯·å…³æ³¨ã€‚ éƒ¨ç½²çš„è¯ï¼Œæ˜¯æ”¾åœ¨ Vercel ä¸Šè¿›è¡Œæ‰˜ç®¡ï¼Œç”¨ GitHub Action æ¥å®ç°è‡ªåŠ¨éƒ¨ç½²ã€‚\nç»“æœ å…¨æ ˆ Rust çš„å¥½å¤„ä¹‹ä¸€æ˜¯å…±äº«ä»£ç ã€‚é€šè¿‡ä½¿ç”¨ Cargo workspace åŠŸèƒ½åç«¯å’Œå‰ç«¯å¯ä»¥å…±äº«è¿™ä¸ªå…¬å…±åŒ…ã€‚å…¶ä¸­åŒ…å«äº†ä¸¤è¾¹éƒ½å¯ä»¥ä½¿ç”¨çš„ requests å’Œ modelsã€‚åç«¯ä»£ç åœ¨é›†æˆæµ‹è¯•çš„æ—¶å€™è¿›è¡Œäº†æµ‹è¯•ï¼Œæ‰€ä»¥å‰ç«¯ä»£ç å¯ä»¥ç›´æ¥ä½¿ç”¨å®ƒè€Œä¸éœ€è¦é¢å¤–æµ‹è¯•å’Œç¼–ç ã€‚\næ•´ä¸ªå¼€å‘ä½“éªŒçš„è¯å°±æ˜¯æ‰€æœ‰ Rust ä»£ç å’Œä¸€äº›å°‘é‡ CSSã€‚æ•´ä½“æ„Ÿè§‰ä¸é”™ã€‚\néå¸¸æ„Ÿè°¢ Rust ç¼–è¯‘å™¨ï¼Œå®ƒæ˜¯å­¦ä¹  Rust çš„ä¸€ä½å¥½è€å¸ˆã€‚\nç›¸å…³å¼•ç”¨ æºç  Rust The Book WASM actix-web yew Vercel Railway Supabase ","permalink":"https://lexcao.io/zh/posts/learn-rust-fullstack/","summary":"\u003ch1 id=\"ä»€ä¹ˆ\"\u003eä»€ä¹ˆ\u003c/h1\u003e\n\u003cp\u003eæˆ‘æƒ³å†™ä¸€ç¯‡å…³äºæˆ‘å¦‚ä½•å­¦ä¹ Rustçš„åšå®¢ã€‚\u003c/p\u003e\n\u003cp\u003eè¯·åŸè°…æˆ‘åœ¨ 2022 å¹´æ‰å¼€å§‹å­¦ä¹ è¿™ä¸ªä¼Ÿå¤§çš„ç¼–ç¨‹è¯­è¨€ã€‚\u003c/p\u003e\n\u003cp\u003eä¸ºäº†åœ¨å®è·µä¸­å­¦ä¹ Rustï¼Œæˆ‘æ„å»ºäº†ä¸€ä¸ªå…¨æ ˆå¾…åŠåº”ç”¨ã€‚\u003c/p\u003e\n\u003cp\u003eä½ å¯ä»¥åœ¨ \u003ca href=\"https://todos.lexcao.io/\"\u003eè¿™é‡Œ\u003c/a\u003e å°è¯•ã€‚ç›¸å…³æºç å¯ä»¥åœ¨ \u003ca href=\"https://github.com/lexcao/rust_fullstack_todo\"\u003eGitHub\u003c/a\u003e ä¸Šæ‰¾åˆ°ã€‚\u003c/p\u003e\n\u003cp\u003eç°åœ¨ï¼Œæˆ‘å‡†å¤‡å†™ä¸€ä¸‹å®ƒæ˜¯å¦‚ä½•æ„å»ºçš„ã€‚\u003c/p\u003e\n\u003ch1 id=\"å¦‚ä½•\"\u003eå¦‚ä½•\u003c/h1\u003e\n\u003cp\u003eé¦–å…ˆï¼Œå’Œå¤§å®¶ä¸€æ ·ï¼Œæˆ‘ä¹Ÿæ˜¯ä» \u003ca href=\"https://doc.rust-lang.org/book/\"\u003eThe Book\u003c/a\u003e ä¸­å­¦ä¹  Rustã€‚è¿™æ˜¯ä¸€æœ¬ä¸åº”è¯¥è·³è¿‡å…¥é—¨å­¦ä¹  Rust çš„å¥½ä¹¦ã€‚\u003c/p\u003e\n\u003cp\u003eåœ¨å­¦ä¹ äº†ä¸€äº›åŸºæœ¬çš„è¯­æ³•ä¹‹åï¼Œæˆ‘å°è¯•ä»é›¶å¼€å§‹ä½¿ç”¨ Rust æ„å»ºä¸€ä¸ªå…¨æ ˆåº”ç”¨ï¼Œè¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ Rust tokio çš„åç«¯æœåŠ¡å’Œä¸€ä¸ªä½¿ç”¨ \u003ca href=\"https://rustwasm.github.io/docs/book/\"\u003eRust WASMï¼ˆWeb Assemblyï¼‰\u003c/a\u003eçš„å‰ç«¯é¡µé¢ã€‚\u003c/p\u003e\n\u003cp\u003eæˆ‘å°†åˆ†åˆ«å¯¹è¿™ä¸¤éƒ¨åˆ†åšä¸€ä¸ªç®€å•çš„ä»‹ç»ã€‚\u003c/p\u003e\n\u003ch3 id=\"åç«¯\"\u003eåç«¯\u003c/h3\u003e\n\u003cp\u003eåå°æœåŠ¡æ˜¯ä¸€ä¸ªçš„ç®€å•çš„ REST APIã€‚ä½¿ç”¨ \u003ca href=\"https://github.com/actix/actix-web\"\u003e\u003ccode\u003eactix-web\u003c/code\u003e\u003c/a\u003e ä½œä¸ºç½‘ç»œæ¡†æ¶ã€‚\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eæˆ‘å°†å†™å¦ä¸€ç¯‡åšå®¢ï¼Œä»‹ç»æˆ‘å¦‚ä½•ä½¿ç”¨ TDD å¼€å‘ Rust åå°æœåŠ¡ã€‚\u003c/li\u003e\n\u003cli\u003eè¢« Rust ç¼–è¯‘å™¨å’Œ Borrow Checker æ•™è‚²æ˜¯ä¸€æ¬¡ç‰¹åˆ«çš„ä½“éªŒã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eå¯¹äºéƒ¨ç½²ï¼Œæˆ‘ä½¿ç”¨ \u003ca href=\"https://supabase.com/\"\u003eSupabase\u003c/a\u003e ä½œä¸º Postgres æœåŠ¡ï¼Œä½¿ç”¨ \u003ca href=\"https://railway.app/\"\u003eRailway\u003c/a\u003e æ¥è¿è¡Œåå°æœåŠ¡ docker é•œåƒã€‚\u003c/p\u003e\n\u003ch3 id=\"å‰ç«¯\"\u003eå‰ç«¯\u003c/h3\u003e\n\u003cp\u003eå‰ç«¯é¡µé¢æœ‰åœ¨çº¿å’Œç¦»çº¿æ•°æ®æºï¼Œåœ¨çº¿æ˜¯ä»åå°æœåŠ¡å™¨è·å–æ•°æ®ï¼Œè€Œç¦»çº¿æ˜¯åœ¨æœ¬åœ°å­˜å‚¨ã€‚å¹¶ä¸”æœ‰ä¸€ä¸ªæŒ‰é’®æ¥åˆ‡æ¢å®ƒä»¬ã€‚\u003c/p\u003e\n\u003cp\u003eå‰å°ç”± Rust WASM å’Œ \u003ca href=\"https://github.com/yewstack/yew\"\u003e\u003ccode\u003eyew\u003c/code\u003e\u003c/a\u003e æ¡†æ¶é©±åŠ¨ï¼Œè¿™æ˜¯ä¸€ä¸ªç±»ä¼¼ React åŸºäºç»„ä»¶æ„å»º Web åº”ç”¨æ¡†æ¶ã€‚\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eå¦‚æœä½ ç†Ÿæ‚‰ JSXï¼Œä½ å¯ä»¥åœ¨ä½¿ç”¨ Yew æ—¶æ„Ÿåˆ°å¾ˆè‡ªåœ¨ã€‚\u003c/li\u003e\n\u003cli\u003eåœ¨ Rust ä¸­ç¼–å†™ç±»ä¼¼ React çš„ä»£ç ä½“éªŒè‰¯å¥½ï¼Œè€Œä¸”çœŸçš„å¾ˆæœ‰è¶£ã€‚\u003c/li\u003e\n\u003cli\u003eä½†æœ‰ä¸€äº›ä¸åŒä¹‹å¤„æˆ‘æƒ³ä¸å¤§å®¶åˆ†äº«ï¼Œæ™šç‚¹ä¼šå†™ä¸€ç¯‡åšå®¢æ¥è°ˆè¿™ä¸ªé—®é¢˜ï¼Œæ‰€ä»¥æ•¬è¯·å…³æ³¨ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eéƒ¨ç½²çš„è¯ï¼Œæ˜¯æ”¾åœ¨ \u003ca href=\"https://vercel.com/\"\u003eVercel\u003c/a\u003e ä¸Šè¿›è¡Œæ‰˜ç®¡ï¼Œç”¨ GitHub Action æ¥å®ç°è‡ªåŠ¨éƒ¨ç½²ã€‚\u003c/p\u003e","title":"é€šè¿‡æ„å»ºå…¨æ ˆå¾…åŠåº”ç”¨å­¦ä¹  Rust"},{"content":"é€šè¿‡ä½¿ç”¨ Kotlin / Java ä¸­ Junit5 å’Œ Mockito æµ‹è¯•æ¡†æ¶ï¼Œåœ¨é¢„çº¦åŠŸèƒ½ä¸­æ¼”ç¤º TDD å¼€å‘æµç¨‹ã€‚\nTDD ä»‹ç» TDDï¼ˆTest-Driven Developmentï¼‰ æ˜¯ä¸€ç§å¼€å‘æµç¨‹ï¼Œä¸­æ–‡æ˜¯ã€Œæµ‹è¯•é©±åŠ¨å¼€å‘ã€ã€‚ç”¨ä¸€å¥ç™½è¯å½¢å®¹ï¼Œå°±æ˜¯ã€Œå…ˆå†™æµ‹è¯•å†å¼€å‘ã€ã€‚å…ˆå†™æµ‹è¯•é™¤äº†èƒ½ç¡®ä¿æµ‹è¯•ç¨‹å¼çš„æ’°å†™ï¼Œè¿˜æœ‰ä¸€ä¸ªå¥½å¤„ï¼šæœ‰åŠ©äºåœ¨å¼€å‘åˆæœŸå˜æ¸…ç¨‹å¼ä»‹é¢å¦‚ä½•è®¾è®¡ã€‚è¯¦ç»†ç†è®ºçŸ¥è¯†å¯ä»¥å‰å¾€ Wiki äº†è§£ï¼Œè¿™é‡Œä¸å†è¿‡å¤šä»‹ç»ã€‚\næµ‹è¯•é©±åŠ¨å¼€å‘ Test Driven Development TDD å¼€å‘æµç¨‹ï¼ˆ5æ­¥ï¼‰ æœ¯è¯­è¯´æ˜ï¼š\nçº¢ç¯ - Failure - æµ‹è¯•ç”¨ä¾‹å¤±è´¥ ç»¿ç¯ - Success - æµ‹è¯•ç”¨ä¾‹æˆåŠŸ é‡æ„ - Refactor - é‡æ„åŠŸèƒ½ä»£ç  å…·ä½“æ­¥éª¤ï¼š\né€‰å®šä¸€ä¸ªåŠŸèƒ½ï¼Œç¼–å†™æµ‹è¯•ç”¨ä¾‹ æ‰§è¡Œæµ‹è¯•ï¼Œå¾—åˆ°ã€çº¢ç¯ã€‘ ç¼–å†™æ»¡è¶³æµ‹è¯•ç”¨ä¾‹çš„åŠŸèƒ½ä»£ç  å†æ¬¡æ‰§è¡Œï¼Œå¾—åˆ°ã€ç»¿ç¯ã€‘ ã€é‡æ„ã€‘ä»£ç  å°ç»“ï¼š\nå¯¹äºæ¯ä¸€ä¸ªåŠŸèƒ½ï¼Œåœ¨ã€çº¢ç¯ã€‘-ã€ç»¿ç¯ã€‘-ã€é‡æ„ã€‘é—´æ¥å›å¾ªç¯å¾€å¤ï¼Œä¸æ–­å¾—åˆ°å®Œå–„ã€‚\nå‰ç½®å·¥ä½œ ä»£ç è¯´æ˜ ä½¿ç”¨ Kotlin è¯­è¨€ï¼ˆä¼šæœ‰ç›¸å¯¹åº”çš„ Java ä»£ç ï¼‰ ä½¿ç”¨åˆ°çš„æµ‹è¯•æ¡†æ¶ Running: JUnit5 Mock: MockK / Mockito Assertion: Kotest / AssertJ åªæ¶‰åŠ TDD çš„å…·ä½“æµç¨‹ï¼Œä¸æ¶‰åŠå•å…ƒæµ‹è¯•å¦‚ä½•ç¼–å†™ï¼ˆå¯ä»¥çœ‹ SpringBoot å•å…ƒæµ‹è¯•å„å±‚ï¼‰ åŠŸèƒ½ä»‹ç» å‡è®¾ä¸€ä¸ªç”¨æˆ·é¢„çº¦çš„åœºæ™¯ã€‚\nç”¨æˆ·å¯ä»¥åˆ›å»ºä¸€ä¸ªé¢„çº¦ åŒä¸€ä¸ªæ—¶é—´ç‚¹ï¼Œåªæœ‰ä¸€ä¸ªç”¨æˆ·å¯ä»¥ä¸‹å•æˆåŠŸ ä½¿ç”¨åˆ°çš„åº“ kotlin plugins { java id(\u0026#34;io.freefair.lombok\u0026#34;) version \u0026#34;6.0.0-m2\u0026#34; kotlin(\u0026#34;jvm\u0026#34;) version \u0026#34;1.5.0-RC\u0026#34; } group = \u0026#34;io.github.lexcao\u0026#34; version = \u0026#34;1.0-SNAPSHOT\u0026#34; repositories { mavenCentral() } dependencies { implementation(kotlin(\u0026#34;stdlib\u0026#34;)) // for Java mocking and assertion testImplementation(\u0026#34;org.mockito:mockito-core:3.9.0\u0026#34;) testImplementation(\u0026#34;org.assertj:assertj-core:3.19.0\u0026#34;) // for Kotlin mocking and assertion testImplementation(\u0026#34;io.mockk:mockk:1.11.0\u0026#34;) testImplementation(\u0026#34;io.kotest:kotest-assertions-core:4.4.3\u0026#34;) testImplementation(\u0026#34;org.junit.jupiter:junit-jupiter-api:5.6.0\u0026#34;) testRuntimeOnly(\u0026#34;org.junit.jupiter:junit-jupiter-engine\u0026#34;) } tasks { test { useJUnitPlatform() } } ReservationService å‰ç½® æå‰åˆ›å»ºä»¥ä¸‹ç©ºæ–‡ä»¶ï¼Œé¿å…ä»£ç æ— æ³•è¿è¡Œ\nReservation.java ReservationService.java ReservationRepository.java Red - 01 - ç¼–å†™å•å…ƒæµ‹è¯• æ‰§è¡Œå•å…ƒæµ‹è¯•ï¼Œæ˜¾ç¤ºã€çº¢ç¯ã€‘ï¼Œä»£ç åˆ†æ”¯ï¼š\nkotlin-red-01 java-red-01 kotlin @TestInstance(TestInstance.Lifecycle.PER_CLASS) internal class ReservationServiceImplTest { private val service: ReservationService = ReservationServiceImpl() @Nested inner class MakeReservation { private val time: LocalDateTime = LocalDateTime.of(2021, 5, 1, 21, 30) @Test fun shouldSuccess() { // given val reservation = Reservation(name = \u0026#34;Tom\u0026#34;, time = time) // actual val reserved: Reservation = service.makeReservation(reservation) // expect reserved shouldBe reservation } } } Green - 01 - ç¼–å†™å®ç° æ‰§è¡Œå•å…ƒæµ‹è¯•ï¼Œæ˜¾ç¤ºã€ç»¿ç¯ã€‘ï¼Œä»£ç åˆ†æ”¯ï¼š\nkotlin-green-01 java-green-01 kotlin class ReservationServiceImpl : ReservationService { override fun makeReservation(reservation: Reservation): Reservation { return reservation } } Red - 02 - åŠ å…¥åŠŸèƒ½ - å®Œå–„å•å…ƒæµ‹è¯• ï¼ˆæ³¨æ„ï¼šæŒä¹…åŒ–å±‚ç›®å‰ä¸éœ€è¦å…³å¿ƒï¼Œåœ¨è¿™é‡Œä½¿ç”¨ mock ç›¸å…³åŠŸèƒ½ï¼‰\nåŠ å…¥æŒä¹…åŒ–é€»è¾‘ï¼Œå®Œå–„ä»£ç ï¼Œæ˜¾ç¤ºã€çº¢ç¯ã€‘ï¼Œä»£ç åˆ†æ”¯ï¼š\nkotlin-red-02 java-red-02 kotlin private val mockRepository: ReservationRepository = mockk() private val service: ReservationService = ReservationServiceImpl(mockRepository) @AfterEach fun clear() { clearAllMocks() } @Test fun shouldSuccess() { // given every { mockRepository.save(any()) } returns reservation // verify verifySequence { mockRepository.save(reservation) } // ... } Green - 02 - ç¼–å†™å®ç° - å®Œå–„åŠŸèƒ½ ä»£ç åˆ†æ”¯ï¼š\nkotlin-green-02 java-green-02 kotlin override fun makeReservation(reservation: Reservation): Reservation { return repository.save(reservation) } Red - 03 - è¾¹ç•Œæµ‹è¯• å½“åŒä¸€æ—¶é—´å†…å·²æœ‰é¢„çº¦çš„æƒ…å†µä¸‹ï¼Œä»£ç åˆ†æ”¯ï¼š\nkotlin-red-03 java-red-03 kotlin @Test fun shouldSuccess() { // given ... every { mockRepository.findByTime(time) } returns null // verify ... mockRepository.findByTime(time) } @Test fun shouldFailure() { // given val reservation = Reservation(name = \u0026#34;Tom\u0026#34;, time = time) every { mockRepository.findByTime(time) } returns reservation // actual shouldThrow\u0026lt;ReservationTimeNotAvailable\u0026gt; { service.makeReservation(reservation) } // verify verifySequence { mockRepository.findByTime(time) mockRepository.save(reservation) wasNot Called } } Green - 03 - å®Œå–„è¾¹ç•Œæ£€æŸ¥ kotlin override fun makeReservation(reservation: Reservation): Reservation { val mayBeReserved = repository.findByTime(reservation.time) if (mayBeReserved != null) { throw ReservationTimeNotAvailable } return repository.save(reservation) } Refactor - ç®€å•çš„å°é‡æ„ åˆ«å¿˜äº†ï¼Œé‡æ„å®Œä¹‹åï¼Œè¿è¡Œä¸€éå•å…ƒæµ‹è¯•ï¼Œã€ç»¿ç¯ã€‘ã€‚ä»£ç åˆ†æ”¯ï¼š\nkotlin-refactor override fun makeReservation(reservation: Reservation): Reservation { repository.findByTime(reservation.time)?.run { throw ReservationTimeNotAvailable } return repository.save(reservation) } å°ç»“ ä¸€ä¸ªç®€å•çš„å°åŠŸèƒ½é€šè¿‡ TDD å¼€å‘æµç¨‹å°±æ­¤å¼€å‘å®Œæˆã€‚\nå®Œæ•´ä»£ç \nğŸ”— å‚è€ƒé“¾æ¥ æµ‹è¯•é©±åŠ¨å¼€å‘ Test Driven Development TDD é–‹ç™¼äº”æ­¥é©Ÿï¼Œå¸¶ä½ å¯¦æˆ° Test Driven Development ç¯„ä¾‹ è‡ªå‹•è»Ÿé«”æ¸¬è©¦-tdd-èˆ‡-bdd spring-boot-testing testing-web-layer ","permalink":"https://lexcao.io/zh/posts/kotlin-java-tdd-example/","summary":"\u003cp\u003eé€šè¿‡ä½¿ç”¨ Kotlin / Java ä¸­ Junit5 å’Œ Mockito æµ‹è¯•æ¡†æ¶ï¼Œåœ¨é¢„çº¦åŠŸèƒ½ä¸­æ¼”ç¤º TDD å¼€å‘æµç¨‹ã€‚\u003c/p\u003e\n\u003ch1 id=\"tdd-ä»‹ç»\"\u003eTDD ä»‹ç»\u003c/h1\u003e\n\u003cp\u003e\u003cstrong\u003eTDDï¼ˆTest-Driven Developmentï¼‰\u003c/strong\u003e\næ˜¯ä¸€ç§å¼€å‘æµç¨‹ï¼Œä¸­æ–‡æ˜¯ã€Œæµ‹è¯•é©±åŠ¨å¼€å‘ã€ã€‚ç”¨ä¸€å¥ç™½è¯å½¢å®¹ï¼Œå°±æ˜¯ã€Œå…ˆå†™æµ‹è¯•å†å¼€å‘ã€ã€‚å…ˆå†™æµ‹è¯•é™¤äº†èƒ½ç¡®ä¿æµ‹è¯•ç¨‹å¼çš„æ’°å†™ï¼Œè¿˜æœ‰ä¸€ä¸ªå¥½å¤„ï¼šæœ‰åŠ©äºåœ¨å¼€å‘åˆæœŸå˜æ¸…ç¨‹å¼ä»‹é¢å¦‚ä½•è®¾è®¡ã€‚è¯¦ç»†ç†è®ºçŸ¥è¯†å¯ä»¥å‰å¾€ Wiki äº†è§£ï¼Œè¿™é‡Œä¸å†è¿‡å¤šä»‹ç»ã€‚\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://zh.wikipedia.org/wiki/%E6%B5%8B%E8%AF%95%E9%A9%B1%E5%8A%A8%E5%BC%80%E5%8F%91\"\u003eæµ‹è¯•é©±åŠ¨å¼€å‘\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://en.wikipedia.org/wiki/Test-driven_development\"\u003eTest Driven Development\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"tdd-å¼€å‘æµç¨‹5æ­¥\"\u003eTDD å¼€å‘æµç¨‹ï¼ˆ5æ­¥ï¼‰\u003c/h2\u003e\n\u003cp\u003eæœ¯è¯­è¯´æ˜ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eçº¢ç¯ - Failure - æµ‹è¯•ç”¨ä¾‹å¤±è´¥\u003c/li\u003e\n\u003cli\u003eç»¿ç¯ - Success - æµ‹è¯•ç”¨ä¾‹æˆåŠŸ\u003c/li\u003e\n\u003cli\u003eé‡æ„ - Refactor - é‡æ„åŠŸèƒ½ä»£ç \u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eå…·ä½“æ­¥éª¤ï¼š\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eé€‰å®šä¸€ä¸ªåŠŸèƒ½ï¼Œç¼–å†™æµ‹è¯•ç”¨ä¾‹\u003c/li\u003e\n\u003cli\u003eæ‰§è¡Œæµ‹è¯•ï¼Œå¾—åˆ°ã€çº¢ç¯ã€‘\u003c/li\u003e\n\u003cli\u003eç¼–å†™æ»¡è¶³æµ‹è¯•ç”¨ä¾‹çš„åŠŸèƒ½ä»£ç \u003c/li\u003e\n\u003cli\u003eå†æ¬¡æ‰§è¡Œï¼Œå¾—åˆ°ã€ç»¿ç¯ã€‘\u003c/li\u003e\n\u003cli\u003eã€é‡æ„ã€‘ä»£ç \u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eå°ç»“ï¼š\u003c/p\u003e\n\u003cp\u003eå¯¹äºæ¯ä¸€ä¸ªåŠŸèƒ½ï¼Œåœ¨ã€çº¢ç¯ã€‘-ã€ç»¿ç¯ã€‘-ã€é‡æ„ã€‘é—´æ¥å›å¾ªç¯å¾€å¤ï¼Œä¸æ–­å¾—åˆ°å®Œå–„ã€‚\u003c/p\u003e\n\u003ch1 id=\"å‰ç½®å·¥ä½œ\"\u003eå‰ç½®å·¥ä½œ\u003c/h1\u003e\n\u003ch2 id=\"ä»£ç è¯´æ˜\"\u003eä»£ç è¯´æ˜\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eä½¿ç”¨ Kotlin è¯­è¨€ï¼ˆä¼šæœ‰ç›¸å¯¹åº”çš„ Java ä»£ç ï¼‰\u003c/li\u003e\n\u003cli\u003eä½¿ç”¨åˆ°çš„æµ‹è¯•æ¡†æ¶\n\u003cul\u003e\n\u003cli\u003eRunning: \u003ccode\u003eJUnit5\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eMock:  \u003ccode\u003eMockK\u003c/code\u003e / \u003ccode\u003eMockito\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eAssertion: \u003ccode\u003eKotest\u003c/code\u003e / \u003ccode\u003eAssertJ\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eåªæ¶‰åŠ TDD çš„å…·ä½“æµç¨‹ï¼Œä¸æ¶‰åŠå•å…ƒæµ‹è¯•å¦‚ä½•ç¼–å†™ï¼ˆå¯ä»¥çœ‹ SpringBoot å•å…ƒæµ‹è¯•å„å±‚ï¼‰\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"åŠŸèƒ½ä»‹ç»\"\u003eåŠŸèƒ½ä»‹ç»\u003c/h2\u003e\n\u003cp\u003eå‡è®¾ä¸€ä¸ªç”¨æˆ·é¢„çº¦çš„åœºæ™¯ã€‚\u003c/p\u003e","title":"Kotlin/Java TDD å¼€å‘æµç¨‹è®°å½•"},{"content":"æœ€è¿‘é‡åˆ°ä¸€ä¸ªå¹³æ—¶æ²¡æ€ä¹ˆå…³æ³¨çš„ Kotlin ç›¸ç­‰é—®é¢˜ï¼Œå†³å®šè®°å½•ä¸€ä¸‹æ¢ç©¶è¿‡ç¨‹ã€‚\näº‹ç”± ä»¥ä¸‹ä»£ç ç‰‡æ®µ Kotlin ç‰ˆæœ¬ 1.3.72ã€‚\nè¿˜åŸé—®é¢˜ä»£ç ï¼Œå·²å»é™¤ä¸šåŠ¡é€»è¾‘éƒ¨åˆ†ï¼Œä»…ä¿ç•™å…³é”®ä»£ç ï¼Œç‰‡æ®µå¦‚ä¸‹ï¼š\n// æœ‰ä¸€ä¸ªçŠ¶æ€æšä¸¾ enum class MyState { OK, CANCELED } // æŸä¸ªå¤„ç†å‡½æ•°ä¼šè¿”å› nullable MyState fun processing(): MyState? { // å‡è®¾å½“å‰æŸç§æƒ…å†µä¸‹è¿”å› å–æ¶ˆ è¿™ä¸ªçŠ¶æ€ return MyState.CANCELED } // åœ¨å¤„ç†çŠ¶æ€æ—¶ fun handleState() { // æ­¤æ—¶ç¼–è¯‘å™¨æ¨æ–­å‡ºç±»å‹ä¸º State? val state = processing() if (state == CANCELED) { // å½“å¤„ç† CANCELED ä»¥ä¸‹ä»£ç æ²¡æœ‰æ‰§è¡Œ println(\u0026#34;Handle \u0026lt;CANCELED\u0026gt; state\u0026#34;) } } å½“å¤„ç† CANCELED ä»£ç æ²¡æœ‰æ‰§è¡Œï¼ŒåŸå› åœ¨äº***ã€Œimportã€***ã€‚\nimport javax.print.attribute.standard.JobState.CANCELED // æ­¤å¤„ä½¿ç”¨é™æ€å¯¼å…¥å¼•å…¥äº†ä¸€ä¸ªå…¶ä»–åŒ…ä¸­åŒåçš„ä¸€ä¸ªé™æ€å˜é‡ï¼Œè¯¥å˜é‡å£°æ˜å¦‚ä¸‹ // public static final JobState CANCELED = new JobState (7); è§£å†³æ–¹æ³•ï¼š\n// åˆ é™¤ä¸Šé¢çš„é™æ€å¼•åŒ…ï¼Œæ¢æˆæˆ‘ä»¬çš„ MyState if (state == MyState.CANCELED) { ... } ğŸ‘æ‹æ‹æ‰‹ï¼Œè¿™ä¸ª BUG æ”¹èµ·æ¥çœŸå®¹æ˜“ã€‚åˆå¯ä»¥æ„‰å¿«åœ°æ‘¸é±¼äº†å‘¢ã€‚\nğŸ˜ ç­‰ç­‰ï¼Œä½œä¸ºé™æ€è¯­è¨€é¢å¯¹å¦‚æ­¤è¯¡å¼‚åœ°ç±»å‹ä¸åŒ¹é…ä¸ºä»€ä¹ˆèƒ½å¤Ÿé€šè¿‡ç¼–è¯‘ï¼Ÿ\nğŸ¤”æ€è€ƒ â“é—®é¢˜ç‚¹ï¼š\nğŸ¤ Kotlin æšä¸¾ç±»å¯¹æ¯” Java çš„ä¸€ä¸ªé™æ€å˜é‡ï¼Œç›´è§‰ä¸Šæ„Ÿè§‰ç±»å‹ä¸åŒ¹é…çš„æƒ…å†µï¼Œä¸ºä»€ä¹ˆèƒ½å¤Ÿé€šè¿‡ç¼–è¯‘ï¼Ÿ â“â“â“å¤´ä¸Šçš„é—®å·å˜å¤šäº†ï¼š\nKotlin ä¸­å…¶ä»–ç±»å‹ä¼šå‡ºç°è¿™ç§ç±»ä¼¼çš„æƒ…å†µå—ï¼Ÿ Kotlin ç¼–è¯‘å™¨å…·ä½“æ€ä¹ˆå¤„ç†æšä¸¾ç±»å‹çš„ï¼Ÿ Java ä¼šå‡ºç°è¿™ç§æƒ…å†µå—ï¼Ÿï¼ˆåº”è¯¥ä¸ä¼šï¼‰ åœ¨ Stack Overflow å’Œ YouTrack æœäº†ä¸€åœˆï¼Œæ²¡æœ‰æ‰¾åˆ°æƒ³è¦çš„ä¿¡æ¯ã€‚ å¯èƒ½æ˜¯æœç´¢å…³é”®å­—ä¸å¯¹ğŸ˜¢ã€‚\nä¸ºäº†æ¢ä¸ªç©¶ç«Ÿï¼Œé€šè¿‡ä»¥ä¸‹å®éªŒç ”ç©¶ Kotlin ç¼–è¯‘å™¨ç±»å‹ä¸åŒ¹é…è¡Œä¸ºã€‚\nã€Œç‚¹å‡»è·³è½¬åˆ°ç»“æœéƒ¨åˆ†ã€\nğŸ”¬å®éªŒ ç¬¬ä¸€æ­¥ å®éªŒé¢„æœŸ å…ˆçœ‹ä¸‹å„è‡ªçš„ç›¸ç­‰ï¼ˆequalityï¼‰è¯­æ³•è¯´æ˜ï¼š\nJava ä¸­ï¼Œ\n== æ¯”è¾ƒçš„æ˜¯ä¸¤ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯å†…å­˜åœ°å€ã€‚å†…å­˜åœ°å€ç›¸åŒçš„å‰ææ˜¯ä¸¤ä¸ªå¯¹è±¡å¿…é¡»æ˜¯åŒä¸€ç§ç±»å‹ï¼› equals() æ¯”è¾ƒçš„æ˜¯ä¸¤ä¸ªå¯¹è±¡çš„å†…å®¹ã€‚ Kotlin ä¸­ï¼Œ\nIn Kotlin there are two types of equality: Structural equality (a check for equals()).\na == b =\u0026gt; a?.equals(b) ?: (b === null) Referential equality (two references point to the same object);\na === b =\u0026gt; a and b point to the same object \u0026mdash; kotlin equality\nä»¥ä¸‹æ˜¯ç®€å•ç¿»è¯‘ï¼š\nKotlin ä¸­æœ‰ä¸¤ç§ç±»å‹çš„ç›¸ç­‰ï¼š\nç»“æ„ç›¸ç­‰ï¼ˆå¯¹ equals() çš„æ£€æŸ¥ï¼‰\na == b =\u0026gt; a?.equals(b) ?: (b === null) å¼•ç”¨ç›¸ç­‰ï¼ˆä¸¤ä¸ªå¼•ç”¨æŒ‡å‘åŒä¸€å¯¹è±¡ï¼‰\na === b =\u0026gt; a å’Œ b æŒ‡å‘åŒä¸€å¯¹åƒ ç®€å•æ¥è¯´ï¼Œ\nJava ä¸­çš„ == å¯¹åº” Kotlin ===ï¼› Kotlin ä¸­çš„ == åŒ…å« Java equals å’Œ ==ã€‚ å…ˆè®¾ç½®ä¸€ä¸ªé¢„æœŸï¼š\nJava ä¸­çš„ç›¸ç­‰ï¼Œ\nequals() æˆåŠŸé€šè¿‡ç¼–è¯‘ï¼Œç¨‹åºæ­£å¸¸è¿è¡Œï¼› æ–¹æ³•å…¥å‚æ˜¯ Objectï¼Œä¸åŒç±»å‹ç›¸æ¯”ä¸ä¼šæŠ¥é”™ã€‚ == ä¸èƒ½ç¼–è¯‘ï¼› å¼•ç”¨ç›¸åŒå‰æéœ€è¦å¯¹è±¡ç›¸åŒã€‚ Kotlin ä¸­çš„ç›¸ç­‰ï¼Œ\n=== ä¸èƒ½ç¼–è¯‘ï¼› ä¸ Java çš„ == è¡Œä¸ºä¸€è‡´ï¼Œå¼•ç”¨ç›¸åŒå‰æéœ€è¦å¯¹è±¡ç›¸åŒã€‚ == ä¸èƒ½ç¼–è¯‘ï¼› a?.equals(b) ?: (b === null) è¿™é‡Œ equals å…¥å‚æ˜¯ Any? èƒ½å¤Ÿé€šè¿‡ç¼–è¯‘ï¼Œä½†æ˜¯åé¢ä¼šå¯¹æ¯”å¯¹è±¡å¼•ç”¨ï¼Œå‡­ç›´è§‰æ¥çœ‹ï¼Œæœ‰å¯¹æ¯”å¼•ç”¨çš„è¯ï¼Œå¦‚æœç±»å‹ä¸ä¸€è‡´ï¼Œä¸èƒ½ç¼–è¯‘ã€‚ ç¬¬äºŒæ­¥ æ”¶é›†å˜é‡ é€šè¿‡ä¸Šé¢å¤ç°å‡ºçš„é—®é¢˜æ¢³ç†å‡ºä»¥ä¸‹å˜é‡ï¼š\nvariable values æ¡ä»¶åˆ¤æ–­è¯­å¥ Kotlin: if / when | Java: if / switch è¡¨è¾¾å¼å¯¹è±¡ Kotlin: class / enum class / object Java: class / enum / static field è¡¨è¾¾å¼å£°æ˜ K - K / J - J / J - K ç¬¬ä¸‰æ­¥ åˆæ­¥ç­›é€‰ å¯¹äºæ¡ä»¶åˆ¤æ–­è¯­å¥ï¼Œ\nKotlin çš„ if å’Œ when çš„è¡Œä¸ºä¸€è‡´ï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥åªä½¿ç”¨ ifï¼› Java ä¸­ switch ä»…æ”¯æŒ enum / String / primitive ï¼Œå†åŠ ä¸Šå¯¹äº enum æœ‰ä¸¥æ ¼ç±»å‹æ ¡éªŒï¼ˆè¯­æ³•å±‚é¢ï¼Œå½“ switch(enum) case è¯­å¥å°±å¤„äºè¯¥ enum çš„ä¸Šä¸‹æ–‡ï¼Œåªèƒ½ä½¿ç”¨è¯¥ enum ä¸­å®šä¹‰çš„å€¼ã€‚ä¸è€ƒè™‘ï¼ŒåŒæ ·åªä½¿ç”¨ ifã€‚ if (condition) {} å¯¹äºç›¸ç­‰åˆ¤æ–­ï¼Œ\nJava ä½¿ç”¨ == å’Œ equals()ï¼› Kotlin ä»…ä½¿ç”¨ == ï¼ˆ=== è¡Œä¸ºä¸ Java ä¸­ == ä¸€è‡´ï¼Œæ•…çœç•¥ï¼‰ã€‚ å¯¹äºè¡¨è¾¾å¼å¯¹è±¡ï¼Œæ¯ä¸ªå®éªŒå¯¹è±¡å®šä¹‰ a / b ï¼Œb ç”¨äºåŒç±»å‹æ—¶å¤‡ç”¨ã€‚\nè¡¨è¾¾å¼å¯¹è±¡ Java Kotlin class MyJavaClassA / MyJavaClassB MyKotlinClassA / MyKotlinClassB enum RetentionPolicy / ElementType AnnotationRetention / AnnotationTarget object / static JobState / JobStateReason MyKotlinObjectA / MyKotlinObjectB public class MyJavaClassA {} // MyJavaClassA.java public class MyJavaClassB {} // MyJavaClassB.java class MyKotlinClassA // MyKotlinClassA.kt class MyKotlinClassB // MyKotlinClassB.kt object MyKotlinObject // MyKotlinObjectA object MyKotlinObject // MyKotlinObjectB // RetentionPolicy : java.lang.annotation.RetentionPolicy // ElementType : java.lang.annotation.ElementType // AnnotationRetention : kotlin.annotation.AnnotationRetention // AnnotationTarget : kotlin.annotation.AnnotationTarget // JobState : javax.print.attribute.standard.JobState // JobStateReason : javax.print.attribute.standard.JobStateReason å¯¹äºè¡¨è¾¾å¼å£°æ˜ï¼Œè¿˜éœ€è¦æ–°å¢ä¸€ä¸ª Kotlin ä¸­ nullable ç±»å‹\n// æ€»å…±æœ‰ä»¥ä¸‹å‡ ç±» J - J K - K K? - K? J - K J - K? K - K? ç¬¬å››æ­¥ éªŒè¯æ¡†æ¶ // java éªŒè¯ä»£ç  public class JavaGenerated { void if_JavaClass_To_JavaClass(MyJavaClassB a) { if (a.equals(new MyJavaClassA())) { } else if (a == new MyJavaClassA()) { } } } // kotlin éªŒè¯ä»£ç  class KotlinGenerated { fun if_JavaClass_To_JavaClass(a: MyJavaClassB) { if (a == MyJavaClassA()) { } } } ç¬¬äº”æ­¥ ç¼–ç éªŒè¯ æœ‰äº†ä¸Šé¢çš„æ¨¡ç‰ˆä¹‹åï¼Œå°±å¯ä»¥æ ¹æ®å˜é‡å¼€å§‹ç¼–ç éªŒè¯ã€‚\né¢å¯¹å¤šç§çš„å˜é‡ç»„åˆçš„æƒ…å†µï¼Œæ‰‹åŠ¨ç¼–å†™å¤§é‡çš„æ¨¡ç‰ˆä»£ç éå¸¸çš„åŠ³ç´¯ã€‚\næ‰€ä»¥åˆ©ç”¨å·¥å…·ï¼Œä½¿ç”¨ JavaPoet å’Œ KotlinPoet æ¥ç”Ÿæˆä»£ç ã€‚\n(èŠ±äº†ä¸€å¤©æ¥å†™è‡ªåŠ¨ç”Ÿæˆä»£ç é€»è¾‘ï¼Œå®Œæˆåæ„Ÿåˆ°ä¸€é˜µç©ºè™šï¼Œä¸ºä»€ä¹ˆè¦èŠ±é‚£ä¹ˆå¤šçš„æ—¶é—´æŠ˜è…¾ï¼Œæ‰‹åŠ¨å¤åˆ¶ç²˜è´´æ—©å†™å®Œäº†ã€‚)\nğŸ˜­è¿™é‡Œå¤§è‡´è¯´ä»¥ä¸‹ç”Ÿæˆçš„æ€è·¯ï¼š\n1. åˆ†åˆ«æšä¸¾å‡ºéœ€è¦æµ‹è¯•çš„ä¸‰ç§ç±»å‹ï¼ŒJavaCase å’Œ KotlinCase 2. JavaCase å’Œ KotlinCase ä¸­ç›¸ä¸¤ä¸¤ç»„åˆ å¾—åˆ° java-kotlin 3. æ ¹æ® java-kotlin å†æ¬¡ç»„åˆ 5 ç§æƒ…å†µ * J 2 J * J 2 K * K 2 K * K? 2 K * K? 2 J 4. æ ¹æ® java-kotlin-pairs ç”Ÿæˆå¯¹åº”çš„ KotlinIf å’Œ JavaIf æ–¹æ³• 5. æ ¹æ®æ–¹æ³•ï¼Œé€šè¿‡ JavaPoet å’Œ KotlinPoet ä»£ç  ç”Ÿæˆåçš„ä»£ç æŒºå¤šçš„ï¼Œæ„Ÿå…´è¶£çš„å»çœ‹ï¼Œè¿™ä¸¤ä¸ªæ–‡ä»¶ï¼š\nJavaGenerated.java KotlinGenerated.kt ç¬¬å…­æ­¥ è§‚å¯Ÿç»“æœ ç¯å¢ƒå¦‚ä¸‹\nJava Version 1.8.0_172 Kotlin Version 1.3.72 IDEA Version 2020.1 è¿™é‡Œç»“æœå¤§è‡´åˆ†ä¸ºä¸¤ç±»ï¼š\n[error] ï¼Œä¸èƒ½ç¼–è¯‘ã€‚ç¼–è¯‘å™¨å‘Šè­¦ï¼Œåœ¨ IDEA ä¸­çº¢è‰²æ³¢æµªçº¿æ ‡å‡ºï¼› [warning] ï¼Œèƒ½å¤Ÿç¼–è¯‘ã€‚IDEA å‘Šè­¦ï¼Œä»¥é»„è‰²èƒŒæ™¯é«˜äº®ã€‚ JavaGenerated.java å®Œå…¨ç¬¦åˆé¢„æœŸï¼Œ\n== ä¸èƒ½ç¼–è¯‘ï¼› equals() èƒ½å¤Ÿç¼–è¯‘ï¼Œå¦å¤– IDEA ç»™å‡ºå‹å¥½æé†’ã€‚ type == equals Class [error] Operator \u0026lsquo;==\u0026rsquo; cannot be applied [warning] inconvertible types Static [error] Operator \u0026lsquo;==\u0026rsquo; cannot be applied [warning] inconvertible types Enum [error] Operator \u0026lsquo;==\u0026rsquo; cannot be applied [warning] condition is always false KotlinGenerated.kt éƒ¨åˆ†ç¬¦åˆé¢„æœŸï¼Œ\n=== ä¸èƒ½ç¼–è¯‘ï¼› == å¯¹äº Kotlin çš„ Class / Static ä¸èƒ½ç¼–è¯‘ã€‚ type == Class [error] EQUALITY_NOT_APPLICABLE,Operator \u0026lsquo;==\u0026rsquo; cannot be applied Static [error] EQUALITY_NOT_APPLICABLE,Operator \u0026lsquo;==\u0026rsquo; cannot be applied Enum [warning] INCOMPATIBLE_ENUM_COMPARISON,Comparison of incompatible enums is always unsuccessful ä¸ç¬¦åˆé¢„æœŸï¼Œ\nJava Class / Static å¯ä»¥ç¼–è¯‘ï¼› Enum å¯ä»¥ç¼–è¯‘ã€‚ ä¸‹é¢æ˜¯ç›¸å…³ä»£ç ï¼š\nfun if_JavaClass_To_JavaClass(a: MyJavaClassB) { if (a == MyJavaClassA()) { } } fun if_JavaStatic_To_JavaStatic(a: JobStateReason) { if (a == JobState.CANCELED) { } } fun if_NullableKotlinEnum_To_JavaStatic(a: AnnotationRetention?) { if (a == JobState.CANCELED) { } } ä»¥ä¸Šæƒ…å†µå¯ä»¥å½’çº³ä¸ºï¼š\nJava å¯¹è±¡ç±»å‹(Class/Static)ï¼Œèƒ½é€šè¿‡ç¼–è¯‘ï¼› JavaClass_To_JavaClass JavaStatic_To_JavaStatic å¯ç©ºçš„ Kotlin æšä¸¾ç±»å‹å¯¹åº” Java é™æ€ç±»å‹ï¼Œèƒ½é€šè¿‡ç¼–è¯‘ï¼› NullableKotlinEnum_To_JavaStatic å¤§è‡´æ¢³ç†å‡ºä»¥ä¸‹ç–‘é—®ç‚¹ï¼š 2. Class / Static çš„å¯¹æ¯”ä¸ºä»€ä¹ˆæ¯” Java çš„ equals æ›´ä¸¥æ ¼ï¼Ÿ 3. ä¸ºä»€ä¹ˆ Enum çš„å¯¹æ¯”å¯ä»¥é€šè¿‡ç¼–è¯‘ï¼Œæ²¡æœ‰åƒä¸Šé¢é‚£ä¹ˆä¸¥æ ¼ï¼Ÿ 4. ä½¿ç”¨ä¸¤ä¸ªä¸åŒçš„ Java çš„å¯¹è±¡å¯¹æ¯”ï¼Œä¸ºä»€ä¹ˆå¯ä»¥é€šè¿‡ç¼–è¯‘ï¼Ÿ 5. nullable çš„æšä¸¾ç±»ä¸ºä»€ä¹ˆå¯ä»¥ä¸ Java çš„é™æ€ç±»å‹å¯¹æ¯”ï¼Ÿ\nç¬¬ä¸ƒæ­¥ æ¢ç©¶åŸå›  å†å›é¡¾ä¸€ä¸‹ Kotlin å®˜æ–¹æ–‡æ¡£ä¸­å¯¹ç›¸ç­‰ï¼ˆequalityï¼‰çš„å®šä¹‰ï¼š\na == b =\u0026gt; a?.equals(b) ?: (b === null) a === b =\u0026gt; a and b point to the same object 1. Class / Static çš„å¯¹æ¯”ä¸ºä»€ä¹ˆæ¯” Java çš„ equals æ›´ä¸¥æ ¼ï¼Ÿ ï¼ˆç›®å‰æ²¡æœ‰æƒ³æ¸…æ¥šåŸå› ï¼‰TODO ï¼šè¿™é‡Œåº”è¯¥å»çœ‹ Kotlin ç¼–è¯‘å™¨åœ¨å¤„ç† EQUALITY_NOT_APPLICABLE è¿™ä¸ªæŠ¥é”™ã€‚\n2. ä¸ºä»€ä¹ˆ Enum çš„å¯¹æ¯”å¯ä»¥é€šè¿‡ç¼–è¯‘ï¼Œæ²¡æœ‰åƒä¸Šé¢é‚£ä¹ˆä¸¥æ ¼ï¼Ÿ åœ¨ Java ä¸­ enum å…¶å®æ˜¯è¯­æ³•ç³–ï¼Œæœ€ç»ˆä¼šè¢«ç¼–è¯‘ä¸ºèŒƒå‹ç±»ã€‚\nabstract class Enum\u0026lt;E extends Enum\u0026lt;E\u0026gt;\u0026gt; { ... } Kotlin ä¸ä¾‹å¤–ï¼Œenum class ä¹Ÿæ˜¯è¯­æ³•ç³–ï¼Œæœ€ç»ˆä¼šè¢«ç¼–è¯‘ä¸ºèŒƒå‹ç±»ã€‚\nabstract class Enum\u0026lt;E : Enum\u0026lt;E\u0026gt;\u0026gt; { ... } å½“ä¸¤ä¸ªæšä¸¾å¯¹æ¯”çš„æ—¶å€™ï¼Œç›¸å½“ä¸æ˜¯åŒä¸€ä¸ªç±»çš„ä¸åŒèŒƒå‹ï¼Œæ‰€ä»¥èƒ½å¤Ÿé€šè¿‡ç¼–è¯‘ï¼Œä¸ä¼šå‡ºç°ç±»å‹ä¸åŒ¹é…é—®é¢˜ã€‚\nè¿™é‡Œï¼ŒIDEA å‘Šè­¦ INCOMPATIBLE_ENUM_COMPARISON ç»™å‡ºå‹å¥½æç¤ºã€‚\n3. ä½¿ç”¨ä¸¤ä¸ªä¸åŒçš„ Java çš„å¯¹è±¡å¯¹æ¯”ï¼Œä¸ºä»€ä¹ˆå¯ä»¥é€šè¿‡ç¼–è¯‘ï¼Ÿ Kotlin ä¸­æœ‰ä¸¥æ ¼çš„ Nullable / Notnull è¯­æ³•ã€‚\nå½“ä¸ Java çš„ç±»è¿›è¡Œäº’ç›¸è°ƒç”¨æ—¶ï¼Œç”±äº Java ä¸­çš„ Null ä¿¡æ¯ä¸ç¡®å®šï¼Œç¼–è¯‘å™¨æ— æ³•æ¨æ–­å‡º Java ç±»çš„å…·ä½“ Null ä¿¡æ¯(é»˜è®¤è§†ä¸º Nullable)ã€‚ å¯ä»¥åœ¨ IDEA çš„æ™ºèƒ½ç±»å‹æ¨æ–­ä¸­çœ‹åˆ° ! çš„æ ‡è¯†ã€‚ ï¼ˆåœ¨ Java ä¸­æ˜¾å¼ä½¿ç”¨ JetBrains æä¾›çš„ @Nullable / @NotNull è¿™ä¸¤ä¸ªæ³¨è§£ï¼Œå¯ä»¥è®© Kotlin ç¼–è¯‘å™¨æ­£ç¡®æ¨æ–­å‡º Null ä¿¡æ¯ï¼‰ ã€TODOï¼Œæä¾› IDEA æˆªå›¾æ›´å¥½ã€‘\næ‰€ä»¥ä¸¤ä¸ª Nullable ç±»å‹çš„è¿›è¡Œæ¯”è¾ƒçš„æ—¶å€™ï¼Œä¼šèµ°åˆ° b === null è¿™ä¸ªåˆ¤æ–­ï¼Œä¸ä¼šæŠ¥é”™ï¼Œèƒ½å¤Ÿç¼–è¯‘ã€‚\n4. Kotlin nullable çš„æšä¸¾ç±»ä¸ºä»€ä¹ˆå¯ä»¥ä¸ Java çš„é™æ€ç±»å‹å¯¹æ¯”ï¼Ÿ è¿›è¡Œä¸Šè¿°å‰ç½®æ¢ç´¢ï¼Œç»ˆäºåˆ°è¿™æ¬¡é—®é¢˜çš„ç»ˆç‚¹ã€‚ç»“åˆä¸Šé¢çš„ç»“è®ºï¼Œæ€»ç»“å¦‚ä¸‹ï¼š\næšä¸¾ç±»ç¼–è¯‘åæ˜¯åŒä¸€ä¸ª Enum ç±»ï¼› Java çš„é™æ€ç±»å‹ Null ä¿¡æ¯æœªçŸ¥ï¼› ä¸¤ä¸ª Nullable ç±»å‹è¿›è¡Œå¯¹æ¯”ï¼Œä¼šèµ°åˆ° b === null åˆ¤æ–­ï¼Œä¸ä¼šæŠ¥é”™ï¼Œèƒ½å¤Ÿç¼–è¯‘ã€‚ // ç»™ Java çš„ç±»æ˜ç¡®çš„ Null ä¿¡æ¯ // IDEA å‡ºç°å‹å¥½è­¦å‘Š [INCOMPATIBLE_ENUM_COMPARISON] fun if_NullableKotlinEnum_To_JavaStatic(a: AnnotationRetention?) { // ä½¿ç”¨ !! å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œæ˜ç¡® Null ä¿¡æ¯æ˜¯ Notnull if (a == JobState.CANCELED!!) { // [INCOMPATIBLE_ENUM_COMPARISON] Comparison of incompatible enums // \u0026#39;AnnotationRetention?\u0026#39; and \u0026#39;JobState\u0026#39; is always unsuccessful } } ğŸ‘€æ€»ç»“ æ•´ä¸ªæ¢æ±‚çœŸç›¸çš„è¿‡ç¨‹è¿˜æ˜¯å¾ˆæœ‰è¶£çš„ï¼› æœ€åçŸ¥é“çœŸç›¸åï¼Œè¿˜æ˜¯è‡ªå·±å¤ªèœäº†ï¼ŒåŸºç¡€çŸ¥è¯†æ²¡æœ‰å®Œå…¨æŒæ¡ï¼› æ·±å…¥æ¢ç©¶äº† Kotlin å’Œ Java çš„ç›¸ç­‰å’Œæšä¸¾ç›¸å…³çš„å†…å®¹ï¼› ä¸‹ä¸€æ­¥ï¼šè¶ç€è¿™è‚¡å¥½å¥‡å¿ƒï¼Œå»äº†è§£ Kotlin ç¼–è¯‘å™¨çš„ç›¸ç­‰ç±»å‹åˆ¤æ–­æºç ã€‚ ğŸ”—ç›¸å…³é“¾æ¥ GitHub Source Code Kotlin Equality Docs JavaPoet KotlinPoet JavaGenerated.java KotlinGenerated.kt ","permalink":"https://lexcao.io/zh/posts/kotlin-equality-diving/","summary":"\u003cp\u003eæœ€è¿‘é‡åˆ°ä¸€ä¸ªå¹³æ—¶æ²¡æ€ä¹ˆå…³æ³¨çš„ Kotlin ç›¸ç­‰é—®é¢˜ï¼Œå†³å®šè®°å½•ä¸€ä¸‹æ¢ç©¶è¿‡ç¨‹ã€‚\u003c/p\u003e\n\u003ch1 id=\"äº‹ç”±\"\u003eäº‹ç”±\u003c/h1\u003e\n\u003cp\u003eä»¥ä¸‹ä»£ç ç‰‡æ®µ Kotlin ç‰ˆæœ¬ \u003ccode\u003e1.3.72\u003c/code\u003eã€‚\u003c/p\u003e\n\u003cp\u003eè¿˜åŸé—®é¢˜ä»£ç ï¼Œå·²å»é™¤ä¸šåŠ¡é€»è¾‘éƒ¨åˆ†ï¼Œä»…ä¿ç•™å…³é”®ä»£ç ï¼Œç‰‡æ®µå¦‚ä¸‹ï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-kotlin\" data-lang=\"kotlin\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// æœ‰ä¸€ä¸ªçŠ¶æ€æšä¸¾\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eenum\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eMyState\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    OK, CANCELED\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// æŸä¸ªå¤„ç†å‡½æ•°ä¼šè¿”å› nullable MyState\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003efun\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eprocessing\u003c/span\u003e(): MyState? {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#75715e\"\u003e// å‡è®¾å½“å‰æŸç§æƒ…å†µä¸‹è¿”å› å–æ¶ˆ è¿™ä¸ªçŠ¶æ€\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eMyState\u003c/span\u003e.CANCELED\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// åœ¨å¤„ç†çŠ¶æ€æ—¶\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003efun\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ehandleState\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#75715e\"\u003e// æ­¤æ—¶ç¼–è¯‘å™¨æ¨æ–­å‡ºç±»å‹ä¸º State?\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#66d9ef\"\u003eval\u003c/span\u003e state = processing()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e (state \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e CANCELED) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e// å½“å¤„ç† CANCELED ä»¥ä¸‹ä»£ç æ²¡æœ‰æ‰§è¡Œ\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e        println(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Handle \u0026lt;CANCELED\u0026gt; state\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eå½“å¤„ç† CANCELED ä»£ç æ²¡æœ‰æ‰§è¡Œï¼ŒåŸå› åœ¨äº***ã€Œimportã€***ã€‚\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e javax.print.attribute.standard.JobState.CANCELED\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// æ­¤å¤„ä½¿ç”¨é™æ€å¯¼å…¥å¼•å…¥äº†ä¸€ä¸ªå…¶ä»–åŒ…ä¸­åŒåçš„ä¸€ä¸ªé™æ€å˜é‡ï¼Œè¯¥å˜é‡å£°æ˜å¦‚ä¸‹\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// public static final JobState CANCELED = new JobState (7);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eè§£å†³æ–¹æ³•ï¼š\u003c/p\u003e","title":"Kotlin å¥‡æ€ªçš„ç›¸ç­‰ç°è±¡æ¢ç©¶"},{"content":"èƒŒæ™¯ Web åå°å¼€å‘ä¸­ï¼Œå¯¹äºä¸€ä¸ªå®ä½“çš„æ“ä½œä¼šè¡ç”Ÿå‡ºå¤šä¸ªç±»ä¼¼çš„å¯¹è±¡è¿›è¡Œæ“ä½œï¼ˆé¿å…ç›´æ¥ä½¿ç”¨å®ä½“ï¼‰ï¼Œç”±æ­¤å‡ºç°ç›¸å…³åè¯\næŒä¹…åŒ–å¯¹è±¡ï¼Œå³å®ä½“ PO(Persistent Object) ä¼ è¾“å¯¹è±¡ DTO(Data Transfer Object) ä¸šåŠ¡å¯¹è±¡ BO(Business Object) å±•ç¤ºå¯¹è±¡ VO(View Object) ç­‰ç­‰â€¦â€¦ è¿™äº›å¯¹è±¡å¤§å¤šæ•°ç›´æ¥ä»å®ä½“é‡Œé¢è£å‰ªå‡ ä¸ªå­—æ®µï¼Œæ¯”å¦‚ï¼Œåœ¨ä¸€æ¬¡åˆ›å»ºè®¢å•è¯·æ±‚ä¸­ä»¥è®¢å•å®ä½“ï¼ˆOrderEntityï¼‰ä¸ºä¾‹ï¼Œç»å†å¦‚ä¸‹æµç¨‹ï¼š 1. æ¥æ”¶è¯·æ±‚ä½“ CreateOrderRequest 2. æ ¹æ® OrderQuery æ„é€ æŸ¥è¯¢å¯¹è±¡æŸ¥è¯¢è®¢å• 3. æ„é€  OrderEntity è¿›è¡ŒæŒä¹…åŒ–æ“ä½œ 4. æ„é€  OrderBO è¿›è¡Œä¸‹æ¸¸æ¶ˆè´¹ 5. è¿”å›å“åº”ä½“ CreateOrderResponse å¯è§ï¼Œä» OrderEntity è¡ç”Ÿå‡º 4 ä¸ªå¯¹è±¡ï¼Œä»…ä»…æ˜¯å¯¹è®¢å•çš„å®ä½“çš„éƒ¨åˆ†è£å‰ªï¼Œä½†æ˜¯è¦ç¼–å†™å¾ˆå¤šé‡å¤çš„ä»£ç ï¼ˆå¤åˆ¶ä¹Ÿè¡Œï¼‰ã€‚å½“ç„¶ï¼Œå¦‚æœæ˜¯æ–°å¢å­—æ®µçš„è¯å¯ä»¥ä½¿ç”¨ç»§æ‰¿è§£å†³ã€‚\nåœ¨ Kotlin Web åå°å¼€å‘ä¸­ï¼Œdata class çš„è¯­æ³•ç‰¹æ€§å¸¦æ¥å¾ˆå¤šä¼˜åŠ¿ï¼Œä½†è¿˜æ˜¯é¿å…ä¸äº†åˆ›å»ºç±»ä¼¼çš„é‡å¤å¯¹è±¡ã€‚ æ‰€ä»¥ Konverter è¯ç”Ÿäºæ­¤ï¼Œè§£å†³å®ä½“å¯¹è±¡è£å‰ªé—®é¢˜ã€‚è¿˜æœ‰å¦ä¸€ä¸ªåŠŸèƒ½é‚£å°±æ˜¯è‡ªåŠ¨ç”Ÿæˆä¸¤ä¸ªå®ä½“é—´çš„è½¬æ¢æ–¹æ³•ã€‚\næ³¨æ„ï¼šç›®å‰åªæ”¯æŒ Kotlinï¼Œå¹¶ä¸”ç”Ÿæˆçš„è½¬æ¢æ–¹æ³•æ˜¯é€šè¿‡æ‰©å±•å‡½æ•°å®ç°\næ˜¯ä»€ä¹ˆ é€šè¿‡ KAPT(Kotlin Annotation Processing Tool æ³¨è§£å¤„ç†ä»¥åŠ Kotlin Poet ä»£ç ç”Ÿæˆï¼Œå®ç°è‡ªåŠ¨ç”Ÿæˆå¯¹å®ä½“çš„ç›¸å…³è£å‰ªçš„å¯¹è±¡ã€‚ ä¸»è¦æœ‰ä¸¤ä¸ªæ³¨è§£ï¼š\n@Konvertable ç”Ÿæˆè£å‰ªçš„å®ä½“ä»¥åŠå¯¹åº”çš„è½¬æ¢æ–¹æ³• @Konvert å•ç‹¬é’ˆå¯¹æŸä¸ªç±»ç”Ÿæˆè½¬æ¢æ–¹æ³• åºŸè¯ä¸å¤šè¯´æ¥çœ‹æ€ä¹ˆä½¿ç”¨ã€‚\næ€ä¹ˆç”¨ 1. å¼•å…¥ä¾èµ– // for build.gradle.kts repositories { maven(\u0026#34;https://jitpack.io\u0026#34;) } dependencies { kapt(\u0026#34;com.github.lexcao:konverter:master-SNAPSHOT\u0026#34;) implementation(\u0026#34;com.github.lexcao:konverter-annotation:master-SNAPSHOT\u0026#34;) } // for build.gradle repositories { maven { url \u0026#39;https://jitpack.io\u0026#39; } } dependencies { kapt \u0026#39;com.github.lexcao:konverter:master-SNAPSHOT\u0026#39; implementation \u0026#39;com.github.lexcao:konverter-annotation:master-SNAPSHOT\u0026#39; } 2. åœ¨éœ€è¦è½¬æ¢çš„ç±»ä¸ŠåŠ ä¸Šæ³¨è§£ @Konvertable( To(name = \u0026#34;LoginDTO\u0026#34;, pick = [\u0026#34;username\u0026#34;, \u0026#34;password\u0026#34;]), To(name = \u0026#34;UserListDTO\u0026#34;, omit = [\u0026#34;password\u0026#34;]) ) @Konvert(to = UserVO::class) data class UserEntity( val id: Long, @Konvert.Field(\u0026#34;name\u0026#34;) val username: String, val password: String, @Konvert.By(GenderEnumConverter::class) val gender: Int ) 3. ç”Ÿæˆçš„ä»£ç å¦‚ä¸‹ï¼š // @Konvertable /** * Auto generated code by @Konvertable */ data class LoginDTO( val username: String, val password: String ) /** * Auto generated code by @Konvertable */ data class UserListDTO( val id: Long, val username: String, val gender: Int ) /** * Auto generated code by @Konvert */ fun UserEntity.toLoginDTO(username: String = this@toLoginDTO.username, password: String = this@toLoginDTO.password): LoginDTO = LoginDTO(username=username,password=password) /** * Auto generated code by @Konvert */ fun LoginDTO.toUserEntity( id: Long = 0L, username: String = this@toUserEntity.username, password: String = this@toUserEntity.password, gender: Int = 0 ): UserEntity = UserEntity(id=id,username=username,password=password,gender=gender) /** * Auto generated code by @Konvert */ fun UserEntity.toUserListDTO( id: Long = this@toUserListDTO.id, username: String = this@toUserListDTO.username, gender: Int = this@toUserListDTO.gender ): UserListDTO = UserListDTO(id=id,username=username,gender=gender) /** * Auto generated code by @Konvert */ fun UserListDTO.toUserEntity( id: Long = this@toUserEntity.id, username: String = this@toUserEntity.username, password: String = \u0026#34;\u0026#34;, gender: Int = this@toUserEntity.gender ): UserEntity = UserEntity(id=id,username=username,password=password,gender=gender) /** * Auto generated code by @Konvert */ fun UserEntity.toRegisterDTO( username: String = this@toRegisterDTO.username, password: String = this@toRegisterDTO.password, gender: Int = this@toRegisterDTO.gender ): RegisterDTO = RegisterDTO(username=username,password=password,gender=gender) /** * Auto generated code by @Konvert */ fun RegisterDTO.toUserEntity( id: Long = 0L, username: String = this@toUserEntity.username, password: String = this@toUserEntity.password, gender: Int = this@toUserEntity.gender ): UserEntity = UserEntity(id=id,username=username,password=password,gender=gender) // @Konvert // è½¬æ¢ä¸ºå¦‚ä¸‹å¯¹è±¡ data class UserVO( val id: String, val name: String, val gender: GenderEnum ) enum class GenderEnum { MALE, FEMALE; } object GenderEnumConverter : Konvert.KonvertBy\u0026lt;Int, GenderEnum\u0026gt; { override fun Int.forward(): GenderEnum { return GenderEnum.values()[this] } override fun GenderEnum.backward(): Int { return this.ordinal } } // ç”Ÿæˆçš„ä»£ç  ** * Auto generated code by @Konvert */ fun UserEntity.toUserVO( id: String = this@toUserVO.id.toString(), name: String = this@toUserVO.username, gender: GenderEnum = with(GenderEnumConverter) { this@toUserVO.gender.forward() } ): UserVO = UserVO(id=id,name=name,gender=gender) /** * Auto generated code by @Konvert */ fun UserVO.toUserEntity( id: Long = this@toUserEntity.id.toLong(), username: String = this@toUserEntity.name, password: String = \u0026#34;\u0026#34;, gender: Int = with(GenderEnumConverter) { this@toUserEntity.gender.backward() } ): UserEntity = UserEntity(id=id,username=username,password=password,gender=gender) ç›¸å…³ API è¯´æ˜ è½¬æ¢è§„åˆ™\nå¦‚æœè½¬æ¢è‡³ String ç±»å‹ï¼ŒåŸç±»å‹ä¸åŒ¹é…æ—¶ä¼šè°ƒç”¨ toString() å¦‚æœè½¬æ¢è‡³åŸºç¡€æ•°æ®ç±»å‹ï¼Œè½¬æ¢å­—æ®µç¼ºå¤±æ—¶ä¼šä½¿ç”¨é»˜è®¤ç±»å‹ å¦‚æœè½¬æ¢è‡³å…è®¸ä¸º null ç±»å‹ï¼ŒåŸç±»å‹ä¸åŒ¹é…æ—¶ä¼šä½¿ç”¨é»˜è®¤å€¼ null å¦‚æœè½¬æ¢è‡³å¼•ç”¨ç±»å‹ï¼ˆString é™¤å¤–ï¼‰æˆ–è€…æ‰¾ä¸åˆ°æ˜ å°„éœ€è¦åœ¨è½¬æ¢æ–¹æ³•æ˜¾å¼èµ‹å€¼ ä¸‹ä¸€æ­¥ ä»£ç é‡æ„ï¼Œæ–°å¢æµ‹è¯•ç”¨ä¾‹ æ”¯æŒå¼•ç”¨ç±»å‹é»˜è®¤å€¼ æ”¯æŒåµŒå¥—å¯¹è±¡ æ”¯æŒ Java å·²çŸ¥ BUG ä¿®å¤ æ”¯æŒæ˜ å°„å¤±è´¥å­—æ®µè·å–åŸç±»å‹çš„æ„é€ å‡½æ•°å‚æ•°é»˜è®¤å€¼ï¼Œæˆ–è€…æˆå‘˜å˜é‡é»˜è®¤å€¼ï¼ˆç›®å‰ Kotlin KAPT å·²æ”¯æŒè·å–æˆå‘˜å˜é‡é»˜è®¤å€¼ï¼Œæš‚ä¸æ”¯æŒè·å–å‡½æ•°å‚æ•°é»˜è®¤å€¼ï¼‰ å·²çŸ¥ BUG ç›¸åŒ name åœ¨ @Konvertable å†²çª @Konvertable å‚æ•°åˆæ³•æ€§æ ¡éªŒä»¥åŠå‹å¥½æŠ¥é”™ KonvertBy ç›®å‰ä½¿ç”¨ Class æŠ¥é”™æˆ–è€…ä½¿ç”¨ Companion æŠ¥é”™ æœ€å Konverter æºç åœ¨ GitHub\nç›¸å…³çš„æ ·ä¾‹ä»£ç  GitHub\n","permalink":"https://lexcao.io/zh/posts/konverter/","summary":"\u003ch1 id=\"èƒŒæ™¯\"\u003eèƒŒæ™¯\u003c/h1\u003e\n\u003cp\u003eWeb åå°å¼€å‘ä¸­ï¼Œå¯¹äºä¸€ä¸ªå®ä½“çš„æ“ä½œä¼šè¡ç”Ÿå‡ºå¤šä¸ªç±»ä¼¼çš„å¯¹è±¡è¿›è¡Œæ“ä½œï¼ˆé¿å…ç›´æ¥ä½¿ç”¨å®ä½“ï¼‰ï¼Œç”±æ­¤å‡ºç°ç›¸å…³åè¯\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eæŒä¹…åŒ–å¯¹è±¡ï¼Œå³å®ä½“ PO(\u003cem\u003ePersistent Object\u003c/em\u003e)\u003c/li\u003e\n\u003cli\u003eä¼ è¾“å¯¹è±¡ DTO(\u003cem\u003eData Transfer Object\u003c/em\u003e)\u003c/li\u003e\n\u003cli\u003eä¸šåŠ¡å¯¹è±¡ BO(\u003cem\u003eBusiness Object\u003c/em\u003e)\u003c/li\u003e\n\u003cli\u003eå±•ç¤ºå¯¹è±¡ VO(\u003cem\u003eView Object\u003c/em\u003e)\u003c/li\u003e\n\u003cli\u003eç­‰ç­‰â€¦â€¦\nè¿™äº›å¯¹è±¡å¤§å¤šæ•°ç›´æ¥ä»å®ä½“é‡Œé¢è£å‰ªå‡ ä¸ªå­—æ®µï¼Œæ¯”å¦‚ï¼Œåœ¨ä¸€æ¬¡åˆ›å»ºè®¢å•è¯·æ±‚ä¸­ä»¥è®¢å•å®ä½“ï¼ˆOrderEntityï¼‰ä¸ºä¾‹ï¼Œç»å†å¦‚ä¸‹æµç¨‹ï¼š\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e1. æ¥æ”¶è¯·æ±‚ä½“ CreateOrderRequest\n2. æ ¹æ® OrderQuery æ„é€ æŸ¥è¯¢å¯¹è±¡æŸ¥è¯¢è®¢å•\n3. æ„é€  OrderEntity è¿›è¡ŒæŒä¹…åŒ–æ“ä½œ\n4. æ„é€  OrderBO è¿›è¡Œä¸‹æ¸¸æ¶ˆè´¹\n5. è¿”å›å“åº”ä½“ CreateOrderResponse\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eå¯è§ï¼Œä» OrderEntity è¡ç”Ÿå‡º 4 ä¸ªå¯¹è±¡ï¼Œä»…ä»…æ˜¯å¯¹è®¢å•çš„å®ä½“çš„éƒ¨åˆ†è£å‰ªï¼Œä½†æ˜¯è¦ç¼–å†™å¾ˆå¤šé‡å¤çš„ä»£ç ï¼ˆå¤åˆ¶ä¹Ÿè¡Œï¼‰ã€‚å½“ç„¶ï¼Œå¦‚æœæ˜¯æ–°å¢å­—æ®µçš„è¯å¯ä»¥ä½¿ç”¨ç»§æ‰¿è§£å†³ã€‚\u003c/p\u003e\n\u003cp\u003eåœ¨ Kotlin Web åå°å¼€å‘ä¸­ï¼Œdata class çš„è¯­æ³•ç‰¹æ€§å¸¦æ¥å¾ˆå¤šä¼˜åŠ¿ï¼Œä½†è¿˜æ˜¯é¿å…ä¸äº†åˆ›å»ºç±»ä¼¼çš„é‡å¤å¯¹è±¡ã€‚\næ‰€ä»¥ \u003ccode\u003eKonverter\u003c/code\u003e è¯ç”Ÿäºæ­¤ï¼Œè§£å†³å®ä½“å¯¹è±¡è£å‰ªé—®é¢˜ã€‚è¿˜æœ‰å¦ä¸€ä¸ªåŠŸèƒ½é‚£å°±æ˜¯è‡ªåŠ¨ç”Ÿæˆä¸¤ä¸ªå®ä½“é—´çš„è½¬æ¢æ–¹æ³•ã€‚\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eæ³¨æ„ï¼šç›®å‰åªæ”¯æŒ Kotlinï¼Œå¹¶ä¸”ç”Ÿæˆçš„è½¬æ¢æ–¹æ³•æ˜¯é€šè¿‡æ‰©å±•å‡½æ•°å®ç°\u003c/p\u003e\u003c/blockquote\u003e\n\u003ch1 id=\"æ˜¯ä»€ä¹ˆ\"\u003eæ˜¯ä»€ä¹ˆ\u003c/h1\u003e\n\u003cp\u003eé€šè¿‡ \u003ca href=\"https://kotlinlang.org/docs/reference/kapt.html]\"\u003e\u003cem\u003eKAPT(Kotlin Annotation Processing Tool\u003c/em\u003e\u003c/a\u003e æ³¨è§£å¤„ç†ä»¥åŠ \u003ca href=\"https://github.com/square/kotlinpoet\"\u003e\u003cem\u003eKotlin Poet\u003c/em\u003e\u003c/a\u003e ä»£ç ç”Ÿæˆï¼Œå®ç°è‡ªåŠ¨ç”Ÿæˆå¯¹å®ä½“çš„ç›¸å…³è£å‰ªçš„å¯¹è±¡ã€‚\nä¸»è¦æœ‰ä¸¤ä¸ªæ³¨è§£ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e@Konvertable\u003c/code\u003e ç”Ÿæˆè£å‰ªçš„å®ä½“ä»¥åŠå¯¹åº”çš„è½¬æ¢æ–¹æ³•\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e@Konvert\u003c/code\u003e å•ç‹¬é’ˆå¯¹æŸä¸ªç±»ç”Ÿæˆè½¬æ¢æ–¹æ³•\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eåºŸè¯ä¸å¤šè¯´æ¥çœ‹æ€ä¹ˆä½¿ç”¨ã€‚\u003c/p\u003e\n\u003ch1 id=\"æ€ä¹ˆç”¨\"\u003eæ€ä¹ˆç”¨\u003c/h1\u003e\n\u003ch2 id=\"1-å¼•å…¥ä¾èµ–\"\u003e1. å¼•å…¥ä¾èµ–\u003c/h2\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e// for build.gradle.kts\nrepositories {\n    maven(\u0026#34;https://jitpack.io\u0026#34;)\n}\n\ndependencies {\n    kapt(\u0026#34;com.github.lexcao:konverter:master-SNAPSHOT\u0026#34;)\n    implementation(\u0026#34;com.github.lexcao:konverter-annotation:master-SNAPSHOT\u0026#34;)\n}\n\n// for build.gradle\nrepositories {\n    maven { url \u0026#39;https://jitpack.io\u0026#39; }\n}\n\ndependencies {\n    kapt \u0026#39;com.github.lexcao:konverter:master-SNAPSHOT\u0026#39;\n    implementation \u0026#39;com.github.lexcao:konverter-annotation:master-SNAPSHOT\u0026#39;\n}\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"2-åœ¨éœ€è¦è½¬æ¢çš„ç±»ä¸ŠåŠ ä¸Šæ³¨è§£\"\u003e2. åœ¨éœ€è¦è½¬æ¢çš„ç±»ä¸ŠåŠ ä¸Šæ³¨è§£\u003c/h2\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e@Konvertable(\n    To(name = \u0026#34;LoginDTO\u0026#34;, pick = [\u0026#34;username\u0026#34;, \u0026#34;password\u0026#34;]),\n    To(name = \u0026#34;UserListDTO\u0026#34;, omit = [\u0026#34;password\u0026#34;])\n)\n@Konvert(to = UserVO::class)\ndata class UserEntity(\n    val id: Long,\n    @Konvert.Field(\u0026#34;name\u0026#34;)\n    val username: String,\n    val password: String,\n    @Konvert.By(GenderEnumConverter::class)\n    val gender: Int\n)\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"3-ç”Ÿæˆçš„ä»£ç å¦‚ä¸‹\"\u003e3. ç”Ÿæˆçš„ä»£ç å¦‚ä¸‹ï¼š\u003c/h2\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e// @Konvertable\n/**\n *  Auto generated code by @Konvertable\n */\ndata class LoginDTO(\n  val username: String,\n  val password: String\n)\n\n/**\n *  Auto generated code by @Konvertable\n */\ndata class UserListDTO(\n  val id: Long,\n  val username: String,\n  val gender: Int\n)\n\n/**\n *  Auto generated code by @Konvert\n */\nfun UserEntity.toLoginDTO(username: String = this@toLoginDTO.username, password: String =\n    this@toLoginDTO.password): LoginDTO = LoginDTO(username=username,password=password)\n\n/**\n *  Auto generated code by @Konvert\n */\nfun LoginDTO.toUserEntity(\n  id: Long = 0L,\n  username: String = this@toUserEntity.username,\n  password: String = this@toUserEntity.password,\n  gender: Int = 0\n): UserEntity = UserEntity(id=id,username=username,password=password,gender=gender)\n\n/**\n *  Auto generated code by @Konvert\n */\nfun UserEntity.toUserListDTO(\n  id: Long = this@toUserListDTO.id,\n  username: String = this@toUserListDTO.username,\n  gender: Int = this@toUserListDTO.gender\n): UserListDTO = UserListDTO(id=id,username=username,gender=gender)\n\n/**\n *  Auto generated code by @Konvert\n */\nfun UserListDTO.toUserEntity(\n  id: Long = this@toUserEntity.id,\n  username: String = this@toUserEntity.username,\n  password: String = \u0026#34;\u0026#34;,\n  gender: Int = this@toUserEntity.gender\n): UserEntity = UserEntity(id=id,username=username,password=password,gender=gender)\n\n/**\n *  Auto generated code by @Konvert\n */\nfun UserEntity.toRegisterDTO(\n  username: String = this@toRegisterDTO.username,\n  password: String = this@toRegisterDTO.password,\n  gender: Int = this@toRegisterDTO.gender\n): RegisterDTO = RegisterDTO(username=username,password=password,gender=gender)\n\n/**\n *  Auto generated code by @Konvert\n */\nfun RegisterDTO.toUserEntity(\n  id: Long = 0L,\n  username: String = this@toUserEntity.username,\n  password: String = this@toUserEntity.password,\n  gender: Int = this@toUserEntity.gender\n): UserEntity = UserEntity(id=id,username=username,password=password,gender=gender)\n\u003c/code\u003e\u003c/pre\u003e\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e// @Konvert\n// è½¬æ¢ä¸ºå¦‚ä¸‹å¯¹è±¡\ndata class UserVO(\n    val id: String,\n    val name: String,\n    val gender: GenderEnum\n)\n\nenum class GenderEnum {\n    MALE, FEMALE;\n}\n\nobject GenderEnumConverter : Konvert.KonvertBy\u0026lt;Int, GenderEnum\u0026gt; {\n    override fun Int.forward(): GenderEnum {\n        return GenderEnum.values()[this]\n    }\n\n    override fun GenderEnum.backward(): Int {\n        return this.ordinal\n    }\n}\n\n// ç”Ÿæˆçš„ä»£ç \n**\n *  Auto generated code by @Konvert\n */\nfun UserEntity.toUserVO(\n  id: String = this@toUserVO.id.toString(),\n  name: String = this@toUserVO.username,\n  gender: GenderEnum = with(GenderEnumConverter) { this@toUserVO.gender.forward() }\n): UserVO = UserVO(id=id,name=name,gender=gender)\n\n/**\n *  Auto generated code by @Konvert\n */\nfun UserVO.toUserEntity(\n  id: Long = this@toUserEntity.id.toLong(),\n  username: String = this@toUserEntity.name,\n  password: String = \u0026#34;\u0026#34;,\n  gender: Int = with(GenderEnumConverter) { this@toUserEntity.gender.backward() }\n): UserEntity = UserEntity(id=id,username=username,password=password,gender=gender)\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"ç›¸å…³-api-è¯´æ˜\"\u003eç›¸å…³ API è¯´æ˜\u003c/h2\u003e\n\u003cp\u003eè½¬æ¢è§„åˆ™\u003c/p\u003e","title":"ä½¿ç”¨ KAPT ç”Ÿæˆ Kotlin Data Class è½¬æ¢å™¨"},{"content":"èƒŒæ™¯ æŸæ¬¡å‘ç‰ˆä¹‹åï¼Œçº¿ä¸ŠæœåŠ¡ä½æ¦‚ç‡å‡ºç°æŸå°å®ä¾‹æ¥å£å“åº”è¶…æ—¶ï¼Œå…·ä½“è¡¨ç°ä¸ºï¼š\n/health æ¥å£è¶…æ—¶æŠ¥è­¦ï¼› çº¿ç¨‹æ­»é”ï¼ŒTomcat çº¿ç¨‹æ± åƒæ»¡ï¼› æœåŠ¡å®Œå…¨æ— å“åº”ã€‚ ä¿ç•™ä¸‹å½“å‰ heap dump å’Œ thread stack åï¼Œä¸´æ—¶é‡å¯æœåŠ¡å™¨æ¢å¤æ­£å¸¸ã€‚\n# heap dump $ jmap -dump:format=b,file=dump.hprof [pid] # thread stack jstack [pid] \u0026gt; stack.txt æ¥ä¸‹æ¥ç®€å•è®°å½•ä¸€ä¸‹æ’æŸ¥ç»“æœã€‚ ï¼ˆæ­¤æ–‡ä¸ºå›å¿†æ‰€å†™ï¼Œå½“æ—¶æ’æŸ¥çš„æ€è€ƒç»†èŠ‚å’Œè¿‡ç¨‹å·²çœç•¥ï¼‰\næ’æŸ¥ heap dump ä½¿ç”¨å·¥å…· Eclipse + MAT\nå®‰è£… # å®‰è£… eclipse $ brew cask install eclipse-java # å®‰è£… eclipse MAT $ brew cask install mat # æ˜¯çš„ï¼Œè¿™ä¸ªå°±æ˜¯ eclipse-mat ç›¸å…³è¿æ¥ Eclipse\nEclipse MAT\nä½¿ç”¨ æŠŠ heap dump æ–‡ä»¶ dump.hprof å¯¼å…¥åˆ° MATã€‚\nå‘ç°æœ‰ä¸€ä¸ªåç§°ä¸º Spring-Async-Scheduler å¼‚æ­¥é˜Ÿåˆ—å ç”¨ç‰¹åˆ«å¤§ã€‚ã€TODO å›¾ç‰‡ã€‘\nè¿™é‡Œæ’æŸ¥æ–¹å‘æœ‰äº†ï¼šå¼‚æ­¥è°ƒç”¨ç›¸å…³ã€‚\nthread stack ä½¿ç”¨å·¥å…· ç›´æ¥ä½œä¸º txt æ‰“å¼€ï¼Œæˆ–è€…ä½¿ç”¨ IDEA è‡ªå¸¦çš„çº¿ç¨‹æ ˆåˆ†æã€‚\nä½¿ç”¨ æ‰“å¼€ IDEA èœå•æ  Analyze \u0026gt; Analyze Stack Trace or Thread Dumpï¼› å¤åˆ¶ thread.txt å†…å®¹åˆ°çª—å£åŒºï¼› å®˜æ–¹è¯´æ˜ IDEA Analyze Stacktrace ï¼› å¦‚æœæ˜¯åŒä¸€ä¸ªé¡¹ç›®çš„è°ƒç”¨æ ˆï¼ŒIDEA æ”¯æŒè·³è½¬åˆ°å…·ä½“çš„æ–¹æ³•ï¼Œå¼ºçƒˆæ¨èğŸ‘ã€‚ ã€TODO å›¾ç‰‡ã€‘ æ’æŸ¥ é€šè¿‡ IDEA ä¸­å‹å¥½çš„çº¿ç¨‹æ ˆä¿¡æ¯å¯è§ï¼Œã€TODO æˆªå›¾ã€‘\nTomcat-NIO å…¨éƒ¨ 200 ä¸ªçº¿ç¨‹éƒ½åœ¨ç­‰å¾…ï¼Œæ²¡æœ‰çº¿ç¨‹ç»§ç»­å¤„ç†åç»­çš„è¯·æ±‚ï¼›\nSpring-Async å…¨éƒ¨ 4 ä¸ªçº¿ç¨‹ä¹Ÿåœ¨ç­‰å¾…ï¼›\n\u0026#34;async-1\u0026#34; #151 prio=5 os_prio=0 tid=0x00007f18001a1000 nid=0x94 waiting on condition [0x00007f17be9ea000] java.lang.Thread.State: WAITING (parking) at sun.misc.Unsafe.park(Native Method) - parking to wait for \u0026lt;0x00000000e176e988\u0026gt; (a java.util.concurrent.CompletableFuture$Signaller) \u0026#34;async-2\u0026#34; #152 prio=5 os_prio=0 tid=0x00007f18001a4800 nid=0x95 waiting on condition [0x00007f17be8e9000] java.lang.Thread.State: WAITING (parking) at sun.misc.Unsafe.park(Native Method) - parking to wait for \u0026lt;0x00000000e177c3c8\u0026gt; (a java.util.concurrent.CompletableFuture$Signaller) \u0026#34;async-3\u0026#34; #153 prio=5 os_prio=0 tid=0x00007f18001dc800 nid=0x96 waiting on condition [0x00007f17be7e8000] java.lang.Thread.State: WAITING (parking) at sun.misc.Unsafe.park(Native Method) - parking to wait for \u0026lt;0x00000000e1794a08\u0026gt; (a java.util.concurrent.CompletableFuture$Signaller) \u0026#34;async-4\u0026#34; #160 prio=5 os_prio=0 tid=0x00007f182002d800 nid=0x9d waiting on condition [0x00007f17be0e1000] java.lang.Thread.State: WAITING (parking) at sun.misc.Unsafe.park(Native Method) - parking to wait for \u0026lt;0x00000000e176e958\u0026gt; (a java.util.concurrent.CompletableFuture$Signaller) ä¸ºä»€ä¹ˆ Spring-Async-Pool çº¿ç¨‹æ± åªæœ‰ 4 ä¸ªçº¿ç¨‹ æŸ¥çœ‹ @EnablePooledAsync \u0026gt; AsyncAutoConfigurer \u0026gt; PooledAsyncProperties\n// é»˜è®¤é…ç½®å¦‚ä¸‹ // æ ¸å¿ƒçº¿ç¨‹æ± å¤§å° var corePoolSize: Int = Runtime.getRuntime().availableProcessors() // æœ€å¤§çº¿ç¨‹æ± å¤§å° var maxPoolSize: Int = Math.max(Runtime.getRuntime().availableProcessors() shl 2, 64) // é˜Ÿåˆ—å®¹é‡ var queueCapacity: Int = 500_00 è¿™ä¸ªè‡ªåŠ¨é…ç½®ç±»æ˜¯å¹³å°ç»„æä¾›çš„é€šç”¨ç»„ä»¶ï¼Œé»˜è®¤æ˜¯ä½¿ç”¨ CPU æ ¸æ•°ã€‚\nå·²çŸ¥æœåŠ¡å™¨é…ç½®ä¸º 4 æ ¸ï¼Œæ‰€ä»¥æ ¸å¿ƒçº¿ç¨‹æ± æ•°é‡ä¸º 4ã€‚\nğŸ¤”æ€è€ƒ 4 ä¸ªå¼‚æ­¥çº¿ç¨‹é˜Ÿåˆ—ç­‰å¾…ï¼ŒTomcat çš„ 200 ä¸ªçº¿ç¨‹ä¹Ÿåœ¨ç­‰å¾…ã€‚\nä¼šä¸ä¼šæ˜¯å¼‚æ­¥è°ƒç”¨ä¸­å‡ºç°å¾ªç¯ç­‰å¾…é€ æˆæ­»é”ï¼Ÿ ï¼ˆéœ€è¦çœ‹ä¸€ä¸‹è¿™æ¬¡ç‰ˆæœ¬ä¸Šçº¿æ–°å¢çš„å¼‚æ­¥è°ƒç”¨ä»£ç ï¼‰ æœ‰æ²¡æœ‰å¯èƒ½åœ¨å¼‚æ­¥è°ƒç”¨é€”ä¸­å‘ç”Ÿå¼‚å¸¸ï¼Ÿ å¯ä»¥æ ¹æ® Tomcat ä¸­å·²ç»é˜»å¡çš„çº¿ç¨‹çœ‹ä¸‹å…·ä½“æ˜¯å“ªäº›æ¥å£å¼•èµ·ï¼Ÿ æŸ¥çœ‹ä»£ç  æ–°ä¸Šçº¿çš„å¼‚æ­¥ä»£ç å«Œç–‘æœ€å¤§ï¼Œè¿™é‡Œå®šä½åˆ°ä¸€ä¸ªè°ƒç”¨å¼‚æ­¥æ–¹æ³•ï¼Œå·²åˆ é™¤ä¸šåŠ¡é€»è¾‘ï¼Œæå–å‡ºä»¥ä¸‹ä»£ç ç»“æ„ï¼š\n@GetMapping(\u0026#34;/test\u0026#34;) fun test() { val future = async { fetch(listOf(1,2,3)) } future.await() // #2 } fun fetch(ids: List\u0026lt;Long\u0026gt;): DTO { return async { doFetch() }.await() // #1 } ç®€å•è¯´ä¸€ä¸‹ä¸Šé¢ä»£ç çš„è°ƒç”¨ï¼Œasync å†…è°ƒç”¨ fetch() æ–¹æ³•ï¼Œè€Œé‡Œé¢åµŒå¥—äº†ä¸€ä¸ª async è°ƒç”¨ã€‚\nè¿™é‡Œè°ƒç”¨æ–¹å¯èƒ½å¹¶ä¸çŸ¥é“ fetch() å‡½æ•°é‡Œé¢å·²ç»å¼€å¯äº†ä¸€ä¸ªå¼‚æ­¥è°ƒç”¨ï¼Œå‡ºç°å¼‚æ­¥åµŒå¥—è°ƒç”¨çš„ç°è±¡ã€‚ ä¸‹é¢åˆ†æä¸€ä¸‹ã€Œå¼‚æ­¥å†…è°ƒç”¨å¼‚æ­¥ã€ä¸ºä»€ä¹ˆä¼šå‡ºç°ç›¸äº’ç­‰å¾…å¯¼è‡´çº¿ç¨‹æ­»é”ã€‚\nå·²çŸ¥å½“å‰å£°æ˜çš„ Async-Pool çº¿ç¨‹æ± çº¿ç¨‹æ•°ä¸º 4 ä¸ªï¼š\nå¹¶å‘è¯·æ±‚å‡ºç°ï¼ŒåŒæ—¶å‡ºç° 4ä¸ªä»¥ä¸Š #1 åœ¨ç­‰å¾… #1 å¤„äº§ç”Ÿçš„å¼‚æ­¥è°ƒç”¨è¿›å…¥ Asnyc-Pool-Queue ä¸­æ’é˜Ÿ #2 å¤„ç­‰å¾… #1 ä¸­çš„è¿”å› #1 åœ¨ç­‰å¾…å…¶å­ä»»åŠ¡ #2 åœ¨ç­‰å¾… #1 ä½†æ˜¯é˜Ÿä¸­ç­‰å¾…çš„åªæœ‰ #2ï¼Œ#1 çš„å­ä»»åŠ¡è¿˜åœ¨æ’é˜Ÿä¸­ å‡ºç°ç›¸äº’ç­‰å¾…çš„æƒ…å†µï¼Œå¯¼è‡´æ— é™ç­‰ä¸‹å»äº† è¿™é‡Œç®€å•æ¨¡æ‹Ÿäº†ä¸€ä¸‹å¼‚æ­¥é˜Ÿåˆ—é‡Œé¢çš„ä»»åŠ¡æƒ…å†µ 1. å½“å‰é˜Ÿåˆ—ä¸ºç©º \u0026gt; async-pool - [] \u0026gt; async-pool-queue - [] 2. ä¸€ä¸ªè¯·æ±‚è¿›æ¥ \u0026gt; async-pool - [#2, #1] \u0026gt; async-pool-queue - [] 3. å¤šä¸ªè¯·æ±‚é¡ºåºè¿›æ¥ - ç†æƒ³æƒ…å†µ \u0026gt; async-pool - [#2, #1, #2, #1] \u0026gt; async-pool-queue - [#2, #1] ---- ä»¥ä¸‹æ˜¯å¼‚å¸¸æƒ…å†µ 4. å½“å¤šä¸ªè¯·æ±‚å¹¶å‘è¿›æ¥ - å®é™…ä¸Š \u0026gt; async-pool - [#2, #2, #2, #2] \u0026gt; async-pool-queue - [#1, #1, #1, #1, #1] --\u0026gt; æ­¤å¤„è§¦å‘æ— é™ç­‰å¾… ç»“è®º å¼‚æ­¥é‡Œé¢åµŒå¥—å¼‚æ­¥çš„æƒ…å†µï¼Œå¦‚æœä¸¤ä¸ªå¼‚æ­¥ä½¿ç”¨åŒä¸€ä¸ªå¼‚æ­¥é˜Ÿåˆ—ï¼Œåœ¨å¹¶å‘æƒ…å†µä¸‹ä¼šå‡ºç°å¼‚æ­¥çº¿ç¨‹ç›¸äº’ç­‰å¾…å¯¼è‡´æ­»é”é—®é¢˜ã€‚\nè§£å†³æ–¹æ¡ˆï¼š\nä½¿ç”¨åŒä¸€ä¸ªçº¿ç¨‹æ± çš„å¼‚æ­¥çº¿ç¨‹ç¦æ­¢åµŒå¥—è°ƒç”¨ï¼› å¦‚æœéœ€è¦å¼‚æ­¥åµŒå¥—å¼‚æ­¥è°ƒç”¨ï¼Œä¸¤ä¸ªå¼‚æ­¥éœ€è¦æ‹¥æœ‰ä¸åŒçš„å¼‚æ­¥é˜Ÿåˆ—ã€‚ å‚è€ƒé“¾æ¥ Eclipse Eclipse MAT JStack IDEA Analyze Stacktrace ","permalink":"https://lexcao.io/zh/posts/async-within-async/","summary":"\u003ch1 id=\"èƒŒæ™¯\"\u003eèƒŒæ™¯\u003c/h1\u003e\n\u003cp\u003eæŸæ¬¡å‘ç‰ˆä¹‹åï¼Œçº¿ä¸ŠæœåŠ¡ä½æ¦‚ç‡å‡ºç°æŸå°å®ä¾‹æ¥å£å“åº”è¶…æ—¶ï¼Œå…·ä½“è¡¨ç°ä¸ºï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e/health\u003c/code\u003e æ¥å£è¶…æ—¶æŠ¥è­¦ï¼›\u003c/li\u003e\n\u003cli\u003eçº¿ç¨‹æ­»é”ï¼ŒTomcat çº¿ç¨‹æ± åƒæ»¡ï¼›\u003c/li\u003e\n\u003cli\u003eæœåŠ¡å®Œå…¨æ— å“åº”ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eä¿ç•™ä¸‹å½“å‰ heap dump å’Œ thread stack åï¼Œä¸´æ—¶é‡å¯æœåŠ¡å™¨æ¢å¤æ­£å¸¸ã€‚\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# heap dump\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ jmap -dump:format\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eb,file\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003edump.hprof \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003epid\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# thread stack\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ejstack \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003epid\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e \u0026gt; stack.txt\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eæ¥ä¸‹æ¥ç®€å•è®°å½•ä¸€ä¸‹æ’æŸ¥ç»“æœã€‚\n\u003cbr/\u003eï¼ˆæ­¤æ–‡ä¸ºå›å¿†æ‰€å†™ï¼Œå½“æ—¶æ’æŸ¥çš„æ€è€ƒç»†èŠ‚å’Œè¿‡ç¨‹å·²çœç•¥ï¼‰\u003c/p\u003e\n\u003ch1 id=\"æ’æŸ¥\"\u003eæ’æŸ¥\u003c/h1\u003e\n\u003ch2 id=\"heap-dump\"\u003eheap dump\u003c/h2\u003e\n\u003ch3 id=\"ä½¿ç”¨å·¥å…·\"\u003eä½¿ç”¨å·¥å…·\u003c/h3\u003e\n\u003cp\u003eEclipse + MAT\u003c/p\u003e\n\u003ch3 id=\"å®‰è£…\"\u003eå®‰è£…\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# å®‰è£… eclipse\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ brew cask install eclipse-java\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# å®‰è£… eclipse MAT\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ brew cask install mat \u003cspan style=\"color:#75715e\"\u003e# æ˜¯çš„ï¼Œè¿™ä¸ªå°±æ˜¯ eclipse-mat\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"ç›¸å…³è¿æ¥\"\u003eç›¸å…³è¿æ¥\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ca href=\"https://projects.eclipse.org/projects/eclipse\"\u003e\u003cem\u003e\u003cstrong\u003eEclipse\u003c/strong\u003e\u003c/em\u003e\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ca href=\"https://www.eclipse.org/mat/\"\u003e\u003cem\u003e\u003cstrong\u003eEclipse MAT\u003c/strong\u003e\u003c/em\u003e\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"ä½¿ç”¨\"\u003eä½¿ç”¨\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eæŠŠ \u003ccode\u003eheap dump\u003c/code\u003e æ–‡ä»¶ \u003ccode\u003edump.hprof\u003c/code\u003e å¯¼å…¥åˆ° MATã€‚\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eå‘ç°æœ‰ä¸€ä¸ªåç§°ä¸º \u003ccode\u003eSpring-Async-Scheduler\u003c/code\u003e å¼‚æ­¥é˜Ÿåˆ—å ç”¨ç‰¹åˆ«å¤§ã€‚ã€TODO å›¾ç‰‡ã€‘\u003c/p\u003e","title":"ä¸€æ¬¡çº¿ç¨‹æ­»é”æ’æŸ¥è®°å½•"},{"content":"Reactive Streams Reactive Streams åœ¨ Netflix ã€Pivotal å’Œ Lightbend å·¥ç¨‹å¸ˆäº 2013 å¹´åº•å‘èµ·è¿™é¡¹è®¡åˆ’ã€‚\nReactive Streams æ˜¯ä¸€é¡¹æè®®ï¼Œä¸ºæ— é˜»å¡èƒŒå‹çš„å¼‚æ­¥æµæä¾›ä¸€ä¸ªæ ‡å‡†ã€‚è¿™åŒ…æ‹¬é’ˆå¯¹è¿è¡Œæ—¶ç¯å¢ƒï¼ˆJVM å’Œ JavaScriptï¼‰ä»¥åŠç½‘ç»œåè®®ä¸Šçš„å·¥ä½œã€‚\nä½ å¯ä»¥åœ¨ Reactive Streams å®˜ç½‘ç½‘ç«™é˜…è¯»è¿™ä¸ªåŸå§‹è§„èŒƒã€‚\nä½ ä¹Ÿå¯ä»¥åœ¨ è¿™é‡Œ é˜…è¯»å®ƒçš„ä¸­æ–‡ç¿»è¯‘ã€‚\næ— é˜»å¡èƒŒå‹çš„å¼‚æ­¥æµå¤„ç† Reactive Streams ç”±ä»¥ä¸‹ç»„æˆï¼š\nå¼‚æ­¥ï¼› æµå¼ï¼› æ— é˜»å¡ï¼› èƒŒå‹ï¼ˆå›å‹ï¼‰ã€‚ ä»¥ä¸‹æ˜¯ Java æ¥å£ï¼Œä½ å¯ä»¥åœ¨ GitHub é˜…è¯»æ›´è¯¦ç»†å†…å®¹ã€‚\npublic interface Publisher\u0026lt;T\u0026gt; { public void subscribe(Subscriber\u0026lt;? super T\u0026gt; s); } public interface Subscriber\u0026lt;T\u0026gt; { public void onSubscribe(Subscription s); public void onNext(T t); public void onError(Throwable t); public void onComplete(); } public interface Subscription { public void request(long n); public void cancel(); } public interface Processor\u0026lt;T, R\u0026gt; extends Subscriber\u0026lt;T\u0026gt;, Publisher\u0026lt;R\u0026gt; { } Reactive Extensions ç”¨äºå¯è§‚å¯Ÿæµçš„å¼‚æ­¥ç¼–ç¨‹ APIã€‚\nReactiveX æ˜¯æ¥è‡ªè§‚å¯Ÿè€…æ¨¡å¼ã€è¿­ä»£å™¨æ¨¡å¼ä»¥åŠå‡½æ•°å¼ç¼–ç¨‹çš„æœ€ä½³åˆ›æ„ç»„åˆã€‚\n\u0026ndash; Reactive Extensions\nProject Reactor Reactor æ˜¯ç¬¬å››ä»£ Reactive å‡½æ•°åº“ï¼ŒåŸºäº Reactive Streams è§„èŒƒ åœ¨ JVM ä¸Šæ„å»ºæ— é˜»å¡åº”ç”¨ã€‚\nå¯ç»„åˆæ€§å’Œå¯è¯»æ€§ ä»¥ä¸°å¯Œçš„æ“ä½œç¬¦æ–¹æ³•æ“ä½œæ•°æ®æµ è®¢é˜…ä¹‹å‰æ²¡æœ‰ä»»ä½•ååº” èƒŒå‹æˆ–è€…æ¶ˆè´¹è€…å…·æœ‰é€šçŸ¥ç”Ÿäº§è€…ç”Ÿäº§é€Ÿç‡è¿‡é«˜èƒ½åŠ› å¹¶å‘ä¸Šçš„é«˜çº§æŠ½è±¡ \u0026ndash; From Imperative to Reactive Programming\nåŠŸèƒ½ï¼š\nå®Œå…¨æ— é˜»å¡ï¼› é›†æˆ Java APIï¼š Completable Future Stream Duration Flux å’Œ Mono Fluxï¼šä¸€ä¸ª Reactive Streams å‘å¸ƒè€…ï¼Œå…·æœ‰ rx æ“ä½œç¬¦ï¼Œå®ƒå‘å‡º 0 åˆ° N ä¸ªå…ƒç´ ï¼Œç„¶åå®Œæˆã€‚ Monoï¼šä¸€ä¸ª Reactive Streams å‘å¸ƒè€…ï¼Œå…·æœ‰ rx æ“ä½œç¬¦ï¼Œå‘å‡º ä¸€ä¸ª å…ƒç´ æˆåŠŸå®Œæˆï¼Œæˆ–è€…ä¸€ä¸ªå¼‚å¸¸ã€‚ å®ç°äº† Reactive Streams è§„èŒƒã€‚ ä½ å¯ä»¥åœ¨ GitHub é˜…è¯»æ›´å¤šç»†èŠ‚ã€‚\nå½“ç„¶ï¼Œä½ å¯ä»¥æ ¹æ®è¿™ä¸ª å¿«é€Ÿä¸Šæ‰‹ Rx API æ¥å­¦ä¹ åŸºç¡€çš„æ¥å£ã€‚\nè¿™é‡Œæœ‰ä¸ª å¸®åŠ©ä½ å¦‚ä½•é€‰æ‹©æ“ä½œç¬¦\nReactor Netty Reactor Netty åŸºäº Netty æ¡†æ¶ï¼Œæä¾›æ— é˜»å¡å’ŒèƒŒå‹å°±ç»ªçš„ TCP/HTTP/UDP å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ã€‚\n\u0026ndash; Reactor Netty\nSpring Reactor WebFlux Reactive æŠ€æœ¯æ ˆçš„ç½‘ç»œæ¡†æ¶ï¼ŒSpring WebFluxï¼Œåœ¨ 5.0ç‰ˆæœ¬åæœŸåŠ å…¥ã€‚å®ƒæ˜¯å®Œå…¨æ— é˜»å¡ï¼Œæ”¯æŒ Reactive Streams èƒŒå‹ï¼Œå¹¶ä¸”åœ¨ Nettyã€Undertow ä»¥åŠ Servlet .3.1+ ç­‰æœåŠ¡å™¨ä¸Šè¿è¡Œã€‚\n\u0026ndash; Spring WebFlux\nRSocket åŸºäº Reactive Sreams èƒŒå‹çš„ä¸€ä¸ªäºŒè¿›åˆ¶åè®®\nåŠŸèƒ½ï¼š\nåŒå‘çš„ å¤šè·¯å¤ç”¨ åŸºäºæ¶ˆæ¯ï¼ˆmessage drivenï¼‰ äºŒè¿›åˆ¶åè®® äº¤äº’æ¨¡å‹ï¼š\nè¯·æ±‚-å“åº”ï¼ˆ 1 å¯¹ 1 ï¼‰ å‘é€ - å¿˜å´ ï¼ˆ 1 å¯¹ 0 UDPï¼‰ è¯·æ±‚ - æµå¼ï¼ˆ 1 å¯¹å¤šï¼Œå‘å¸ƒ / è®¢é˜…ï¼‰ è¯·æ±‚ - é€šé“ ï¼ˆå¤šå¯¹å¤šï¼‰ é€šä¿¡åè®®\nWebSocket TCP UDP æ€»ç»“ Reactive Streams æ˜¯ä¸€ä¸ªè§„èŒƒã€‚\nProject Reactor æ˜¯åŸºäºè§„èŒƒçš„ JVM å®ç°ã€‚\nSpring WebFlux æ˜¯ Spring æ¡†æ¶é›†æˆ Project Reactorã€‚\nRSocket æ˜¯åŸºäºè§„èŒƒäºŒè¿›åˆ¶åè®®å®ç°ã€‚\nå‚è€ƒé“¾æ¥ Reactive Streams Reactive Streams JVM Reactive Extensions Project Reactor Reactor Core å¿«é€Ÿä¸Šæ‰‹ Rx API å¸®åŠ©ä½ å¦‚ä½•é€‰æ‹©æ“ä½œç¬¦ Reactor Netty Spring WebFlux ","permalink":"https://lexcao.io/zh/posts/reactive-overview/","summary":"\u003ch1 id=\"reactive-streams\"\u003eReactive Streams\u003c/h1\u003e\n\u003cp\u003eReactive Streams åœ¨ \u003ca href=\"https://en.wikipedia.org/wiki/Netflix\"\u003e\u003cem\u003eNetflix\u003c/em\u003e\u003c/a\u003e ã€\u003ca href=\"https://en.wikipedia.org/wiki/Pivotal_Software\"\u003e\u003cem\u003ePivotal\u003c/em\u003e\u003c/a\u003e å’Œ \u003ca href=\"https://en.wikipedia.org/wiki/Lightbend\"\u003e\u003cem\u003eLightbend\u003c/em\u003e\u003c/a\u003e å·¥ç¨‹å¸ˆäº 2013 å¹´åº•å‘èµ·è¿™é¡¹è®¡åˆ’ã€‚\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eReactive Streams æ˜¯ä¸€é¡¹æè®®ï¼Œä¸ºæ— é˜»å¡èƒŒå‹çš„å¼‚æ­¥æµæä¾›ä¸€ä¸ªæ ‡å‡†ã€‚è¿™åŒ…æ‹¬é’ˆå¯¹è¿è¡Œæ—¶ç¯å¢ƒï¼ˆJVM å’Œ JavaScriptï¼‰ä»¥åŠç½‘ç»œåè®®ä¸Šçš„å·¥ä½œã€‚\u003c/p\u003e\u003c/blockquote\u003e\n\u003cp\u003eä½ å¯ä»¥åœ¨ \u003ca href=\"https://www.reactive-streams.org/\"\u003e\u003cem\u003eReactive Streams\u003c/em\u003e\u003c/a\u003e å®˜ç½‘ç½‘ç«™é˜…è¯»è¿™ä¸ªåŸå§‹è§„èŒƒã€‚\u003c/p\u003e\n\u003cp\u003eä½ ä¹Ÿå¯ä»¥åœ¨ \u003ca href=\"https://lexcao.github.io/zh/posts/reactive-streams\"\u003e\u003cem\u003eè¿™é‡Œ\u003c/em\u003e\u003c/a\u003e é˜…è¯»å®ƒçš„ä¸­æ–‡ç¿»è¯‘ã€‚\u003c/p\u003e\n\u003ch5 id=\"æ— é˜»å¡èƒŒå‹çš„å¼‚æ­¥æµå¤„ç†\"\u003e\u003cstrong\u003eæ— é˜»å¡èƒŒå‹çš„å¼‚æ­¥æµå¤„ç†\u003c/strong\u003e\u003c/h5\u003e\n\u003cp\u003eReactive Streams ç”±ä»¥ä¸‹ç»„æˆï¼š\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eå¼‚æ­¥ï¼›\u003c/li\u003e\n\u003cli\u003eæµå¼ï¼›\u003c/li\u003e\n\u003cli\u003eæ— é˜»å¡ï¼›\u003c/li\u003e\n\u003cli\u003eèƒŒå‹ï¼ˆå›å‹ï¼‰ã€‚\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eä»¥ä¸‹æ˜¯ Java æ¥å£ï¼Œä½ å¯ä»¥åœ¨ \u003ca href=\"https://github.com/reactive-streams/reactive-streams-jvm\"\u003e\u003cem\u003eGitHub\u003c/em\u003e\u003c/a\u003e é˜…è¯»æ›´è¯¦ç»†å†…å®¹ã€‚\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einterface\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ePublisher\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003eT\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003evoid\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003esubscribe\u003c/span\u003e(Subscriber\u003cspan style=\"color:#f92672\"\u003e\u0026lt;?\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003esuper\u003c/span\u003e T\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e s);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einterface\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eSubscriber\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003eT\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003evoid\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eonSubscribe\u003c/span\u003e(Subscription s);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003evoid\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eonNext\u003c/span\u003e(T t);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003evoid\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eonError\u003c/span\u003e(Throwable t);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003evoid\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eonComplete\u003c/span\u003e();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einterface\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eSubscription\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003evoid\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003erequest\u003c/span\u003e(\u003cspan style=\"color:#66d9ef\"\u003elong\u003c/span\u003e n);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003evoid\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ecancel\u003c/span\u003e();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einterface\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eProcessor\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003eT, R\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eextends\u003c/span\u003e Subscriber\u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003eT\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e, Publisher\u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003eR\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch1 id=\"reactive-extensions\"\u003eReactive Extensions\u003c/h1\u003e\n\u003cblockquote\u003e\n\u003cp\u003eç”¨äºå¯è§‚å¯Ÿæµçš„å¼‚æ­¥ç¼–ç¨‹ APIã€‚\u003c/p\u003e\n\u003cp\u003eReactiveX æ˜¯æ¥è‡ªè§‚å¯Ÿè€…æ¨¡å¼ã€è¿­ä»£å™¨æ¨¡å¼ä»¥åŠå‡½æ•°å¼ç¼–ç¨‹çš„æœ€ä½³åˆ›æ„ç»„åˆã€‚\u003c/p\u003e","title":"Reactive æ¦‚è§ˆ"},{"content":"ç¿»è¯‘è‡ª Reactive Streams\nReactive Streams æ³¨ï¼šReactive Streams ç›´è¯‘ä¸ºå“åº”å¼æµï¼Œè¿™é‡Œä¿ç•™è‹±æ–‡åŸè¯ã€‚\nReactive Streams æ˜¯ä¸€é¡¹æè®®ï¼Œæ—¨åœ¨ä¸ºå…·æœ‰æ— é˜»å¡èƒŒå‹çš„å¼‚æ­¥å¤„ç†æµæä¾›æ ‡å‡†ã€‚è¿™åŒ…æ‹¬é’ˆå¯¹è¿è¡Œç¯å¢ƒï¼ˆJVM å’Œ JavaScriptï¼‰ä»¥åŠç½‘ç»œåè®®çš„åŠªåŠ›ã€‚\nReactive Streams æ˜¯ä¸ºäº†æä¾›ä¸€ä¸ªæ— é˜»å¡èƒŒå‹å¼‚æ­¥æµå¼å¤„ç†çš„æ ‡å‡†çš„ä¸€ä¸ªæè®®ã€‚\nJDK9 java.util.concurrent.Flow åœ¨ JDK 9 çš„ java.util.concurrent.Flow ä¸­å¯ç”¨çš„æ¥å£ï¼Œåˆ†åˆ«ä¸º 1 ï¼š1 è¯­ä¹‰ä¸Šå„è‡ªå¯¹åº”äº Reactive Streamsã€‚è¿™æ„å‘³ç€å°†ä¼šæœ‰ä¸€ä¸ªè¿ç§»æœŸï¼Œåº“ï¼ˆLibrariesï¼‰å°†é‡‡ç”¨ JDK ä¸­çš„æ–°ç±»å‹ï¼Œä½†æ˜¯ç”±äºåº“çš„å®Œå…¨è¯­ä¹‰ç­‰æ•ˆä»¥åŠ Reactive Streams \u0026lt;-\u0026gt; Flow é€‚é…å™¨åº“å’Œç›´æ¥ä¸ JDK Flow ç±»å‹å…¼å®¹çš„ TCKï¼Œå› æ­¤è¿™ä¸ªè¿ç§»æœŸé¢„è®¡ä¼šå¾ˆçŸ­ã€‚\nå¦‚æœä½ æœ‰å…´è¶£äº†è§£æœ‰å…³ JVM Reactive Streamsï¼Œè¯·é˜…è¯»æ­¤ æ–‡ç« \né—®é¢˜ åœ¨å¼‚æ­¥ç³»ç»Ÿä¸­ï¼Œå¤„ç†æµæ•°æ®ï¼ˆå°¤å…¶æ˜¯æ•°é‡æœªå…ˆç¡®å®šçš„çš„â€œå®æ—¶â€æ•°æ®ï¼‰éœ€è¦ç‰¹åˆ«æ³¨æ„ã€‚æœ€çªå‡ºçš„é—®é¢˜æ˜¯ï¼Œéœ€è¦æ§åˆ¶èµ„æºæ¶ˆè€—ï¼Œè¿™æ ·å¿«é€Ÿæ•°æ®æºä¸ä¼šå‹å®æµç›®çš„åœ°ã€‚ä¸ºäº†åœ¨å¹¶è¡Œç½‘ç»œä¸»æœºæˆ–ä¸€å°å¤šæ ¸æœºå™¨ä¸Šå¹¶è¡Œåœ°ä½¿ç”¨è®¡ç®—èµ„æºï¼Œéœ€è¦å¼‚æ­¥ã€‚\nReactive Streams çš„ä¸»è¦ç›®æ ‡æ˜¯ç®¡ç†è·¨å¼‚æ­¥è¾¹ç•Œçš„æµæ•°æ®äº¤æ¢ï¼ˆè€ƒè™‘å°†å…ƒç´ ä¼ é€’åˆ°å¦ä¸€ä¸ªçº¿ç¨‹æˆ–çº¿ç¨‹æ± ï¼‰ï¼ŒåŒæ—¶ç¡®ä¿æ¥æ”¶æ–¹ä¸å¼ºåˆ¶ç¼“å­˜ä»»æ„æ•°é‡çš„æ•°æ®ã€‚æ¢å¥è¯è¯´ï¼ŒèƒŒå‹æ˜¯æ­¤æ¨¡å‹ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ï¼Œä»¥ä½¿åœ¨çº¿ç¨‹ä¹‹é—´è¿›è¡Œè°ƒèŠ‚çš„é˜Ÿåˆ—æ”¶åˆ°é™åˆ¶ã€‚å¦‚æœèƒŒå‹çš„é€šä¿¡æ˜¯åŒæ­¥çš„ï¼Œåˆ™å¼‚æ­¥å¤„ç†çš„å¥½å¤„å°†è¢«æŠµæ¶ˆï¼ˆå¦è¯·çœ‹ Reactive Manifestoï¼‰ï¼Œå› æ­¤å¿…é¡»æ³¨æ„å¯¹ Reactive Streams å®ç°çš„æ‰€æœ‰æ–¹é¢è¿›è¡Œå®Œå…¨æ— é˜»å¡å’Œå¼‚æ­¥è¡Œä¸ºæˆæƒã€‚\næœ¬è¯´æ˜ä¹¦æ—¨åœ¨å…è®¸åˆ›å»ºè®¸å¤šç¬¦åˆè¦æ±‚çš„å®ç°ï¼Œè¿™äº›å®ç°é€šè¿‡éµå®ˆè§„åˆ™å°†èƒ½å¤Ÿå¹³æ»‘åœ°äº’ç›¸æ“ä½œï¼Œå¹¶åœ¨æµåº”ç”¨ç¨‹åºçš„æ•´ä¸ªå¤„ç†å›¾ä¸­ä¿ç•™ä¸Šè¿°å¥½å¤„å’Œç‰¹æ€§ã€‚\nèŒƒå›´ Reactive Streams çš„èŒƒå›´æ˜¯æ‰¾æ¥å£ã€æ–¹æ³•å’Œåè®®çš„æœ€å°é›†ï¼Œè¿™äº›æ¥å£ã€æ–¹æ³•å’Œåè®®å°†æè¿°å®ç°ç›®æ ‡â€”â€”æ— é˜»å¡èƒŒå‹çš„å¼‚æ­¥å¤„ç†æµï¼Œæ‰€éœ€è¦çš„æ“ä½œå’Œå®ä½“ã€‚\nç«¯ç”¨æˆ· DSLsï¼ˆé¢†åŸŸç‰¹å®šè¯­è¨€ï¼‰æˆ–è€…åè®®ç»‘å®š APIï¼ˆåº”ç”¨ç¼–ç¨‹æ¥å£ï¼‰æœ‰ç›®çš„åœ°è¢«æ’é™¤åœ¨èŒƒå›´ä¹‹å¤–ï¼Œä»¥é¼“åŠ±å’Œæ”¯æŒå¯èƒ½ä½¿ç”¨ä¸åŒç¼–ç¨‹è¯­è¨€çš„ä¸åŒå®ç°ï¼Œä»¥å°½å¯èƒ½åœ°éµå¾ªå…¶å¹³å°çš„ä¹ æƒ¯ç”¨æ³•ã€‚\næˆ‘ä»¬é¢„è®¡ï¼Œæ¥å—è¿™ä¸ª Reactive Streams è§„èŒƒä»¥åŠå®ƒçš„å®ç°ç»éªŒå°†å…±åŒå¯¼å‘å¹¿æ³›çš„é›†æˆï¼Œä¾‹å¦‚ï¼ŒåŒ…æ‹¬å°†æ¥ JDK ç‰ˆæœ¬ä¸­çš„ Java å¹³å°æ”¯æŒæˆ–è€…åœ¨å°†æ¥çš„ç½‘é¡µæµè§ˆå™¨ä¸­ç½‘ç»œåè®®çš„æ”¯æŒã€‚\nå·¥ä½œç»„ åŸºæœ¬å«ä¹‰ åŸºæœ¬å«ä¹‰å®šä¹‰äº†å¦‚ä½•é€šè¿‡èƒŒå‹æ¥è°ƒèŠ‚æµä¸­å…ƒç´ çš„ä¼ è¾“ã€‚å…ƒç´ çš„ä¼ è¾“æ–¹å¼ï¼Œä¼ è¾“è¿‡ç¨‹ä¸­çš„è¡¨ç°å½¢å¼æˆ–è€…èƒŒå‹çš„ä¿¡å·å‘é€æ–¹å¼å‡ä¸å±äºæœ¬è§„èŒƒçš„ä¸€éƒ¨åˆ†ã€‚\nJVM æ¥å£ï¼ˆå·²å®Œæˆï¼‰ å·¥ä½œç»„å°†åŸºæœ¬è¯­ä¹‰åº”ç”¨äºä¸€ç»„ç¼–ç¨‹æ¥å£ï¼Œè¿™äº›ç¼–ç¨‹æ¥å£çš„ä¸»è¦ç›®çš„æ˜¯å…è®¸ä½¿ç”¨å…±äº«å†…å­˜å †åœ¨ JVM å†…çš„å¯¹è±¡å’Œçº¿ç¨‹ä¹‹é—´ä¼ é€’æµï¼Œä»è€Œå®ç°ä¸åŒä¸€è‡´æ€§çš„å®ç°å’Œè¯­è¨€ç»‘å®šçš„äº’æ“ä½œã€‚\nåœ¨ 2019 å¹´ 8 æœˆ 23 æ—¥ï¼Œæˆ‘ä»¬å‘å¸ƒäº†é’ˆå¯¹ JVM çš„ Reactive Streams 1.0.3 ç‰ˆæœ¬ï¼ŒåŒ…å«äº† Java APIï¼Œ ä¸€ä¸ªæ–‡æœ¬ è¯´æ˜, ä¸€ä¸ª TCK å’Œ å®ç°ç¤ºä¾‹.\n1.0.3 çš„æ–°åŠŸèƒ½æ˜¯ä¸» jar ä¸­åŒ…å« JDK 9ï¼ˆé€‚é…å™¨åº“ï¼‰ã€‚Maven Central ä¸Šæä¾›äº†ç›¸åº”çš„ä»£ç åº“ï¼š\n\u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.reactivestreams\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;reactive-streams\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;1.0.3\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.reactivestreams\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;reactive-streams-tck\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;1.0.3\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.reactivestreams\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;reactive-streams-tck-flow\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;1.0.3\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.reactivestreams\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;reactive-streams-examples\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;1.0.3\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; è¿™äº›ä»£ç çš„æºç åœ¨ GitHubã€‚è¯·ä½¿ç”¨ GitHub Issues æ¥æä¾›åé¦ˆã€‚\næ‰€æœ‰çš„åº“å’Œè¯´æ˜éƒ½åœ¨ çŸ¥è¯†å…±äº«é›¶ ä¸‹å‘å¸ƒåˆ°äº†å…¬å…±é¢†åŸŸã€‚\nåœ¨ è¿™é‡Œ é˜…è¯»æ›´å¤šæœ‰å…³ Reactive Streams 1.0.3 ç›¸å…³å†…å®¹ã€‚\nå®ç°é¡»çŸ¥ ä¸ºäº†ç€æ‰‹å®ç°æœ€ç»ˆè§„èŒƒï¼Œå»ºè®®å…ˆé˜…è¯» README å’Œè¿™ä¸ª Java API æ–‡æ¡£ï¼Œç„¶åçœ‹ä¸€ä¸‹è¿™ä¸ª è§„èŒƒï¼Œå†çœ‹ä¸€ä¸‹è¿™ä¸ª TCK ä»¥åŠ ç¤ºä¾‹å®ç°ã€‚å¦‚æœä½ å¯¹ä»¥ä¸Šæœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·å…ˆçœ‹ä¸€ä¸‹ å…³é—­çš„é—®é¢˜ï¼Œå¦‚æœå°šæœªè§£å†³ï¼Œè¯·æ‰“å¼€ä¸€ä¸ª æ–°çš„é—®é¢˜ã€‚\nè¿™é¡¹å·¥ä½œæ˜¯åœ¨ reactive-streams-jvm ä»“åº“æ‰§è¡Œçš„ã€‚\nJavaScript æ¥å£ è¿™ä¸ªå·¥ä½œç»„å®šä¹‰äº†ä¸€ç»„æœ€å°çš„å¯¹è±¡å±æ€§ï¼Œç”¨äºè§‚å¯Ÿ JavaScript è¿è¡Œç¯å¢ƒä¸­çš„æµå…ƒç´ ã€‚ç›®çš„æ˜¯æä¾›ä¸€ä¸ªå¯æµ‹è¯•çš„è§„èŒƒï¼Œè¯¥è§„èŒƒå…è®¸ä¸åŒå®ç°åœ¨åŒä¸€ä¸ªè¿è¡Œç¯å¢ƒè¿›è¡Œäº’æ“ä½œã€‚\nè¿™é¡¹å·¥ä½œæ˜¯åœ¨ reactive-streams-js ä»“åº“æ‰§è¡Œçš„ã€‚\nç½‘è·¯åè®® è¯¥å·¥ä½œç»„å®šä¹‰äº†ç”¨äºåœ¨å„ç§ä¼ è¾“ä»‹è´¨ä¸Šä¼ é€’ Reactive Streamsï¼Œå…¶ä¸­æ¶‰åŠåˆ°å…ƒç´ çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚æ­¤ç±»ä¼ è¾“åª’ä»‹ä¾‹å¦‚ TCPï¼ŒUDPï¼ŒHTTP å’Œ WebSocketsã€‚\nè¿™é¡¹å·¥ä½œæ˜¯åœ¨ reactive-streams-io ä»“åº“æ‰§è¡Œçš„ã€‚\n","permalink":"https://lexcao.io/zh/posts/reactive-streams/","summary":"\u003cp\u003eç¿»è¯‘è‡ª \u003ca href=\"https://www.reactive-streams.org/\"\u003e\u003cem\u003eReactive Streams\u003c/em\u003e\u003c/a\u003e\u003c/p\u003e\n\u003ch1 id=\"reactive-streams\"\u003eReactive Streams\u003c/h1\u003e\n\u003cblockquote\u003e\n\u003cp\u003eæ³¨ï¼šReactive Streams ç›´è¯‘ä¸ºå“åº”å¼æµï¼Œè¿™é‡Œä¿ç•™è‹±æ–‡åŸè¯ã€‚\u003c/p\u003e\u003c/blockquote\u003e\n\u003cp\u003e\u003cem\u003eReactive Streams\u003c/em\u003e æ˜¯ä¸€é¡¹æè®®ï¼Œæ—¨åœ¨ä¸ºå…·æœ‰\u003cstrong\u003eæ— é˜»å¡èƒŒå‹çš„å¼‚æ­¥å¤„ç†æµ\u003c/strong\u003eæä¾›æ ‡å‡†ã€‚è¿™åŒ…æ‹¬é’ˆå¯¹è¿è¡Œç¯å¢ƒï¼ˆJVM å’Œ JavaScriptï¼‰ä»¥åŠç½‘ç»œåè®®çš„åŠªåŠ›ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eReactive Streams\u003c/em\u003e æ˜¯ä¸ºäº†æä¾›ä¸€ä¸ª\u003cstrong\u003eæ— é˜»å¡èƒŒå‹å¼‚æ­¥æµå¼å¤„ç†çš„æ ‡å‡†çš„ä¸€ä¸ªæè®®\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003ch2 id=\"jdk9-javautilconcurrentflow\"\u003eJDK9 java.util.concurrent.Flow\u003c/h2\u003e\n\u003cp\u003eåœ¨ JDK 9 çš„ \u003ca href=\"https://docs.oracle.com/javase/9/docs/api/java/util/concurrent/Flow.html\"\u003e\u003cem\u003ejava.util.concurrent.Flow\u003c/em\u003e\u003c/a\u003e ä¸­å¯ç”¨çš„æ¥å£ï¼Œåˆ†åˆ«ä¸º 1 ï¼š1 è¯­ä¹‰ä¸Šå„è‡ªå¯¹åº”äº Reactive Streamsã€‚è¿™æ„å‘³ç€å°†ä¼šæœ‰ä¸€ä¸ªè¿ç§»æœŸï¼Œåº“ï¼ˆLibrariesï¼‰å°†é‡‡ç”¨ JDK ä¸­çš„æ–°ç±»å‹ï¼Œä½†æ˜¯ç”±äºåº“çš„å®Œå…¨è¯­ä¹‰ç­‰æ•ˆä»¥åŠ \u003ccode\u003eReactive Streams \u0026lt;-\u0026gt; Flow\u003c/code\u003e é€‚é…å™¨åº“å’Œç›´æ¥ä¸ JDK Flow ç±»å‹å…¼å®¹çš„ TCKï¼Œå› æ­¤è¿™ä¸ªè¿ç§»æœŸé¢„è®¡ä¼šå¾ˆçŸ­ã€‚\u003c/p\u003e\n\u003cp\u003eå¦‚æœä½ æœ‰å…´è¶£äº†è§£æœ‰å…³ \u003cem\u003eJVM Reactive Streams\u003c/em\u003eï¼Œè¯·é˜…è¯»æ­¤ \u003ca href=\"https://github.com/reactive-streams/reactive-streams-jvm/blob/v1.0.3/README.md\"\u003e\u003cem\u003eæ–‡ç« \u003c/em\u003e\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"é—®é¢˜\"\u003eé—®é¢˜\u003c/h2\u003e\n\u003cp\u003eåœ¨å¼‚æ­¥ç³»ç»Ÿä¸­ï¼Œå¤„ç†æµæ•°æ®ï¼ˆå°¤å…¶æ˜¯æ•°é‡æœªå…ˆç¡®å®šçš„çš„â€œå®æ—¶â€æ•°æ®ï¼‰éœ€è¦ç‰¹åˆ«æ³¨æ„ã€‚æœ€çªå‡ºçš„é—®é¢˜æ˜¯ï¼Œéœ€è¦æ§åˆ¶èµ„æºæ¶ˆè€—ï¼Œè¿™æ ·å¿«é€Ÿæ•°æ®æºä¸ä¼šå‹å®æµç›®çš„åœ°ã€‚ä¸ºäº†åœ¨å¹¶è¡Œç½‘ç»œä¸»æœºæˆ–ä¸€å°å¤šæ ¸æœºå™¨ä¸Šå¹¶è¡Œåœ°ä½¿ç”¨è®¡ç®—èµ„æºï¼Œéœ€è¦å¼‚æ­¥ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eReactive Streams\u003c/em\u003e çš„ä¸»è¦ç›®æ ‡æ˜¯ç®¡ç†è·¨å¼‚æ­¥è¾¹ç•Œçš„æµæ•°æ®äº¤æ¢ï¼ˆè€ƒè™‘å°†å…ƒç´ ä¼ é€’åˆ°å¦ä¸€ä¸ªçº¿ç¨‹æˆ–çº¿ç¨‹æ± ï¼‰ï¼ŒåŒæ—¶ç¡®ä¿æ¥æ”¶æ–¹ä¸å¼ºåˆ¶ç¼“å­˜ä»»æ„æ•°é‡çš„æ•°æ®ã€‚æ¢å¥è¯è¯´ï¼Œ\u003cstrong\u003eèƒŒå‹\u003c/strong\u003eæ˜¯æ­¤æ¨¡å‹ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ï¼Œä»¥ä½¿åœ¨çº¿ç¨‹ä¹‹é—´è¿›è¡Œè°ƒèŠ‚çš„é˜Ÿåˆ—æ”¶åˆ°é™åˆ¶ã€‚å¦‚æœèƒŒå‹çš„é€šä¿¡æ˜¯åŒæ­¥çš„ï¼Œåˆ™å¼‚æ­¥å¤„ç†çš„å¥½å¤„å°†è¢«æŠµæ¶ˆï¼ˆå¦è¯·çœ‹  \u003ca href=\"http://reactivemanifesto.org/\"\u003e\u003cem\u003eReactive Manifesto\u003c/em\u003e\u003c/a\u003eï¼‰ï¼Œå› æ­¤å¿…é¡»æ³¨æ„å¯¹ Reactive Streams å®ç°çš„æ‰€æœ‰æ–¹é¢è¿›è¡Œå®Œå…¨æ— é˜»å¡å’Œå¼‚æ­¥è¡Œä¸ºæˆæƒã€‚\u003c/p\u003e\n\u003cp\u003eæœ¬è¯´æ˜ä¹¦æ—¨åœ¨å…è®¸åˆ›å»ºè®¸å¤šç¬¦åˆè¦æ±‚çš„å®ç°ï¼Œè¿™äº›å®ç°é€šè¿‡éµå®ˆè§„åˆ™å°†èƒ½å¤Ÿå¹³æ»‘åœ°äº’ç›¸æ“ä½œï¼Œå¹¶åœ¨æµåº”ç”¨ç¨‹åºçš„æ•´ä¸ªå¤„ç†å›¾ä¸­ä¿ç•™ä¸Šè¿°å¥½å¤„å’Œç‰¹æ€§ã€‚\u003c/p\u003e\n\u003ch2 id=\"èŒƒå›´\"\u003eèŒƒå›´\u003c/h2\u003e\n\u003cp\u003e\u003cem\u003eReactive Streams\u003c/em\u003e çš„èŒƒå›´æ˜¯æ‰¾æ¥å£ã€æ–¹æ³•å’Œåè®®çš„æœ€å°é›†ï¼Œè¿™äº›æ¥å£ã€æ–¹æ³•å’Œåè®®å°†æè¿°å®ç°ç›®æ ‡â€”â€”æ— é˜»å¡èƒŒå‹çš„å¼‚æ­¥å¤„ç†æµï¼Œæ‰€éœ€è¦çš„æ“ä½œå’Œå®ä½“ã€‚\u003c/p\u003e\n\u003cp\u003eç«¯ç”¨æˆ· DSLsï¼ˆé¢†åŸŸç‰¹å®šè¯­è¨€ï¼‰æˆ–è€…åè®®ç»‘å®š APIï¼ˆåº”ç”¨ç¼–ç¨‹æ¥å£ï¼‰æœ‰ç›®çš„åœ°è¢«æ’é™¤åœ¨èŒƒå›´ä¹‹å¤–ï¼Œä»¥é¼“åŠ±å’Œæ”¯æŒå¯èƒ½ä½¿ç”¨ä¸åŒç¼–ç¨‹è¯­è¨€çš„ä¸åŒå®ç°ï¼Œä»¥å°½å¯èƒ½åœ°éµå¾ªå…¶å¹³å°çš„ä¹ æƒ¯ç”¨æ³•ã€‚\u003c/p\u003e\n\u003cp\u003eæˆ‘ä»¬é¢„è®¡ï¼Œæ¥å—è¿™ä¸ª \u003cem\u003eReactive Streams\u003c/em\u003e è§„èŒƒä»¥åŠå®ƒçš„å®ç°ç»éªŒå°†å…±åŒå¯¼å‘å¹¿æ³›çš„é›†æˆï¼Œä¾‹å¦‚ï¼ŒåŒ…æ‹¬å°†æ¥ JDK ç‰ˆæœ¬ä¸­çš„ Java å¹³å°æ”¯æŒæˆ–è€…åœ¨å°†æ¥çš„ç½‘é¡µæµè§ˆå™¨ä¸­ç½‘ç»œåè®®çš„æ”¯æŒã€‚\u003c/p\u003e\n\u003ch3 id=\"å·¥ä½œç»„\"\u003eå·¥ä½œç»„\u003c/h3\u003e\n\u003ch4 id=\"åŸºæœ¬å«ä¹‰\"\u003eåŸºæœ¬å«ä¹‰\u003c/h4\u003e\n\u003cp\u003eåŸºæœ¬å«ä¹‰å®šä¹‰äº†å¦‚ä½•é€šè¿‡èƒŒå‹æ¥è°ƒèŠ‚æµä¸­å…ƒç´ çš„ä¼ è¾“ã€‚å…ƒç´ çš„ä¼ è¾“æ–¹å¼ï¼Œä¼ è¾“è¿‡ç¨‹ä¸­çš„è¡¨ç°å½¢å¼æˆ–è€…èƒŒå‹çš„ä¿¡å·å‘é€æ–¹å¼å‡ä¸å±äºæœ¬è§„èŒƒçš„ä¸€éƒ¨åˆ†ã€‚\u003c/p\u003e","title":"Reactive Streams è§„èŒƒç¿»è¯‘"},{"content":"ç®€ä»‹ æœ€è¿‘æˆ‘åœ¨å¯»æ‰¾ä¸€ä¸ªæ–¹æ³•ç»™è‡ªå·±å–ä¸€ä¸ªè‹±æ–‡åå­—ï¼Œç„¶åæˆ‘å‘ç°è¿™ç¯‡æ–‡ç« ï¼Œå¦‚ä½•é€‰æ‹©ä¸€ä¸ªè‹±æ–‡åå­—ã€‚è¯¥æ–‡ç« åœ¨é€‰æ‹©ä¸€ä¸ªè‹±æ–‡åå­—æå‡ºäº†ä¸€ä¸ªè¡Œä¹‹æœ‰æ•ˆçš„æ–¹æ³•ï¼Œæˆ‘ç”¨è¯¥æ–¹æ³•åˆ¶ä½œäº†ä¸€ä¸ªåº”ç”¨æ¥å¸®åŠ©é€‰æ‹©ä¸€ä¸ªè‹±æ–‡åå­—ã€‚\nä½ å¯ä»¥åœ¨ è¿™é‡Œ å°è¯•ä¸€ä¸‹ã€‚\næˆ‘ä¼šåœ¨ä¸‹é¢å±•å¼€è®²ä¸€ä¸‹é‚£ç¯‡æ–‡ç« å’Œè¿™ä¸ªåº”ç”¨ã€‚\næ–‡ç« æ‰€è¯´ ä»¥ä¸‹æ˜¯æ–‡ç« åŸæ–‡ã€‚\nDo not try to be creative in picking an English name.\nAvoid:\nDo not try to pick a fun or cute-sounding name from a movie, television, or video game character Do not pick a name that you think sounds cool or trendy, because Americans will think it sounds stupid Do not pick a name because your friends think it sounds cute, because your friends are not the Americans you have to interact with in the future Do not translate some positive-sounding word in your language into English and make that into your name Do:\nChoose a name from the 100 most popular names for your birth year If possible, choose a name that sounds somewhat similar to your real name Do not choose a variation as your official name Do not worry about what a name means ä»¥ä¸‹æ˜¯æˆ‘çš„ç¿»è¯‘ç‰ˆæœ¬ã€‚\nä¸è¦å°è¯•åœ¨é€‰æ‹©ä¸€ä¸ªè‹±æ–‡åä¸Šå¯Œæœ‰åˆ›é€ åŠ›ã€‚\né¿å…ï¼š\nä¸è¦ä»ç”µå½±ï¼Œç”µè§†æˆ–è€…æ¸¸æˆé‡Œçš„è§’è‰²å»é€‰æ‹©ä¸€ä¸ªæœ‰è¶£æˆ–å‘éŸ³å¯çˆ±çš„åå­— ä¸è¦é€‰æ‹©ä¸€ä¸ªä½ è®¤ä¸ºå¬èµ·æ¥å¾ˆé…·æˆ–è€…æ–°æ½®çš„ï¼Œå› ä¸ºç¾å›½äººå¯èƒ½è®¤ä¸ºå¾ˆè ¢ ä¸è¦é€‰æ‹©ä¸€ä¸ªåå­—å› ä¸ºä½ æœ‹å‹è®¤ä¸ºå¬èµ·æ¥å¾ˆå¯çˆ±ï¼Œå› ä¸ºä½ çš„æœ‹å‹ä¸æ˜¯å°†æ¥è¦å’Œä½ äº’åŠ¨çš„ç¾å›½äºº ä¸è¦ç›´æ¥ç¿»è¯‘ä¸€äº›ä½ æ¯è¯­å½“ä¸­æ­£é¢çš„è¯æ±‡ä¸ºè‹±è¯­å¹¶æŠŠå®ƒå½“ä½œä½ çš„åå­— æ¨èï¼š\nä» ä½ å‡ºç”Ÿé‚£å¹´æœ€æµè¡Œçš„ 100 ä¸ªåå­— é‡Œé¢é€‰æ‹©ä¸€ä¸ª å¦‚æœå¯ä»¥ï¼Œé€‰æ‹©ä¸€ä¸ªå¬èµ·æ¥è·Ÿä½ çœŸå®åå­—æœ‰æŸäº›ç›¸ä¼¼çš„åå­— ä¸è¦é€‰æ‹©ä¸€ä¸ªåå­—çš„å˜ä½“ä½œä¸ºä½ çš„å®˜æ–¹åå­— ä¸è¦æ‹…å¿ƒä¸€ä¸ªåå­—çš„å«ä¹‰ åº”ç”¨æ‰€åš ä» ä½ å‡ºç”Ÿé‚£å¹´æœ€æµè¡Œçš„ 100 ä¸ªåå­— é‡Œé¢é€‰æ‹©ä¸€ä¸ª\næˆ‘æ ¹æ®æ–‡ç« çš„å»ºè®®ä» ç¾å›½ç¤¾ä¿å±€å‡ºç”Ÿå©´å„¿åå­—æ•°æ® ä¸‹è½½äº†åŸå§‹æ•°æ®ã€‚\næŠŠå®ƒæ”¾åˆ°äº† GitHub ä¸Šï¼Œå¹¶ä¸”å·²ç»åšäº†ä¸€ä¸ª JSON æ ¼å¼çš„ã€‚\nè¯·åœ¨é˜…è¯»ä»–ä»¬çš„ è¯´æ˜ ä¹‹åå…è´¹ä½¿ç”¨ï¼ŒEnjoyï¼\næˆ‘æ˜¯æ€ä¹ˆé€‰æ‹©çš„ ä»æˆ‘çš„ä¸­æ–‡åä¸­æ‰¾çµæ„Ÿï¼ŒLixin Caoï¼Œæˆ‘æƒ³è¦ä¸€ä¸ªä»¥ L å¼€å¤´çš„è‹±æ–‡åã€‚ æ‰¾åˆ°æˆ‘å‡ºç”Ÿå¹´çš„è‹±æ–‡åå­—ï¼Œé€‰å‡ºä¸€äº›æˆ‘å–œæ¬¢çš„ã€‚ Levi Alex Lucas Liam å¸¦ä¸Šæˆ‘çš„å§“æ°ï¼Œæ¯”å¦‚ LeviCaoï¼Œå»ç¤¾äº¤ç½‘ç«™çœ‹ä¸€ä¸‹æœ‰æ²¡æœ‰è¢«å ç”¨ã€‚ Levi ï¼ˆåœ£ç»ç›¸å…³çš„ï¼‰ Alex ï¼ˆå·²ç»è¢«äººå ç”¨ï¼‰ Lucas ï¼ˆå¤ªæµè¡Œï¼‰ Liam ï¼ˆå¤ªæµè¡Œï¼‰ åœ¨ nameberry å’Œ behindthename æœç´¢åå­—çš„å«ä¹‰å’Œä¸€äº›å˜ä½“ã€‚ æˆ‘æœ€å–œæ¬¢ Alexï¼Œç„¶åæˆ‘æœ€åé€‰æ‹©äº† Lex ä½œä¸ºæˆ‘çš„è‹±æ–‡åå­—ã€‚ å‚è€ƒé“¾æ¥ è‹±æ–‡åé€‰æ‹©å™¨ è‹±æ–‡åé€‰æ‹©å™¨ æºç  ç¾å›½ç¤¾ä¿å±€è‹±æ–‡åæ•°æ® GitHub å¦‚ä½•é€‰æ‹©ä¸€ä¸ªè‹±æ–‡å ç¾å›½ç¤¾ä¿å±€å‡ºç”Ÿå©´å„¿åå­— ç¾å›½ç¤¾ä¿å±€å‡ºç”Ÿå©´å„¿åå­—æ•°æ® ","permalink":"https://lexcao.io/zh/posts/choose-english-name/","summary":"\u003ch1 id=\"ç®€ä»‹\"\u003eç®€ä»‹\u003c/h1\u003e\n\u003cp\u003eæœ€è¿‘æˆ‘åœ¨å¯»æ‰¾ä¸€ä¸ªæ–¹æ³•ç»™è‡ªå·±å–ä¸€ä¸ªè‹±æ–‡åå­—ï¼Œç„¶åæˆ‘å‘ç°è¿™ç¯‡æ–‡ç« ï¼Œ\u003ca href=\"http://www.pgbovine.net/choosing-english-name.htm\"\u003e\u003cem\u003eå¦‚ä½•é€‰æ‹©ä¸€ä¸ªè‹±æ–‡åå­—\u003c/em\u003e\u003c/a\u003eã€‚è¯¥æ–‡ç« åœ¨é€‰æ‹©ä¸€ä¸ªè‹±æ–‡åå­—æå‡ºäº†ä¸€ä¸ªè¡Œä¹‹æœ‰æ•ˆçš„æ–¹æ³•ï¼Œæˆ‘ç”¨è¯¥æ–¹æ³•åˆ¶ä½œäº†ä¸€ä¸ªåº”ç”¨æ¥å¸®åŠ©é€‰æ‹©ä¸€ä¸ªè‹±æ–‡åå­—ã€‚\u003c/p\u003e\n\u003cp\u003eä½ å¯ä»¥åœ¨ \u003ca href=\"https://lexcao.github.io/English-name-picker\"\u003e\u003cem\u003eè¿™é‡Œ\u003c/em\u003e\u003c/a\u003e å°è¯•ä¸€ä¸‹ã€‚\u003c/p\u003e\n\u003cp\u003eæˆ‘ä¼šåœ¨ä¸‹é¢å±•å¼€è®²ä¸€ä¸‹é‚£ç¯‡æ–‡ç« å’Œè¿™ä¸ªåº”ç”¨ã€‚\u003c/p\u003e\n\u003ch1 id=\"æ–‡ç« æ‰€è¯´\"\u003eæ–‡ç« æ‰€è¯´\u003c/h1\u003e\n\u003cp\u003eä»¥ä¸‹æ˜¯æ–‡ç« åŸæ–‡ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eDo not try to be creative in picking an English name.\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eAvoid:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cul\u003e\n\u003cli\u003eDo not try to pick a fun or cute-sounding name from a movie, television, or video game character\u003c/li\u003e\n\u003cli\u003eDo not pick a name that you think sounds cool or trendy, because Americans will think it sounds stupid\u003c/li\u003e\n\u003cli\u003eDo not pick a name because your friends think it sounds cute, because your friends are not the Americans you have to interact with in the future\u003c/li\u003e\n\u003cli\u003eDo not translate some positive-sounding word in your language into English and make that into your name\u003c/li\u003e\n\u003c/ul\u003e\u003c/blockquote\u003e\n\u003cp\u003eDo:\u003c/p\u003e","title":"é€‰æ‹©ä¸€ä¸ªè‹±æ–‡åå­—"},{"content":"é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„é™æ€ç½‘ç«™ç”Ÿæˆå™¨æ¯”è¾ƒéš¾ï¼Œå°¤å…¶æ˜¯å½“ä½ ç¬¬ä¸€æ¬¡æƒ³è¦æ­å»ºä¸€ä¸ªåšå®¢ç½‘ç«™çš„æ—¶å€™ã€‚è¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡æ­å»ºä¸€ä¸ªåšå®¢å¹¶ä¸”æ²¡æœ‰è¶³å¤Ÿçš„æ—¶é—´å»å°è¯•æ‰€æœ‰å¸¸è§çš„ç”Ÿæˆå™¨ï¼Œæˆ‘é€‰æ‹©äº† Jekyll ä½œä¸ºç¬¬ä¸€æ¬¡æ­å»ºä½¿ç”¨çš„ç”Ÿæˆå™¨ï¼Œå°½ç®¡å®ƒå¯èƒ½ä¸æ˜¯æœ€å¥½çš„ä¸€ä¸ªã€‚æˆ‘å‡†å¤‡ä»¥åå†å°è¯•å…¶ä»–ç”Ÿæˆå™¨ã€‚\nè¿™æ˜¯æˆ‘ä» Google æ‰¾åˆ°çš„ä¸€äº›ç®€è¦çš„æè¿°ï¼Œå¸Œæœ›å®ƒèƒ½å¯¹ä½ é€‰æ‹©ä»€ä¹ˆç”Ÿæˆå™¨å¼€å§‹æ­å»ºç½‘ç«™æœ‰å¸®åŠ©ã€‚\næˆ‘ä» GitHub é€‰æ‹©äº†ä»¥ä¸‹ä¸‰ä¸ªé™æ€åšå®¢ç”Ÿæˆå™¨è¿›è¡Œæ¯”è¾ƒ\nJekyll Hugo Hexo ä»€ä¹ˆæ˜¯é™æ€ç½‘ç«™ç”Ÿæˆå™¨ HTML æ–‡ä»¶ï¼› æ²¡æœ‰æœåŠ¡ç«¯å¤„ç†æˆ–è€…æ•°æ®åº“äº¤äº’ï¼› æ¯”åŠ¨æ€ç½‘ç«™æ›´å®‰å…¨ï¼› åˆ©äºä½¿ç”¨ CDN è¿›è¡Œæ‰©å±•ï¼› ç¼“å­˜ä¼šå¸¦æ¥æ¯”åŠ¨æ€ç½‘é¡µæ›´é«˜çš„æ•ˆç‡ï¼› è¯·æ±‚è¶…å¿«é€Ÿã€‚ Jekyll ä½¿ç”¨è¯­è¨€ Rubyï¼› GitHub æ”¯æŒï¼› ä½¿ç”¨ GitHub Pages å…è´¹éƒ¨ç½²ã€‚ ä¼˜åŠ¿ å…è´¹ä¸”å¼€æºï¼› RubyGems æ”¯æŒæ„å»ºä¸»é¢˜ä¸º gems æ–¹ä¾¿åˆ†å‘ï¼› ç®€å•ä¾¿æ·ä½¿ç”¨ï¼› å¼ºå¤§çš„ GitHub Pages æ”¯æŒï¼› å¼€ç®±å³ç”¨çš„åˆé€‚çš„é»˜è®¤æç®€ä¸»é¢˜ã€‚ åŠ£åŠ¿ å½“ç½‘ç«™å†…å®¹ä¸æ–­å¢åŠ åï¼Œæ„å»ºé€Ÿåº¦ä¼šæ˜æ˜¾å˜æ…¢ã€‚\nåŠŸèƒ½ Liquid æ¨¡ç‰ˆå¼•æ“ï¼› åŸºäº Gem ä¸»é¢˜ï¼› Markdown å’Œ YAML ç±»å‹æ”¯æŒï¼› Sass é¢„å¤„ç† CSS æ”¯æŒï¼› å®˜æ–¹æ’ä»¶æ”¯æŒ CoffeeScriptã€‚ Hugo ä½¿ç”¨è¯­è¨€ Go. ä¼˜åŠ¿ å…è´¹å¼€æºï¼› é€Ÿåº¦éå¸¸å¿«ï¼Œå¯¹æ„å»ºé€Ÿåº¦åšäº†ä¼˜åŒ–ï¼› å†…ç½®æ”¯æŒå¾ˆå¤šåŠŸèƒ½ï¼š åŠ¨æ€ API è¯·æ±‚çš„å†…å®¹ï¼› æ— é™åˆ¶å†…å®¹ç±»å‹ï¼› shortcakesï¼Œ ä¸€ä¸ªçµæ´»çš„ Markdown æ›¿ä»£ï¼› å›½é™…åŒ–ï¼› åˆ«åé‡å®šå‘ï¼› åˆ†é¡µã€‚ é¢„åˆ¶çš„ Go æ¨¡ç‰ˆå’Œæ¨¡å¼ï¼› æ— éœ€ä¾èµ–ï¼ˆä¸ç”¨å®‰è£… Goï¼Œå› ä¸ºå®ƒæ˜¯ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶ï¼‰ï¼› åŠŸèƒ½å¼ºå¤§çš„å†…å®¹æ¨¡å‹ã€‚ åŠ£åŠ¿ ä¸»é¢˜ä½¿ç”¨ Go æ¨¡ç‰ˆï¼Œæ‰€ä»¥éœ€è¦ç†Ÿæ‚‰ Goï¼› æ²¡æœ‰å†…ç½®é»˜è®¤ä¸»é¢˜ï¼› ç¼ºå°‘æ‰©å±•æ€§å’Œæ’ä»¶ï¼ˆå› ä¸º Go æ˜¯ç¼–è¯‘å‹è¯­è¨€ï¼‰ã€‚ åŠŸèƒ½ Go æ¨¡ç‰ˆï¼› å›½é™…åŒ–; æ”¯æŒåŠ¨æ€ APIã€‚ Hexo ä½¿ç”¨ Node.js. ä¼˜åŠ¿ ç›¸å½“å¿«é€Ÿï¼› åœ¨ GitHub Pages éƒ¨ç½²ç®€å•ï¼› ä¸­æ–‡æ”¯æŒï¼ˆå¯èƒ½æ˜¯åŠ£åŠ¿å¯¹äºéä¸­æ–‡ç”¨æˆ·ï¼‰ï¼› ä¸­æ–‡ç¤¾åŒºã€‚ åŠ£åŠ¿ æ²¡æœ‰è‹±æ–‡ã€‚ åŠŸèƒ½ EJS æ¨¡ç‰ˆå¼•æ“; æ”¯æŒ ä¸­æ–‡; å¯¹äº HTML + CSS + Javascript éå¸¸å‹å¥½ã€‚ æˆ‘æ­£åœ¨ä½¿ç”¨ Jekyll\nå–œæ¬¢ éå¸¸å¤šçš„å…è´¹ä¸»é¢˜å’Œæ’ä»¶ï¼› æœ‰å¾ˆå¤šæ•™ç¨‹å¯¹äºåˆå­¦è€…æ¥è¯´ï¼› ä¸éœ€è¦ä»»ä½•æŠ€èƒ½å°±èƒ½éƒ¨ç½²åˆ° GitHub Pages ä¸Šã€‚ ä¸å–œæ¬¢ å¯¹äºå¤§å¤šæ•°æ’ä»¶æ²¡æœ‰è¢« GitHub Pages æ”¯æŒï¼› ä¸æ”¯æŒå›½é™…åŒ–ã€‚ é¡ºä¾¿ä¸€æï¼Œç”±äºç›®å‰æ–‡ç« æ•°é‡æ¯”è¾ƒå°‘ï¼Œæ„å»ºé€Ÿåº¦ä¸åœ¨æˆ‘çš„è€ƒè™‘èŒƒå›´ä¹‹å†…ï¼Œå°†æ¥å¦‚æœç”¨ Jekyll æ˜æ˜¾æ„Ÿåˆ°æ„å»ºå˜æ…¢çš„æ—¶å€™ï¼Œæˆ‘å°±ä¼šå°è¯•å…¶ä»–çš„ç”Ÿæˆå™¨ã€‚\nä»¥ä¸Šä¸‰ä¸ªç”Ÿæˆå™¨çš„æ„å»ºé€Ÿåº¦æ’åï¼šHugo \u0026gt; Hexo \u0026gt; jekyllã€‚\nä¸‹ä¸€ä¸ªå°†æ¥è¦å°è¯•çš„ç”Ÿæˆå™¨åº”è¯¥æ˜¯ Hugoï¼Œåˆ°æ—¶å€™æˆ‘ä¼šæ›´æ–°è¿™ç¯‡æ–‡ç« ï¼Œå†™ä¸€äº›å®é™…çš„ä½¿ç”¨æ„Ÿå—ã€‚\nå‚è€ƒé“¾æ¥ å¦‚ä½•é€‰æ‹©æ­£ç¡®çš„é™æ€ç”Ÿæˆå™¨ Jekyll vs. Hugo vs. Hexo é™æ€ç½‘ç«™ç”Ÿæˆå™¨æ¯”è¾ƒ ","permalink":"https://lexcao.io/zh/posts/jekyll-hugo-hexo/","summary":"\u003cp\u003eé€‰æ‹©ä¸€ä¸ªåˆé€‚çš„é™æ€ç½‘ç«™ç”Ÿæˆå™¨æ¯”è¾ƒéš¾ï¼Œå°¤å…¶æ˜¯å½“ä½ ç¬¬ä¸€æ¬¡æƒ³è¦æ­å»ºä¸€ä¸ªåšå®¢ç½‘ç«™çš„æ—¶å€™ã€‚è¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡æ­å»ºä¸€ä¸ªåšå®¢å¹¶ä¸”æ²¡æœ‰è¶³å¤Ÿçš„æ—¶é—´å»å°è¯•æ‰€æœ‰å¸¸è§çš„ç”Ÿæˆå™¨ï¼Œæˆ‘é€‰æ‹©äº† \u003ccode\u003eJekyll\u003c/code\u003e ä½œä¸ºç¬¬ä¸€æ¬¡æ­å»ºä½¿ç”¨çš„ç”Ÿæˆå™¨ï¼Œå°½ç®¡å®ƒå¯èƒ½ä¸æ˜¯æœ€å¥½çš„ä¸€ä¸ªã€‚æˆ‘å‡†å¤‡ä»¥åå†å°è¯•å…¶ä»–ç”Ÿæˆå™¨ã€‚\u003c/p\u003e\n\u003cp\u003eè¿™æ˜¯æˆ‘ä» Google æ‰¾åˆ°çš„ä¸€äº›ç®€è¦çš„æè¿°ï¼Œå¸Œæœ›å®ƒèƒ½å¯¹ä½ é€‰æ‹©ä»€ä¹ˆç”Ÿæˆå™¨å¼€å§‹æ­å»ºç½‘ç«™æœ‰å¸®åŠ©ã€‚\u003c/p\u003e\n\u003cp\u003eæˆ‘ä» GitHub é€‰æ‹©äº†ä»¥ä¸‹ä¸‰ä¸ªé™æ€åšå®¢ç”Ÿæˆå™¨è¿›è¡Œæ¯”è¾ƒ\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://jekyllrb.com/\"\u003e\u003cem\u003eJekyll\u003c/em\u003e\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://gohugo.io/\"\u003e\u003cem\u003eHugo\u003c/em\u003e\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://hexo.io/\"\u003e\u003cem\u003eHexo\u003c/em\u003e\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1 id=\"ä»€ä¹ˆæ˜¯é™æ€ç½‘ç«™ç”Ÿæˆå™¨\"\u003eä»€ä¹ˆæ˜¯é™æ€ç½‘ç«™ç”Ÿæˆå™¨\u003c/h1\u003e\n\u003col\u003e\n\u003cli\u003eHTML æ–‡ä»¶ï¼›\u003c/li\u003e\n\u003cli\u003eæ²¡æœ‰æœåŠ¡ç«¯å¤„ç†æˆ–è€…æ•°æ®åº“äº¤äº’ï¼›\u003c/li\u003e\n\u003cli\u003eæ¯”åŠ¨æ€ç½‘ç«™æ›´å®‰å…¨ï¼›\u003c/li\u003e\n\u003cli\u003eåˆ©äºä½¿ç”¨ CDN è¿›è¡Œæ‰©å±•ï¼›\u003c/li\u003e\n\u003cli\u003eç¼“å­˜ä¼šå¸¦æ¥æ¯”åŠ¨æ€ç½‘é¡µæ›´é«˜çš„æ•ˆç‡ï¼›\u003c/li\u003e\n\u003cli\u003eè¯·æ±‚è¶…å¿«é€Ÿã€‚\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch1 id=\"jekyll\"\u003e\u003ca href=\"https://jekyllrb.com/\"\u003e\u003cem\u003eJekyll\u003c/em\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003eä½¿ç”¨è¯­è¨€ \u003cstrong\u003eRuby\u003c/strong\u003eï¼›\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eGitHub\u003c/strong\u003e æ”¯æŒï¼›\u003c/li\u003e\n\u003cli\u003eä½¿ç”¨ GitHub Pages å…è´¹éƒ¨ç½²ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"ä¼˜åŠ¿\"\u003eä¼˜åŠ¿\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003eå…è´¹ä¸”å¼€æºï¼›\u003c/li\u003e\n\u003cli\u003eRubyGems æ”¯æŒæ„å»ºä¸»é¢˜ä¸º gems æ–¹ä¾¿åˆ†å‘ï¼›\u003c/li\u003e\n\u003cli\u003eç®€å•ä¾¿æ·ä½¿ç”¨ï¼›\u003c/li\u003e\n\u003cli\u003eå¼ºå¤§çš„ GitHub Pages æ”¯æŒï¼›\u003c/li\u003e\n\u003cli\u003eå¼€ç®±å³ç”¨çš„åˆé€‚çš„é»˜è®¤æç®€ä¸»é¢˜ã€‚\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"åŠ£åŠ¿\"\u003eåŠ£åŠ¿\u003c/h2\u003e\n\u003cp\u003eå½“ç½‘ç«™å†…å®¹ä¸æ–­å¢åŠ åï¼Œæ„å»ºé€Ÿåº¦ä¼šæ˜æ˜¾å˜æ…¢ã€‚\u003c/p\u003e\n\u003ch2 id=\"åŠŸèƒ½\"\u003eåŠŸèƒ½\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eLiquid\u003c/code\u003e æ¨¡ç‰ˆå¼•æ“ï¼›\u003c/li\u003e\n\u003cli\u003eåŸºäº \u003ccode\u003eGem\u003c/code\u003e ä¸»é¢˜ï¼›\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eMarkdown\u003c/code\u003e å’Œ \u003ccode\u003eYAML\u003c/code\u003e ç±»å‹æ”¯æŒï¼›\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eSass\u003c/code\u003e é¢„å¤„ç† CSS æ”¯æŒï¼›\u003c/li\u003e\n\u003cli\u003eå®˜æ–¹æ’ä»¶æ”¯æŒ \u003ccode\u003eCoffeeScript\u003c/code\u003eã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1 id=\"hugo\"\u003e\u003ca href=\"https://gohugo.io\"\u003e\u003cem\u003eHugo\u003c/em\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003eä½¿ç”¨è¯­è¨€ \u003cstrong\u003eGo\u003c/strong\u003e.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"ä¼˜åŠ¿-1\"\u003eä¼˜åŠ¿\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003eå…è´¹å¼€æºï¼›\u003c/li\u003e\n\u003cli\u003eé€Ÿåº¦éå¸¸å¿«ï¼Œå¯¹æ„å»ºé€Ÿåº¦åšäº†ä¼˜åŒ–ï¼›\u003c/li\u003e\n\u003cli\u003eå†…ç½®æ”¯æŒå¾ˆå¤šåŠŸèƒ½ï¼š\n\u003col\u003e\n\u003cli\u003eåŠ¨æ€ API è¯·æ±‚çš„å†…å®¹ï¼›\u003c/li\u003e\n\u003cli\u003eæ— é™åˆ¶å†…å®¹ç±»å‹ï¼›\u003c/li\u003e\n\u003cli\u003eshortcakesï¼Œ ä¸€ä¸ªçµæ´»çš„ Markdown æ›¿ä»£ï¼›\u003c/li\u003e\n\u003cli\u003eå›½é™…åŒ–ï¼›\u003c/li\u003e\n\u003cli\u003eåˆ«åé‡å®šå‘ï¼›\u003c/li\u003e\n\u003cli\u003eåˆ†é¡µã€‚\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/li\u003e\n\u003cli\u003eé¢„åˆ¶çš„ Go æ¨¡ç‰ˆå’Œæ¨¡å¼ï¼›\u003c/li\u003e\n\u003cli\u003eæ— éœ€ä¾èµ–ï¼ˆä¸ç”¨å®‰è£… Goï¼Œå› ä¸ºå®ƒæ˜¯ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶ï¼‰ï¼›\u003c/li\u003e\n\u003cli\u003eåŠŸèƒ½å¼ºå¤§çš„å†…å®¹æ¨¡å‹ã€‚\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"åŠ£åŠ¿-1\"\u003eåŠ£åŠ¿\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003eä¸»é¢˜ä½¿ç”¨ Go æ¨¡ç‰ˆï¼Œæ‰€ä»¥éœ€è¦ç†Ÿæ‚‰ Goï¼›\u003c/li\u003e\n\u003cli\u003eæ²¡æœ‰å†…ç½®é»˜è®¤ä¸»é¢˜ï¼›\u003c/li\u003e\n\u003cli\u003eç¼ºå°‘æ‰©å±•æ€§å’Œæ’ä»¶ï¼ˆå› ä¸º Go æ˜¯ç¼–è¯‘å‹è¯­è¨€ï¼‰ã€‚\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"åŠŸèƒ½-1\"\u003eåŠŸèƒ½\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eGo æ¨¡ç‰ˆï¼›\u003c/li\u003e\n\u003cli\u003eå›½é™…åŒ–;\u003c/li\u003e\n\u003cli\u003eæ”¯æŒåŠ¨æ€ APIã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1 id=\"hexo\"\u003e\u003ca href=\"https://hexo.io\"\u003e\u003cem\u003eHexo\u003c/em\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003eä½¿ç”¨ \u003cstrong\u003eNode.js\u003c/strong\u003e.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"ä¼˜åŠ¿-2\"\u003eä¼˜åŠ¿\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eç›¸å½“å¿«é€Ÿï¼›\u003c/li\u003e\n\u003cli\u003eåœ¨ GitHub Pages éƒ¨ç½²ç®€å•ï¼›\u003c/li\u003e\n\u003cli\u003eä¸­æ–‡æ”¯æŒï¼ˆå¯èƒ½æ˜¯åŠ£åŠ¿å¯¹äºéä¸­æ–‡ç”¨æˆ·ï¼‰ï¼›\u003c/li\u003e\n\u003cli\u003eä¸­æ–‡ç¤¾åŒºã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"åŠ£åŠ¿-2\"\u003eåŠ£åŠ¿\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eæ²¡æœ‰è‹±æ–‡ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"åŠŸèƒ½-2\"\u003eåŠŸèƒ½\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eEJS\u003c/code\u003e æ¨¡ç‰ˆå¼•æ“;\u003c/li\u003e\n\u003cli\u003eæ”¯æŒ \u003ccode\u003eä¸­æ–‡\u003c/code\u003e;\u003c/li\u003e\n\u003cli\u003eå¯¹äº \u003ccode\u003eHTML + CSS + Javascript\u003c/code\u003e éå¸¸å‹å¥½ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1 id=\"æˆ‘æ­£åœ¨ä½¿ç”¨\"\u003eæˆ‘æ­£åœ¨ä½¿ç”¨\u003c/h1\u003e\n\u003cp\u003e\u003cstrong\u003eJekyll\u003c/strong\u003e\u003c/p\u003e","title":"Jekyll / Hugo / Hexo æ¯”è¾ƒ"},{"content":"å®ç°ç›®æ ‡ æ”¯æŒå¤šè¯­è¨€ï¼Œè‹±æ–‡ä¸ºä¸»ï¼Œä¸­æ–‡ä¸ºè¾…ï¼› å½“è®¿é—® / æ ¹ç›®å½•ä¸‹é¡µé¢ï¼Œæ¯”å¦‚ /about.html /posts/hello-world æ˜¾ç¤ºè‹±æ–‡é¡µé¢ï¼› å½“è®¿é—® /zh/ ç›®å½•ä¸‹é¡µé¢ï¼Œæ¯”å¦‚ /zh/about.html /zh/posts/hello-world æ˜¾ç¤ºä¸­æ–‡é¡µé¢ï¼› å½“è®¿é—® ../hello-world æ–‡ç« æ—¶ï¼Œå¯ä»¥é€šè¿‡é“¾æ¥è·³è½¬åˆ°å¯¹åº”è¯­è¨€é¡µé¢ï¼› archive å’Œ index é¡µé¢ä¸­ä»…æ˜¾ç¤ºå‡ºå½“å‰è¯­è¨€é¡µé¢ã€‚ ç›¸å…³ç¼ºé™· 404 é¡µé¢æ— æ³•é…ç½®ï¼Œåªèƒ½åœ¨ 404.html é¡µé¢å†™ä¸Šä¸¤ç§è¯­è¨€ï¼› æ”¯æŒå¤šè¯­è¨€æ–‡ç« çš„åˆ†é¡µæ’ä»¶ jekyll-paginate-v2 æ²¡åœ¨ GitHub Pages æ”¯æŒçš„æ’ä»¶ç™½åå•å†…ï¼Œç›®å‰æœ¬åšå®¢é¦–é¡µä¸æ”¯æŒåˆ†é¡µã€‚å¤šè¯­è¨€åˆ†é¡µè¯¦è§ä¸‹æ–‡ï¼› å¤šè¯­è¨€æ—¶é—´è¡¨ç¤ºæœ‰ç‚¹éº»çƒ¦ï¼Œéœ€è¦åšä¸€äº›å­—ç¬¦ä¸²å¤„ç†å·¥ä½œï¼Œèƒ½å®ç°ä½†æ˜¯ä¸å¤ªä¼˜é›…ï¼Œå…·ä½“å¯ä»¥å‚è€ƒ Jekyll-Date-Formattingã€‚ å¼€å§‹é…ç½® æœ€åˆï¼Œæˆ‘æœç´¢åˆ° i18n æ’ä»¶ Jekyll-Multiple-Languages-Pluginã€‚\nè¯¥ä»“åº“çš„ Star æ•°æ˜¯å¤šè¯­è¨€æ’ä»¶ä¸­æœ€å¤šçš„ï¼ŒåŒæ—¶é‡Œé¢ä¹Ÿåˆ—å‡ºäº†ç›¸å…³å…¶ä»–å¤šè¯­è¨€æ’ä»¶ï¼Œå·²ç»æ¯”è¾ƒå®Œå–„ï¼Œä¸æƒ³æŠ˜è…¾çš„å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚\nç›®å‰æˆ‘ä¸ºäº†ç®€å•å’Œå¯å®šåˆ¶åŒ–ï¼ŒåŒæ—¶çœç•¥æ‰æ’ä»¶ä¸­ä¸å¿…è¦çš„åŠŸèƒ½ï¼Œé€‰æ‹©ä½¿ç”¨è‡ªå®šä¹‰è§„åˆ™æ¥å®ç°å¤šè¯­è¨€åŠŸèƒ½ã€‚\n1. å•ä¸ªåšæ–‡é…ç½® æ¯ä¸€ç¯‡æ–‡ç« å’Œé¡µé¢éœ€è¦å®šä¹‰ä¸¤ä¸ªå±æ€§ï¼š\nuid æ ‡ç¤ºæ–‡ç« å”¯ä¸€ï¼Œä¸€ç¯‡æ–‡ç« çš„ä¸­æ–‡ç‰ˆæœ¬å’Œè‹±æ–‡ç‰ˆæœ¬ uid ç›¸åŒï¼› æ³¨æ„ï¼šuid å¯ä»¥è®¾ç½®ä¸ºä»»æ„å‘½åï¼Œæ¯”å¦‚ document_id ã€‚ locale æ ‡ç¤ºæ–‡ç« è¯­è¨€ï¼Œä¸€ç¯‡æ–‡ç« è¢«æ¸²æŸ“åä½œä¸ºå“ªç§è¯­è¨€å±•ç¤ºã€‚ æ‰€ä»¥æ¯ç¯‡æ–‡ç« çš„ Front Matter æ–°å¢å¦‚ä¸‹è®¾ç½®\n--- uid: hello-world locale: zh --- 2. å¯¹äºæ–‡ç«  posts æ¯ç¯‡æ–‡ç« éƒ½éœ€è¦åœ¨ Front Matter ä¸­å†™ä¸Š locale é‡å¤å¤šä½™ã€‚ä¸è¦é‡å¤è‡ªå·±ã€‚æˆ‘å‡†å¤‡ä½¿ç”¨ä¸åŒæ–‡ä»¶å¤¹æ¥åŒºåˆ†ä¸åŒè¯­è¨€çš„æ–‡ç« ï¼Œç„¶ååœ¨é…ç½®æ–‡ä»¶è®¾ç½® locale çš„é»˜è®¤å€¼ã€‚\nåœ¨ _posts ç›®å½•ä¸‹åˆ›å»º zh æ–‡ä»¶å¤¹ç”¨äºå­˜æ”¾ä¸­æ–‡æ–‡ç« ã€‚å½“è®¿é—® /zh/posts/xxx æ—¶å³å±•ç¤ºä¸­æ–‡é¡µé¢ã€‚\nï¼ˆå½“ç„¶ï¼Œä¹Ÿå¯ä»¥è®¾ç½®ä¸åŒçš„ç›®å½•ï¼Œå‚ç…§ä»¥ä¸‹é…ç½®è¿›è¡Œè®¾ç½®ä¸åŒçš„ path ï¼‰\ndefaults: - values: #1 locale: en - scope: #2 path: _posts/zh/** type: posts values: locale: zh #1 æœªæŒ‡å®š scope å…¨å±€é»˜è®¤ï¼šæ‰€æœ‰æ–‡ç«  posts å’Œé¡µé¢ pages é»˜è®¤ enï¼› #2 æŒ‡å®š scope è·¯å¾„ _posts/zh/** ä¸‹ posts ç±»å‹ï¼šzhã€‚ 3. å¯¹äºé¡µé¢ä¸­é€šç”¨çš„å­—ç¬¦ä¸² å¯¼èˆªæ ä¸­ å½’æ¡£ å…³äº æˆ–è€… ä¸‹ä¸€é¡µ ç­‰è¿™æ ·çš„é€šç”¨å­—ç¬¦ä¸²ã€‚\nä½¿ç”¨ site.data åŠŸèƒ½æ¥å®ç°ï¼Œåœ¨ /_data ç›®å½•ä¸‹åˆ›å»º locales æ–‡ä»¶å¤¹ï¼Œå¹¶åˆ†åˆ«åˆ›å»º en.yml å’Œ zh.yml ç”¨äºå­˜æ”¾è‹±æ–‡å’Œä¸­æ–‡å­—ç¬¦ä¸²ã€‚\n# /_data/locales/en.yml æ–‡ä»¶ä¸­ menu: about: About archive: Archive # /_data/locales/zh.yml æ–‡ä»¶ä¸­ menu: about: å…³äº archive: å½’æ¡£ é…ç½®å¥½è¿™äº›å­—ç¬¦ä¸²åï¼Œåœ¨éœ€è¦æ›¿æ¢æ–‡å­—çš„åœ°æ–¹ä½¿ç”¨\n\u0026lt;nav class=\u0026#34;menu-content\u0026#34;\u0026gt; \u0026lt;a href=\u0026#34;/about\u0026#34;\u0026gt;{{ site.data.locales[page.locale].menu.about }}\u0026lt;/a\u0026gt; \u0026lt;/nav\u0026gt; 4. å¯¹äºé¡µé¢ pages ä¸€äº›é€šç”¨é¡µé¢ï¼šarchive.html about.html ç­‰ pages ç±»å‹ã€‚\nå•ç‹¬åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ _zhï¼Œå¹¶ä½œä¸º collection æ¥é…ç½®\ncollections: zh: output: true åœ¨ _zh æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºå¯¹åº”é¡µé¢\n/menu/archive.html /menu/about.html 5. è¯­è¨€é€‰æ‹©å™¨ ç”¨äºåœ¨ä¸åŒè¯­è¨€çš„æ–‡ç« æˆ–é¡µé¢ä¸­æ ¹æ® locale è¿›è¡Œåˆ‡æ¢ã€‚\nåœ¨ _includes æ–‡ä»¶å¤¹ä¸‹æ·»åŠ ä¸€ä¸ªæ–°æ–‡ä»¶ language-selector.htmlã€‚\néå† postsã€ pages å’Œ collections æ‰¾åˆ°ç›¸åº”çš„è¯­è¨€é¡µé¢\n{% if page.uid %} \u0026lt;!-- #1 --\u0026gt; \u0026lt;div class=\u0026#34;language-selector\u0026#34;\u0026gt; {% assign postsOrPages = site.posts \u0026lt;!-- #2 --\u0026gt; | concat: site.pages | concat: site.zh | where: \u0026#34;uid\u0026#34;, page.uid | sort: \u0026#34;locale\u0026#34; %} {% for item in postsOrPages %} {% unless item.url contains \u0026#39;/page/\u0026#39; %} \u0026lt;!-- #3 --\u0026gt; \u0026lt;a href=\u0026#34;{{ item.url }}\u0026#34; class=\u0026#34;{{ item.locale }}\u0026#34;\u0026gt; {{ site.data.locales[item.locale].name }} \u0026lt;!-- #4 --\u0026gt; \u0026lt;/a\u0026gt; {% endunless %} {% endfor %} \u0026lt;/div\u0026gt; {% endif %} #1 ä»…åœ¨æœ‰ uid çš„é¡µé¢æ˜¾ç¤ºè¯­è¨€é€‰æ‹©å™¨ #2 æ‹¼æ¥ posts pages zh æ•°ç»„ï¼Œæ‰¾åˆ° uid å¯¹åº”çš„é¡µé¢ï¼Œæ ¹æ® local æ’åº #3 è¿‡æ»¤æ‰ /pages/ ç›®å½•ä¸‹é¡µé¢ #4 æ‹¿åˆ° locale å¯¹åº”çš„è¯­è¨€æ–‡å­—ï¼Œå¦‚ EN ä¸­ 6. å½’æ¡£é¡µé¢ éœ€è¦æ‰‹åŠ¨å¤šè™‘æ‰éæœ¬è¯­è¨€é¡µé¢çš„æ–‡ç« ã€‚\npost.next æä¾›ä¾¿æ·è·å–ä¸‹ä¸€ç¯‡æ–‡ç« çš„æ–¹æ³•ï¼Œä½†æ˜¯åœ¨å¤šè¯­è¨€æ–‡ç« ä¸­æ— æ³•ä¿è¯ locale çš„ä¸€è‡´æ€§ï¼Œéœ€è¦ä½œå‡ºå¦‚ä¸‹ä¿®æ”¹\n\u0026lt;!-- archive.html --\u0026gt; \u0026lt;!-- ä½¿ç”¨ posts çš„ä¸‹æ ‡ï¼Œè€Œä¸ç”¨ post.next --\u0026gt; {% assign posts = site.posts | where: \u0026#34;locale\u0026#34;, page.locale %} {% for index in (0..posts.size) limit: posts.size %} {% assign post = posts[index] %} {% assign prevIndex = index | minus: 1 %} {% assign prev = posts[prevIndex] %} {% capture year %}{{ post.date | date: \u0026#39;%Y\u0026#39; }}{% endcapture %} {% capture prevYear %}{{ prev.date | date: \u0026#39;%Y\u0026#39; }}{% endcapture %} {% if year != prevYear or index == 0 %} \u0026lt;h3\u0026gt;{{ year }}\u0026lt;/h3\u0026gt; {% endif %} \u0026lt;li itemscope\u0026gt; \u0026lt;a href=\u0026#34;{{ post.url }}\u0026#34;\u0026gt;{{ post.title }}\u0026lt;/a\u0026gt; \u0026lt;p class=\u0026#34;post-date\u0026#34;\u0026gt;\u0026lt;span\u0026gt;{{ post.date | date: \u0026#34;%B %-d\u0026#34; }}\u0026lt;/span\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;/li\u0026gt; {% endfor %} æ ¸å¿ƒæ€æƒ³ï¼šå…ˆæ ¹æ® locale è¿‡æ»¤ï¼Œéå†çš„æ—¶å€™ä½¿ç”¨ä¸‹æ ‡è€Œä¸æ˜¯ post.nextã€‚\n7. å¤šè¯­è¨€ SEO åœ¨ _includes æ–‡ä»¶å¤¹ä¸‹é¢åˆ›å»ºä¸€ä¸ªæ–°é¡µé¢ language-seo.htmlã€‚\né€šè¿‡ hreflang æŒ‡ç¤ºå¯¹åº”çš„è¯­è¨€\n{% assign posts = site.posts | where:\u0026#34;uid\u0026#34;, page.uid | sort: \u0026#39;locale\u0026#39; %} {% for post in posts %} \u0026lt;link rel=\u0026#34;alternate\u0026#34; hreflang=\u0026#34;{{ post.locale }}\u0026#34; href=\u0026#34;{{ post.url }}\u0026#34; /\u0026gt; {% endfor %} å¹¶ä¸”åœ¨ head.html å¼•ç”¨\n\u0026lt;!-- Language SEO --\u0026gt; {% include language-seo.html %} æœ€å æˆ‘çœç•¥äº†ä¸€äº›ä¸é‡è¦çš„å¸¸è§„é…ç½®ï¼Œæºç è¯·çœ‹ GitHub: lexcao.github.io\nç›¸å…³å‚è€ƒé“¾æ¥ Jekyll Multiple Language Plugin Making Jekyll Multilingual Multi-Languages-with-Jekyll Deploy A Multi-Language Jekyll Site jekyll-paginate-v2 å¦ä¸€ä»¶äº‹ å¤šè¯­è¨€æ”¯æŒåˆ†é¡µ æ—§çš„åˆ†é¡µæ’ä»¶ jekyll-pagination-v1 æ— æ³•æ ¹æ®ç­›é€‰æ¡ä»¶è¿‡æ»¤å·²ç»ä¸å†é€‚åˆï¼Œä¸èƒ½åœ¨å¯¹åº”çš„è¯­è¨€é¡µé¢æ˜¾ç¤ºå¯¹åº”çš„è¯­è¨€æ–‡ç« åˆ—è¡¨ã€‚\nå¦‚æœæƒ³åœ¨å¤šè¯­è¨€ä¸‹æ”¯æŒåˆ†é¡µï¼Œå¯ä»¥ä½¿ç”¨ jekyll-pagination-v2ã€‚æˆ‘ä¸Šé¢æåˆ°è¿‡ Github Pages æ’ä»¶ ç™½åå•åˆ—è¡¨ ä¸æ”¯æŒè¯¥æ’ä»¶ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨å°±éœ€è¦ æ‰‹åŠ¨å®ç°éƒ¨ç½²ã€‚ä»¥ä¸‹æ˜¯å¦‚ä½•é…ç½®ä½¿ç”¨ jekyll-pagination-v2\nGemfile å®‰è£… $ gem \u0026#39;jekyll-paginate-v2\u0026#39; _config.yml é…ç½® æ³¨æ„ï¼šv2 å’Œ v1 çš„é…ç½®ä¸å…¼å®¹ï¼Œéœ€è¦æŒ‰ç…§å¦‚ä¸‹é…ç½®åšç›¸åº”ä¿®æ”¹\nplugins: - jekyll-paginate-v2 pagination: enabled: true per_page: 5 permalink: /page/:num/ sort_reverse: true pages é¡µé¢é…ç½® é¦–é¡µ index.html è¿›è¡Œåˆ†é¡µï¼Œéœ€è¦æ·»åŠ å¦‚ä¸‹é…ç½®\n# /index.html --- pagination: enabled: true # æ˜¯çš„ï¼Œè¿™é‡Œè¿˜éœ€è¦å†æ¬¡å¼€å¯ä¸€æ¬¡ locale: en --- pagination.locale æ­¤å¤„ç”¨æ¥é…ç½®åˆ†é¡µç­›é€‰æ¡ä»¶ï¼Œæ ¹æ®é¡µé¢çš„ locale å­—æ®µè¿›è¡Œè¿‡æ»¤ã€‚è¿™ä¹Ÿæ˜¯æˆ‘åœ¨ Front Matter ç”¨ locale å­—æ®µæ¥æ ‡å¿—è¯­è¨€çš„åŸå› ï¼Œå¤ç”¨ã€‚\nå¯¹åº”çš„ï¼Œåœ¨ _zh æ–‡ä»¶å¤¹ä¸‹é¢åˆ›å»ºä¸­æ–‡é¦–é¡µ index.htmlã€‚\n# /_zh/index.html --- permalink: /zh/ # æ­¤å¤„æ˜¯ä¸ºäº†è®©é¦–é¡µä¸æ˜¾ç¤º .html åç¼€ pagination: enabled: true locale: zh --- æ³¨æ„ï¼šæˆ‘åœ¨è¿™é‡Œé…ç½®çš„æ—¶å€™ï¼Œé‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œå½“æˆ‘æŠŠ index.html æ”¾åˆ° _zh æ–‡ä»¶å¤¹åï¼Œåˆ†é¡µ locale ç­›é€‰ä¸èµ·ä½œç”¨ï¼Œç›®å‰è¿˜æ²¡è§£å†³ã€‚\nä¸´æ—¶è§£å†³æ–¹æ¡ˆæ˜¯å°† zh/index.html æ”¾åœ¨æ ¹ç›®å½•ï¼Œå¹¶æ”¹åä¸º index_zh.htmlã€‚\nåˆ†é¡µä½¿ç”¨ ä½¿ç”¨æ²¡æœ‰å˜åŒ–ï¼Œå’Œ v1 ä¸€æ ·çš„ä½¿ç”¨æ–¹å¼ï¼Œè¯¦ç»†è¯·çœ‹ Pagination\nç›¸å…³å‚è€ƒé“¾æ¥ Jekyll-Paginate-v2 Jekyll-Paginate-V2 Filter Locales ","permalink":"https://lexcao.io/zh/posts/jekyll-multi-language-without-plugin/","summary":"\u003ch1 id=\"å®ç°ç›®æ ‡\"\u003eå®ç°ç›®æ ‡\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003eæ”¯æŒå¤šè¯­è¨€ï¼Œè‹±æ–‡ä¸ºä¸»ï¼Œä¸­æ–‡ä¸ºè¾…ï¼›\u003c/li\u003e\n\u003cli\u003eå½“è®¿é—® \u003ccode\u003e/\u003c/code\u003e æ ¹ç›®å½•ä¸‹é¡µé¢ï¼Œæ¯”å¦‚ \u003ccode\u003e/about.html\u003c/code\u003e \u003ccode\u003e/posts/hello-world\u003c/code\u003e æ˜¾ç¤ºè‹±æ–‡é¡µé¢ï¼›\u003c/li\u003e\n\u003cli\u003eå½“è®¿é—® \u003ccode\u003e/zh/\u003c/code\u003e ç›®å½•ä¸‹é¡µé¢ï¼Œæ¯”å¦‚ \u003ccode\u003e/zh/about.html\u003c/code\u003e \u003ccode\u003e/zh/posts/hello-world\u003c/code\u003e æ˜¾ç¤ºä¸­æ–‡é¡µé¢ï¼›\u003c/li\u003e\n\u003cli\u003eå½“è®¿é—® \u003ccode\u003e../hello-world\u003c/code\u003e æ–‡ç« æ—¶ï¼Œå¯ä»¥é€šè¿‡é“¾æ¥è·³è½¬åˆ°å¯¹åº”è¯­è¨€é¡µé¢ï¼›\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003earchive\u003c/code\u003e å’Œ \u003ccode\u003eindex\u003c/code\u003e é¡µé¢ä¸­ä»…æ˜¾ç¤ºå‡ºå½“å‰è¯­è¨€é¡µé¢ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1 id=\"ç›¸å…³ç¼ºé™·\"\u003eç›¸å…³ç¼ºé™·\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e404 é¡µé¢æ— æ³•é…ç½®ï¼Œåªèƒ½åœ¨ \u003ccode\u003e404.html\u003c/code\u003e é¡µé¢å†™ä¸Šä¸¤ç§è¯­è¨€ï¼›\u003c/li\u003e\n\u003cli\u003eæ”¯æŒå¤šè¯­è¨€æ–‡ç« çš„åˆ†é¡µæ’ä»¶ \u003ccode\u003ejekyll-paginate-v2\u003c/code\u003e æ²¡åœ¨ GitHub Pages æ”¯æŒçš„æ’ä»¶ç™½åå•å†…ï¼Œç›®å‰æœ¬åšå®¢é¦–é¡µä¸æ”¯æŒåˆ†é¡µã€‚å¤šè¯­è¨€åˆ†é¡µè¯¦è§\u003ca href=\"/zh/posts/jekyll-multi-language-without-plugin/#paginate\"\u003eä¸‹æ–‡\u003c/a\u003eï¼›\u003c/li\u003e\n\u003cli\u003eå¤šè¯­è¨€æ—¶é—´è¡¨ç¤ºæœ‰ç‚¹éº»çƒ¦ï¼Œéœ€è¦åšä¸€äº›å­—ç¬¦ä¸²å¤„ç†å·¥ä½œï¼Œèƒ½å®ç°ä½†æ˜¯ä¸å¤ªä¼˜é›…ï¼Œå…·ä½“å¯ä»¥å‚è€ƒ \u003ca href=\"http://alanwsmith.com/jekyll-liquid-date-formatting-examples\"\u003e\u003cem\u003eJekyll-Date-Formatting\u003c/em\u003e\u003c/a\u003eã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1 id=\"å¼€å§‹é…ç½®\"\u003eå¼€å§‹é…ç½®\u003c/h1\u003e\n\u003cp\u003eæœ€åˆï¼Œæˆ‘æœç´¢åˆ° \u003ccode\u003ei18n\u003c/code\u003e æ’ä»¶ \u003ca href=\"https://github.com/kurtsson/jekyll-multiple-languages-plugin\"\u003e\u003cem\u003eJekyll-Multiple-Languages-Plugin\u003c/em\u003e\u003c/a\u003eã€‚\u003c/p\u003e\n\u003cp\u003eè¯¥ä»“åº“çš„ Star æ•°æ˜¯å¤šè¯­è¨€æ’ä»¶ä¸­æœ€å¤šçš„ï¼ŒåŒæ—¶é‡Œé¢ä¹Ÿåˆ—å‡ºäº†ç›¸å…³å…¶ä»–å¤šè¯­è¨€æ’ä»¶ï¼Œå·²ç»æ¯”è¾ƒå®Œå–„ï¼Œä¸æƒ³æŠ˜è…¾çš„å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚\u003c/p\u003e\n\u003cp\u003eç›®å‰æˆ‘ä¸ºäº†ç®€å•å’Œå¯å®šåˆ¶åŒ–ï¼ŒåŒæ—¶çœç•¥æ‰æ’ä»¶ä¸­ä¸å¿…è¦çš„åŠŸèƒ½ï¼Œé€‰æ‹©ä½¿ç”¨è‡ªå®šä¹‰è§„åˆ™æ¥å®ç°å¤šè¯­è¨€åŠŸèƒ½ã€‚\u003c/p\u003e\n\u003ch2 id=\"1-å•ä¸ªåšæ–‡é…ç½®\"\u003e1. å•ä¸ªåšæ–‡é…ç½®\u003c/h2\u003e\n\u003cp\u003eæ¯ä¸€ç¯‡æ–‡ç« å’Œé¡µé¢éœ€è¦å®šä¹‰ä¸¤ä¸ªå±æ€§ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003euid\u003c/code\u003e æ ‡ç¤ºæ–‡ç« å”¯ä¸€ï¼Œä¸€ç¯‡æ–‡ç« çš„ä¸­æ–‡ç‰ˆæœ¬å’Œè‹±æ–‡ç‰ˆæœ¬ \u003ccode\u003euid\u003c/code\u003e ç›¸åŒï¼›\n\u003cul\u003e\n\u003cli\u003eæ³¨æ„ï¼š\u003ccode\u003euid\u003c/code\u003e å¯ä»¥è®¾ç½®ä¸ºä»»æ„å‘½åï¼Œæ¯”å¦‚ \u003ccode\u003edocument_id\u003c/code\u003e ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003elocale\u003c/code\u003e æ ‡ç¤ºæ–‡ç« è¯­è¨€ï¼Œä¸€ç¯‡æ–‡ç« è¢«æ¸²æŸ“åä½œä¸ºå“ªç§è¯­è¨€å±•ç¤ºã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eæ‰€ä»¥æ¯ç¯‡æ–‡ç« çš„ \u003ccode\u003eFront Matter\u003c/code\u003e æ–°å¢å¦‚ä¸‹è®¾ç½®\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e---\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003euid\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ehello-world\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003elocale\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ezh\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e---\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"2-å¯¹äºæ–‡ç« -posts\"\u003e2. å¯¹äºæ–‡ç«  posts\u003c/h2\u003e\n\u003cp\u003eæ¯ç¯‡æ–‡ç« éƒ½éœ€è¦åœ¨ \u003ccode\u003eFront Matter\u003c/code\u003e ä¸­å†™ä¸Š \u003ccode\u003elocale\u003c/code\u003e é‡å¤å¤šä½™ã€‚\u003cstrong\u003eä¸è¦é‡å¤è‡ªå·±\u003c/strong\u003eã€‚æˆ‘å‡†å¤‡ä½¿ç”¨ä¸åŒæ–‡ä»¶å¤¹æ¥åŒºåˆ†ä¸åŒè¯­è¨€çš„æ–‡ç« ï¼Œç„¶ååœ¨é…ç½®æ–‡ä»¶è®¾ç½® \u003ccode\u003elocale\u003c/code\u003e çš„é»˜è®¤å€¼ã€‚\u003c/p\u003e","title":"Jekyll ä¸ä½¿ç”¨æ’ä»¶æ”¯æŒå¤šè¯­è¨€"},{"content":"ä½ å¥½ ç½‘ä¸Šé‚»å±… æ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢ï¼Œæˆ‘æ˜¯ æ›¹å†é‘« Lex Caoã€‚\næœ¬åšå®¢åä¸º ä»£ç ç¬”è®° CodingNotesã€‚\næœ¬åšå®¢ç”¨äº åˆ†äº«/æ€»ç»“/è®°å½• æˆ‘çš„ç”Ÿæ´»æˆ–å·¥ä½œä¸­è·Ÿç¼–ç¨‹æœ‰å…³çš„ çŸ¥è¯†/æ€è€ƒ/æƒ³æ³•ã€‚\nå…³äºæˆ‘ ç°å±… æ·±åœ³ã€‚\nä½¿ç”¨\nJava / Kotlinï¼ˆä¸»è¦ä½¿ç”¨ â¤ï¸ï¼‰ï¼› SpringBootï¼› SpringCloudã€‚ å¦‚æœä½ æƒ³ è”ç³»æˆ‘ã€‚\nå…³äºåšå®¢ é™æ€ç½‘ç«™ç”Ÿæˆå™¨\nJekyll 4.0 https://jekyllrb.com/ ä½¿ç”¨ä¸»é¢˜ Lagrange http://jekyllthemes.org/themes/lagrange/ ä»£ç æ‰˜ç®¡\nGitHub åšå®¢æºç åœ¨è¿™é‡Œ åšå®¢éƒ¨ç½²\nGitHub Pages ä¸­è‹±æ”¯æŒ ä¸ºäº†æ›´å¥½çš„ç»ƒä¹ è‹±æ–‡ï¼Œæœ¬åšå®¢æ”¯æŒä¸­æ–‡å’Œè‹±æ–‡ä¸¤ç§è¯­è¨€ã€‚æœ‰å¯¹åº”è¯­è¨€çš„é¡µé¢æ—¶ï¼Œå¯ä»¥ç‚¹å‡»å³ä¸Šè§’çš„è¯­è¨€å­—ç¬¦è¿›è¡Œåˆ‡æ¢ã€‚\né¡ºä¾¿ä¸€æï¼Œæœ¬åšå®¢ä»¥è‹±æ–‡ä¸ºä¸»ï¼Œå½“ç„¶ï¼Œä¹Ÿä¼šæœ‰ç›¸åº”çš„ä¸­æ–‡å†…å®¹ã€‚\næ•¬è¯·æœŸå¾…ã€‚\næ„Ÿè°¢ä½ çš„é©»è¶³ ç›¸å…³é“¾æ¥ Code icon by Icons8 Powered by Jekyll with Lagrange theme Deployed by GitHub Pages Free to use photos by Pexels Free to use photos by Unsplash ","permalink":"https://lexcao.io/zh/about/","summary":"\u003ch2 id=\"ä½ å¥½-ç½‘ä¸Šé‚»å±…\"\u003eä½ å¥½ ç½‘ä¸Šé‚»å±…\u003c/h2\u003e\n\u003cp\u003eæ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢ï¼Œæˆ‘æ˜¯ \u003cstrong\u003eæ›¹å†é‘«\u003c/strong\u003e \u003ccode\u003eLex Cao\u003c/code\u003eã€‚\u003c/p\u003e\n\u003cp\u003eæœ¬åšå®¢åä¸º \u003cstrong\u003eä»£ç ç¬”è®°\u003c/strong\u003e \u003ccode\u003eCodingNotes\u003c/code\u003eã€‚\u003c/p\u003e\n\u003cp\u003eæœ¬åšå®¢ç”¨äº \u003cstrong\u003eåˆ†äº«/æ€»ç»“/è®°å½•\u003c/strong\u003e æˆ‘çš„ç”Ÿæ´»æˆ–å·¥ä½œä¸­è·Ÿç¼–ç¨‹æœ‰å…³çš„ \u003cstrong\u003eçŸ¥è¯†/æ€è€ƒ/æƒ³æ³•\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003ch2 id=\"å…³äºæˆ‘\"\u003eå…³äºæˆ‘\u003c/h2\u003e\n\u003cp\u003eç°å±… æ·±åœ³ã€‚\u003c/p\u003e\n\u003cp\u003eä½¿ç”¨\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eJava / Kotlinï¼ˆä¸»è¦ä½¿ç”¨ â¤ï¸ï¼‰ï¼›\u003c/li\u003e\n\u003cli\u003eSpringBootï¼›\u003c/li\u003e\n\u003cli\u003eSpringCloudã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eå¦‚æœä½ æƒ³ \u003ca href=\"mailto:lexcao@foxmail.com\"\u003eè”ç³»æˆ‘\u003c/a\u003eã€‚\u003c/p\u003e\n\u003ch2 id=\"å…³äºåšå®¢\"\u003eå…³äºåšå®¢\u003c/h2\u003e\n\u003cp\u003eé™æ€ç½‘ç«™ç”Ÿæˆå™¨\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eJekyll 4.0\u003c/code\u003e \u003ca href=\"https://jekyllrb.com/\"\u003ehttps://jekyllrb.com/\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eä½¿ç”¨ä¸»é¢˜  \u003ccode\u003eLagrange\u003c/code\u003e \u003ca href=\"http://jekyllthemes.org/themes/lagrange/\"\u003ehttp://jekyllthemes.org/themes/lagrange/\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eä»£ç æ‰˜ç®¡\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eGitHub\u003c/li\u003e\n\u003cli\u003eåšå®¢æºç åœ¨\u003ca href=\"https://github.com/lexcao/lexcao.github.io\"\u003e\u003cem\u003eè¿™é‡Œ\u003c/em\u003e\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eåšå®¢éƒ¨ç½²\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eGitHub Pages\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"ä¸­è‹±æ”¯æŒ\"\u003eä¸­è‹±æ”¯æŒ\u003c/h2\u003e\n\u003cp\u003eä¸ºäº†æ›´å¥½çš„ç»ƒä¹ è‹±æ–‡ï¼Œæœ¬åšå®¢æ”¯æŒä¸­æ–‡å’Œè‹±æ–‡ä¸¤ç§è¯­è¨€ã€‚æœ‰å¯¹åº”è¯­è¨€çš„é¡µé¢æ—¶ï¼Œå¯ä»¥ç‚¹å‡»å³ä¸Šè§’çš„è¯­è¨€å­—ç¬¦è¿›è¡Œåˆ‡æ¢ã€‚\u003c/p\u003e\n\u003cp\u003eé¡ºä¾¿ä¸€æï¼Œæœ¬åšå®¢ä»¥è‹±æ–‡ä¸ºä¸»ï¼Œå½“ç„¶ï¼Œä¹Ÿä¼šæœ‰ç›¸åº”çš„ä¸­æ–‡å†…å®¹ã€‚\u003c/p\u003e\n\u003cp\u003eæ•¬è¯·æœŸå¾…ã€‚\u003c/p\u003e\n\u003ch2 id=\"æ„Ÿè°¢ä½ çš„é©»è¶³\"\u003eæ„Ÿè°¢ä½ çš„é©»è¶³\u003c/h2\u003e\n\u003ch2 id=\"ç›¸å…³é“¾æ¥\"\u003eç›¸å…³é“¾æ¥\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca target=\"_blank\" href=\"https://icons8.com/icons/set/code\"\u003eCode\u003c/a\u003e icon by \u003ca target=\"_blank\" href=\"https://icons8.com\"\u003eIcons8\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003ePowered by \u003ca href=\"https://jekyllrb.com/\"\u003e\u003cem\u003eJekyll\u003c/em\u003e\u003c/a\u003e with \u003ca href=\"http://jekyllthemes.org/themes/lagrange/\"\u003e\u003cem\u003eLagrange\u003c/em\u003e\u003c/a\u003e theme\u003c/li\u003e\n\u003cli\u003eDeployed by \u003ca href=\"https://pages.github.com\"\u003e\u003cem\u003eGitHub Pages\u003c/em\u003e\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eFree to use photos by \u003ca href=\"https://www.pexels.com/\"\u003e\u003cem\u003ePexels\u003c/em\u003e\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eFree to use photos by \u003ca href=\"https://unsplash.com\"\u003e\u003cem\u003eUnsplash\u003c/em\u003e\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","title":"å…³äº"},{"content":"åšå®¢é…ç½®ï¼š\né™æ€ç½‘é¡µç”Ÿæˆå™¨ Jekyll 3.8.5 Ruby 2.6.0 ä¸»é¢˜ lagrange ç½‘é¡µåˆ†æ Google Aynalysis Baidu Aynalysis éƒ¨ç½² GitHub Pages è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œä½œä¸ºæœ€ç®€å•çš„ â€œä½ å¥½ ä¸–ç•Œâ€ï¼Œæˆ‘æƒ³è®°å½•ä¸€ä¸‹è¯¥åšå®¢çš„è¯ç”Ÿè¿‡ç¨‹ï¼Œä»¥åŠå¦‚æœä½ ä¹Ÿæƒ³æ­å»ºä¸€ä¸ªè‡ªå·±çš„åšå®¢åº”è¯¥æ€ä¹ˆåšã€‚\næœ¬æ–‡ç« å°†ä¼šæ¶‰åŠä¸‰ä¸ªéƒ¨åˆ†ï¼š\né€‰æ‹©åšå®¢ç±»å‹ å‡†å¤‡å¥½æ‰€éœ€å†…å®¹ å°†ä»–ä»¬ç¼–æ’èµ·æ¥ ç¬¬ä¸€æ­¥ é€‰æ‹©åšå®¢ç±»å‹ æ ¹æ®å‰ç«¯ç½‘é¡µæ˜¯å¦ä¸åå°æœåŠ¡å™¨æˆ–è€…æ•°æ®åº“äº¤äº’åˆ†ä¸ºï¼šé™æ€ç½‘ç«™ / åŠ¨æ€ç½‘ç«™\né™æ€ç½‘ç«™ï¼š\nä»…ä¾é  HTML / CSS / JS æ²¡æœ‰åå°æœåŠ¡å™¨å­˜å‚¨æ•°æ® æ•°æ®æ˜¯é¢„å…ˆç”Ÿæˆçš„ åŠ¨æ€ç½‘ç«™ï¼š\nä¾èµ–å‰ç«¯ HTML / CSS / JS æ•°æ®ä»åå°æœåŠ¡å™¨è·å– èƒ½å¤ŸåŠ¨æ€å“åº”ç”¨æˆ·è¯·æ±‚ æ‰€ä»¥ï¼Œé™æ€åšå®¢ï¼š\næ–‡ç« é¢„å…ˆç”Ÿæˆ ä¸ä¾èµ–åå°æœåŠ¡å™¨ åŠ¨æ€åšå®¢ï¼š\næ–‡ç« ä»åå°æœåŠ¡å™¨è·å– å‰ç«¯é¡µé¢åŠ¨æ€è·å– è€ƒè™‘åˆ°åˆšæ¥è§¦åˆ°åšå®¢æ­å»ºï¼Œå…ˆä»ç®€å•çš„é™æ€åšå®¢å…¥æ‰‹ã€‚ç›®å‰ GitHub ä¸Šæœ‰å¾ˆå¤šå¼€æºçš„é™æ€ç½‘ç«™ç”Ÿæˆå™¨ï¼Œè¿™é‡Œæˆ‘é€‰æ‹©ä½¿ç”¨ Jekyllã€‚\né€‰æ‹©åˆé€‚çš„é™æ€åšå®¢ç”Ÿæˆå™¨è¯·çœ‹ [Jekyll / Hugo / Hexo æ¯”è¾ƒ]({{ \u0026ldquo;/zh/posts/jekyll-hugo-hexo\u0026rdquo; | relative_url }})ã€‚\nç¬¬äºŒæ­¥ å‡†å¤‡å¥½æ‰€éœ€å†…å®¹ å‡†å¤‡å†…å®¹æ¶‰åŠä»¥ä¸‹æ–¹é¢ï¼š\nåšå®¢æ–‡ç«  åšå®¢ä»‹ç» ä½œè€…ä¿¡æ¯ åšå®¢åŸŸå åšå®¢æ–‡ç«  æå‰å†™å¥½æ–‡ç« å‡†å¤‡å‘å¸ƒ\nGitHub Pages éƒ¨ç½²è®°å½•ï¼ˆæœ¬æ–‡ ğŸ˜†ï¼‰ [Jekyll ä¸ä½¿ç”¨æ’ä»¶æ”¯æŒå¤šè¯­è¨€]({{ \u0026ldquo;/zh/posts/jekyll-multi-language-without-plugin\u0026rdquo; | relative_url }})ï¼ˆæœ¬åšå®¢æ˜¯ä¸­æ–‡å’Œè‹±æ–‡ ğŸ˜†ï¼‰ [Jekyll / Hugo / Hexo æ¯”è¾ƒ]({{ \u0026ldquo;/zh/posts/jekyll-hugo-hexo\u0026rdquo; | relative_url }})ï¼ˆæœ¬åšå®¢ç”¨ Jekyll ğŸ˜†ï¼‰ å¦‚ä½•é€‰æ‹©ä¸€ä¸ªè‹±æ–‡åï¼ˆLex Cao ğŸ˜†ï¼‰ åšå®¢ä»‹ç» æå‰å†™å¥½åšå®¢ä»‹ç»ï¼Œåšå®¢åˆ›å»ºåˆæœŸå¯ä»¥åªåŒ…å«ç®€ç•¥ä¿¡æ¯ï¼Œä»¥åå†æ…¢æ…¢è¡¥å……ï¼Œ\nè¯¦ç»†è¯·çœ‹ [å…³äº]({{ \u0026ldquo;/zh/menu/about.html\u0026rdquo; | relative_url }})ã€‚\nä½œè€…ä¿¡æ¯ ç¬”å è¿™é‡Œæˆ‘ç»™è‡ªå·±å–äº†ä¸€ä¸ªè‹±æ–‡å Lex Cao\nå–è‹±æ–‡åå¯ä»¥å‚è€ƒ å¦‚ä½•é€‰æ‹©ä¸€ä¸ªè‹±æ–‡å\nåšå®¢å ä¸­æ–‡å ä»£ç ç¬”è®°\nè‹±æ–‡å CodingNotes\nåšå®¢åŸŸå caolixin.com ä¸­æ–‡æ‹¼éŸ³æ²¡å®é™…æ„ä¹‰\nlexcao.com å·²ç»è¢«å ç”¨\nthecodingnotes.com å¥½åƒä¸é”™ï¼Œä½†æ˜¯æœ‰ç‚¹é•¿\nç¬¬ä¸‰æ­¥ ç¼–æ’èµ·æ¥ Jekyll å®‰è£… ç›¸å…³å‚è€ƒé“¾æ¥\nInstall on MacOS Jekyll with Bundle Creating a GitHub Pages with Jekyll ä½¿ç”¨åˆ°çš„å‘½ä»¤\n# install ruby 2.6.0+ $ xcode-select --install $ brew install ruby $ export PATH=/usr/local/opt/ruby/bin:$PATH $ source ~/.zshrc # install jekyll \u0026amp; bundler $ gem install --user-install bundler jekyll $ export PATH=$HOME/.gem/ruby/2.6.0/bin:$PATH $ source ~/.zshrc # init $ cd /blogs/github-pages-jekyll $ git init $ jekyll new . $ jekyll serve # serve with bundle $ bundle exec jekyll serve ä¸»é¢˜é€‰æ‹© å…³äºä¸»é¢˜ï¼Œæˆ‘æ¯”è¾ƒå–œæ¬¢ç®€çº¦ä¸€ç‚¹ã€‚\nåœ¨ç›¸å…³ä¸»é¢˜æµè§ˆç½‘ç«™ï¼š\njekyllthemes.org/ jekyllthemes.io/ æ‰¾åˆ°çš„å¿ƒä»ªçš„ä¸»é¢˜ï¼š\nLagrange Chalk Type Kikofri é€‰å‡ºä»¥ä¸Š 4 ä¸ªä¸»é¢˜ï¼Œæœ€åä½¿ç”¨ lagrange ä½œä¸ºåšå®¢ä¸»é¢˜ã€‚\næ’ä»¶è¯´æ˜ GitHub Pages é›†æˆ Jekyll å®ç°è‡ªåŠ¨éƒ¨ç½²éœ€è¦æ’ä»¶ github-pagesã€‚è¯¥æ’ä»¶ä»…å…è®¸ä½¿ç”¨ç™½åå•å†…æ’ä»¶ï¼Œå…·ä½“è¯·çœ‹å…è®¸æ’ä»¶åŠç‰ˆæœ¬ï¼› è¦æƒ³ä½¿ç”¨è‡ªå®šä¹‰æ’ä»¶ï¼ˆç™½åå•ä»¥å¤–çš„æ’ä»¶ï¼‰ï¼Œä¸èƒ½ GitHub Pages çš„è‡ªåŠ¨éƒ¨ç½²åŠŸèƒ½ï¼Œéœ€è¦å°† _site ç›®å½•æ”¾åˆ°ä»“åº“ä¸Šï¼Œæ‰‹åŠ¨å®ç°è‡ªåŠ¨éƒ¨ç½²ï¼› æœ¬æ¬¡æ˜¯ç¬¬ä¸€æ¬¡æ­å»ºåšå®¢ï¼Œæ‰€ä»¥é€‰ç”¨äº† GitHub Pages çš„è‡ªåŠ¨éƒ¨ç½²ã€‚ å¤šè¯­è¨€é…ç½® å¤šè¯­è¨€é…ç½®ï¼Œéœ€è¦æŠ˜è…¾çš„åœ°æ–¹æ¯”è¾ƒå¤šï¼Œè¯¦ç»†è¯·çœ‹æ–‡ç« \nJekyll ä¸ä½¿ç”¨æ’ä»¶æ”¯æŒå¤šè¯­è¨€ã€‚\néƒ¨ç½²åˆ° GitHub Pages å®˜æ–¹æ•™ç¨‹\nåˆ›å»ºä¸€ä¸ªä»“åº“ ä»“åº“åéœ€è¦æŒ‰ç…§å›ºå®šæ ¼å¼ \u0026lt;user\u0026gt;.github.io\nå¦‚ï¼šlexcao.github.io\nå°†æ–‡ç« æ¨åˆ° GitHub # æ·»åŠ è¿œç¨‹ä»“åº“ $ git remote add origin https://github.com/lexcao/lexcao.github.io.git $ git push -u origin master ç½‘ç«™å·²å¯ä»¥è®¿é—® è¿›å…¥ä»“åº“è®¾ç½®é¡µé¢ Settings \u0026gt; Options \u0026gt; æ‹‰åˆ°æœ€ä¸‹é¢ï¼Œ\nYour site is published at https://lexcao.github.io/ åšå®¢å·²ç»å‘å¸ƒæˆåŠŸã€‚\nè®¿é—® https://lexcao.github.io/ å³å¯çœ‹åˆ°ã€‚\nå¯ä»¥åœ¨ environment çœ‹åˆ°åšå®¢éƒ¨ç½²æƒ…å†µï¼Œé»˜è®¤é…ç½®æ˜¯ master åˆ†æ”¯æœ‰ä»£ç æ›´æ–°ä¼šè¿›è¡Œè‡ªåŠ¨éƒ¨ç½²ã€‚\nç½‘ç«™ç»Ÿè®¡ åšå®¢å¯ä»¥è®¿é—®ä»¥åï¼Œå°±å¯ä»¥å¼€å§‹æ¥å…¥ç½‘ç«™ç»Ÿè®¡ç›¸å…³åŠŸèƒ½ï¼Œå€ŸåŠ©ç¬¬ä¸‰æ–¹å¹³å°ã€‚\nGoogle Analytics åœ¨ Google Analytics åˆ›å»ºåª’ä½“èµ„æºï¼Œæ‹¿åˆ°ä¸€ä¸ª UA-xxx-x IDï¼Œå¹¶ä¸”å¼•å…¥ç»Ÿè®¡ä»£ç ï¼› åœ¨ Google Tag Manager åˆ›å»ºè·Ÿè¸ªä»£ç ï¼Œæ ¹æ®ä¸Šé¢æ‹¿åˆ°çš„ UA-xxx-x ID æ–°å¢ä¸€ä¸ª Google Analytics ä»£ç è·Ÿè¸ªï¼Œå¼•å…¥å…¨å±€ç»Ÿè®¡ä»£ç ï¼Œå¹¶å‘å¸ƒã€‚ å¯é€‰æ‹©ï¼Œåœ¨ Google Analytics å…³è” Google Search Consoleã€‚ æ³¨æ„äº‹é¡¹ï¼š\nGoogle Tag Manager ä¸å…è®¸å˜é‡ä¸ºä¸­æ–‡å; é‡æ–°å‘å¸ƒ GitHub Pages ç”Ÿæ•ˆåï¼Œå¦‚æœè¯·æ±‚ js æ–‡ä»¶ net::ERR_BLOCKED_BY_CLIENT é”™è¯¯ï¼Œå…³æ‰å¹¿å‘Šæ‹¦æˆªæ’ä»¶é‡è¯•ã€‚ Baidu Analytics åœ¨ ç™¾åº¦ç»Ÿè®¡ å…³è”ä¸Šç½‘é¡µï¼Œå¼•å…¥ç»Ÿè®¡ä»£ç ï¼Œå®Œæˆé…ç½®ã€‚\nå®æ—¶æ€§æ¯” Google ç¨å¾®å·®ä¸€ç‚¹ï¼ˆå¯èƒ½æ˜¯ github.io è¿™ä¸ªåŸŸååœ¨å›½å¤–çš„åŸå› ï¼‰\nç»“è¯­ è‡³æ­¤ï¼Œæ•´ä¸ªåšå®¢å·²ç»å®Œç¾è¿è½¬äº†ï¼Œå¯ä»¥å¼€å§‹ä¸“å¿ƒå†™æ–‡ç« äº† ğŸ˜Šã€‚\n","permalink":"https://lexcao.io/zh/posts/hello-world/","summary":"\u003cp\u003eåšå®¢é…ç½®ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eé™æ€ç½‘é¡µç”Ÿæˆå™¨\n\u003cul\u003e\n\u003cli\u003eJekyll 3.8.5\u003c/li\u003e\n\u003cli\u003eRuby 2.6.0\u003c/li\u003e\n\u003cli\u003eä¸»é¢˜ \u003ca href=\"http://jekyllthemes.org/themes/lagrange/\"\u003elagrange\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eç½‘é¡µåˆ†æ\n\u003cul\u003e\n\u003cli\u003eGoogle Aynalysis\u003c/li\u003e\n\u003cli\u003eBaidu Aynalysis\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eéƒ¨ç½²\n\u003cul\u003e\n\u003cli\u003eGitHub Pages\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eè¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œä½œä¸ºæœ€ç®€å•çš„ â€œä½ å¥½ ä¸–ç•Œâ€ï¼Œæˆ‘æƒ³è®°å½•ä¸€ä¸‹è¯¥åšå®¢çš„è¯ç”Ÿè¿‡ç¨‹ï¼Œä»¥åŠå¦‚æœä½ ä¹Ÿæƒ³æ­å»ºä¸€ä¸ªè‡ªå·±çš„åšå®¢åº”è¯¥æ€ä¹ˆåšã€‚\u003c/p\u003e\n\u003cp\u003eæœ¬æ–‡ç« å°†ä¼šæ¶‰åŠä¸‰ä¸ªéƒ¨åˆ†ï¼š\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eé€‰æ‹©åšå®¢ç±»å‹\u003c/li\u003e\n\u003cli\u003eå‡†å¤‡å¥½æ‰€éœ€å†…å®¹\u003c/li\u003e\n\u003cli\u003eå°†ä»–ä»¬ç¼–æ’èµ·æ¥\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch1 id=\"ç¬¬ä¸€æ­¥-é€‰æ‹©åšå®¢ç±»å‹\"\u003eç¬¬ä¸€æ­¥ é€‰æ‹©åšå®¢ç±»å‹\u003c/h1\u003e\n\u003cp\u003eæ ¹æ®å‰ç«¯ç½‘é¡µæ˜¯å¦ä¸åå°æœåŠ¡å™¨æˆ–è€…æ•°æ®åº“äº¤äº’åˆ†ä¸ºï¼šé™æ€ç½‘ç«™ / åŠ¨æ€ç½‘ç«™\u003c/p\u003e\n\u003cp\u003eé™æ€ç½‘ç«™ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eä»…ä¾é  HTML / CSS / JS\u003c/li\u003e\n\u003cli\u003eæ²¡æœ‰åå°æœåŠ¡å™¨å­˜å‚¨æ•°æ®\u003c/li\u003e\n\u003cli\u003eæ•°æ®æ˜¯é¢„å…ˆç”Ÿæˆçš„\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eåŠ¨æ€ç½‘ç«™ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eä¾èµ–å‰ç«¯ HTML / CSS / JS\u003c/li\u003e\n\u003cli\u003eæ•°æ®ä»åå°æœåŠ¡å™¨è·å–\u003c/li\u003e\n\u003cli\u003eèƒ½å¤ŸåŠ¨æ€å“åº”ç”¨æˆ·è¯·æ±‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eæ‰€ä»¥ï¼Œé™æ€åšå®¢ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eæ–‡ç« é¢„å…ˆç”Ÿæˆ\u003c/li\u003e\n\u003cli\u003eä¸ä¾èµ–åå°æœåŠ¡å™¨\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eåŠ¨æ€åšå®¢ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eæ–‡ç« ä»åå°æœåŠ¡å™¨è·å–\u003c/li\u003e\n\u003cli\u003eå‰ç«¯é¡µé¢åŠ¨æ€è·å–\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eè€ƒè™‘åˆ°åˆšæ¥è§¦åˆ°åšå®¢æ­å»ºï¼Œå…ˆä»ç®€å•çš„é™æ€åšå®¢å…¥æ‰‹ã€‚ç›®å‰ GitHub ä¸Šæœ‰å¾ˆå¤šå¼€æºçš„é™æ€ç½‘ç«™ç”Ÿæˆå™¨ï¼Œè¿™é‡Œæˆ‘é€‰æ‹©ä½¿ç”¨ \u003ccode\u003eJekyll\u003c/code\u003eã€‚\u003c/p\u003e\n\u003cp\u003eé€‰æ‹©åˆé€‚çš„é™æ€åšå®¢ç”Ÿæˆå™¨è¯·çœ‹ [\u003cem\u003eJekyll / Hugo / Hexo æ¯”è¾ƒ\u003c/em\u003e]({{ \u0026ldquo;/zh/posts/jekyll-hugo-hexo\u0026rdquo; | relative_url }})ã€‚\u003c/p\u003e\n\u003ch1 id=\"ç¬¬äºŒæ­¥-å‡†å¤‡å¥½æ‰€éœ€å†…å®¹\"\u003eç¬¬äºŒæ­¥ å‡†å¤‡å¥½æ‰€éœ€å†…å®¹\u003c/h1\u003e\n\u003cp\u003eå‡†å¤‡å†…å®¹æ¶‰åŠä»¥ä¸‹æ–¹é¢ï¼š\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eåšå®¢æ–‡ç« \u003c/li\u003e\n\u003cli\u003eåšå®¢ä»‹ç»\u003c/li\u003e\n\u003cli\u003eä½œè€…ä¿¡æ¯\u003c/li\u003e\n\u003cli\u003eåšå®¢åŸŸå\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"åšå®¢æ–‡ç« \"\u003eåšå®¢æ–‡ç« \u003c/h2\u003e\n\u003cp\u003eæå‰å†™å¥½æ–‡ç« å‡†å¤‡å‘å¸ƒ\u003c/p\u003e","title":"ä½ å¥½ ä¸–ç•Œ"},{"content":"","permalink":"https://lexcao.io/zh/projects/","summary":"","title":"é¡¹ç›®"}]